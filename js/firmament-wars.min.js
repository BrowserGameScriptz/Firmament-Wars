!function(e,t,a,n,o,r,i,s,l,c,u,d,p,m,g,f,h,y,b,v,w,k,T,C,S,B,N,A,M,G,E,F,L){function I(t){var a=pe.tiles[t],n="Default.jpg",o=a.name;0===a.player?(n="Player0.jpg",a.units>0?o=ie[ce.lang].barbarianTribe:(o=ie[ce.lang].uninhabited,n="Default.jpg")):(n=a.flag,o=a.name);var r={food:0,culture:0,production:0,defense:0};a.player&&(r.food=~~((a.food>8?8:a.food)/8*99),r.production=~~((a.production>8?8:a.production)/8*99),r.culture=~~((a.culture>8?8:a.culture)/8*99),r.defense=~~(a.defense/4*99));var i="<span>"+a.food+'<img src="images/icons/food.png" class="fw-icon-sm"></span><span>'+a.production+'<img src="images/icons/production.png" class="fw-icon-sm"></span><span>'+a.culture+'<img src="images/icons/culture.png" class="fw-icon-sm"></span><span>'+a.defense+'<img src="images/icons/tile-defense.png" class="fw-icon-sm"></span>';if(de.targetNameWrap.innerHTML=o,de.targetResources.innerHTML=i,de.targetFlag.src="images/flags/"+n,a.player===ce.player&&ce.tech.masonry){var s=a.defense-(a.capital?1:0);if(s<3){de.buildWord.textContent=ie[ce.lang].defenseLabel[s],de.buildCost.textContent=ue.upgradeCost[s];var l=ae.defenseTooltip(s);e("#upgradeTileDefense").attr("title",l).tooltip("fixTitle").tooltip("hide").tooltip({animation:!1,placement:"bottom",container:"body"})}}ke.setBuildButton(),le.target()}function D(){new Audio("sound/sniper0.mp3");e.ajax({type:"GET",url:app.url+"php/gameVictory.php"}).done(function(e){var t="";e.ceaseFire?(t="<p>"+ie[ce.lang].armistice+"</p>\t\t\t\t<div>"+ie[ce.lang].gameArmistice+'</div>\t\t\t\t<div id="ceaseFire" class="endBtn">\t\t\t\t\t<div class="modalBtnChild">'+ie[ce.lang].ceaseFire+"</div>\t\t\t\t</div>",we.play("shotgun2")):e.gameDone&&(t="<p>"+ie[ce.lang].congratulations+"</p>\t\t\t\t<div>"+ie[ce.lang].gameVictory+'</div>\t\t\t\t<div id="endWar" class="endBtn">\t\t\t\t\t<div class="modalBtnChild">'+ie[ce.lang].victory+"</div>\t\t\t\t</div>",ue.victory=!0),t&&P(t,1)}).fail(function(e){})}function P(t,r){e("body, #gameWrap").off("click mousedown keydown keyup keypress"),ue.gameDuration=~~((E.now()-1*sessionStorage.getItem("gameDuration"))/1e3),e("#chat-input-open, #chat-input-wrap").remove(),A.onbeforeunload=null,b(function(){ue.over=1},1500),se.get(),new Image("images/FlatWorld90.jpg"),b(function(){var i=a.getElementById("victoryScreen");i.innerHTML=t,i.style.display="block",r?we.play("sniper0"):we.play("shotgun2"),e("#endWar").on(ae.click,function(){e("#endWar").off(),ue.view="stats",o.to("#gameWrap",.05,{alpha:0,onComplete:function(){e("#ui2-head, #diplomacy-ui, #chat-input-open, #chat-ui, #chat-input-wrap, #hud, #worldWrap, #victoryScreen").remove(),se.show()}})}),e("#ceaseFire").on(ae.click,function(){n.reload()}),e("#spectate").on(ae.click,function(t){e("#victoryScreen, #ui2, #resourceBody, #targetWrap").remove(),a.getElementById("surrender").style.display="none",a.getElementById("exitSpectate").style.display="inline",ue.spectateStatus=1}),e("#exitSpectate").on(ae.click,function(){e(this).off(ae.click),se.get(),o.to("#diplomacy-ui",1,{alpha:0,onComplete:function(){se.show()}})})},2500)}function R(){var e=a;de={targetUiWrap:e.getElementById("target-ui-wrap"),endTurn:e.getElementById("endTurn"),energyIndicator:e.getElementById("energyIndicator"),currentYear:e.getElementById("currentYear"),currentYearWrap:e.getElementById("currentYearWrap"),targetFlag:e.getElementById("targetFlag"),targetResources:e.getElementById("targetResources"),targetNameWrap:e.getElementById("targetNameWrap"),targetBarsWrap:e.getElementById("targetBarsWrap"),targetNameAnchor:e.getElementById("targetNameAnchor"),landWrap:e.getElementById("landWrap"),gameWindows:e.getElementsByClassName("gameWindow"),sumMoves:e.getElementById("sumMoves"),moves:e.getElementById("moves"),gameWrap:e.getElementById("gameWrap"),gameTableBody:e.getElementById("gameTableBody"),food:e.getElementById("food"),production:e.getElementById("production"),culture:e.getElementById("culture"),Msg:e.getElementById("Msg"),hud:e.getElementById("hud"),sumFood:e.getElementById("sumFood"),foodMax:e.getElementById("foodMax"),cultureMax:e.getElementById("cultureMax"),manpower:e.getElementById("manpower"),sumProduction:e.getElementById("sumProduction"),sumCulture:e.getElementById("sumCulture"),chatContent:e.getElementById("chat-content"),chatInput:e.getElementById("chat-input"),lobbyChatInput:e.getElementById("lobby-chat-input"),titleChatInput:e.getElementById("title-chat-input"),worldWrap:e.getElementById("worldWrap"),motionPath:e.getElementById("motionPath"),troopIcon:e.getElementById("troop-icon"),targetLine:e.getElementById("targetLine"),targetLineBorder:e.getElementById("targetLineBorder"),arrowheadTip:e.getElementById("arrowhead-tip"),arrowhead:e.getElementById("arrowhead"),arrowheadBorder:e.getElementById("arrowhead-border"),targetLineShadow:e.getElementById("targetLineShadow"),targetCrosshair:e.getElementById("targetCrosshair"),target:e.getElementById("target"),targetName:e.getElementById("targetName"),oBonus:e.getElementById("oBonus"),dBonus:e.getElementById("dBonus"),productionBonus:e.getElementById("productionBonus"),foodBonus:e.getElementById("foodBonus"),cultureBonus:e.getElementById("cultureBonus"),foodBar:e.getElementById("foodBar"),cultureBar:e.getElementById("cultureBar"),world:e.getElementById("world"),bgmusic:e.getElementById("bgmusic"),tileName:e.getElementById("tileName"),buildWord:e.getElementById("buildWord"),buildCost:e.getElementById("buildCost"),cannonsCost:e.getElementById("cannonsCost"),missileCost:e.getElementById("missileCost"),nukeCost:e.getElementById("nukeCost"),masonryCost:e.getElementById("masonryCost"),constructionCost:e.getElementById("constructionCost"),gunpowderCost:e.getElementById("gunpowderCost"),engineeringCost:e.getElementById("engineeringCost"),rocketryCost:e.getElementById("rocketryCost"),atomicTheoryCost:e.getElementById("atomicTheoryCost"),futureTechCost:e.getElementById("futureTechCost"),upgradeTileDefense:e.getElementById("upgradeTileDefense"),screenFlash:e.getElementById("screenFlash"),fireCannons:e.getElementById("fireCannons"),launchMissile:e.getElementById("launchMissile"),launchNuke:e.getElementById("launchNuke"),researchMasonry:e.getElementById("researchMasonry"),researchConstruction:e.getElementById("researchConstruction"),researchEngineering:e.getElementById("researchEngineering"),researchGunpowder:e.getElementById("researchGunpowder"),researchRocketry:e.getElementById("researchRocketry"),researchAtomicTheory:e.getElementById("researchAtomicTheory"),researchFutureTech:e.getElementById("researchFutureTech"),lobbyChatLog:e.getElementById("lobbyChatLog"),titleChatLog:e.getElementById("titleChatLog"),mapAnimations:e.getElementById("mapAnimations"),mapBars:e.getElementById("mapBars"),titleChatBody:e.getElementById("titleChatBody")}}function W(t){if("game"===ue.view)var a=confirm("Are you sure you want to surrender?");(a||t||"game"!==ue.view)&&(ue.lock(1),e.ajax({url:app.url+"php/exitGame.php",data:{view:ue.view}}).always(function(){n.reload()}))}function j(){a.getElementById("surrenderScreen").style.display="none",e.ajax({type:"GET",url:app.url+"php/surrender.php"}),we.play("click")}function O(e){}function z(){isLoggedIn&&(e("#fireCannons").attr("title",ae.cannonTooltip()).tooltip("fixTitle").tooltip({animation:!1}),e("#launchMissile").attr("title",ae.missileTooltip()).tooltip("fixTitle").tooltip({animation:!1}),e("#rush").attr("title",ae.rushTooltip()).tooltip("fixTitle").tooltip({animation:!1}))}function V(e){ce.food=e.food,ce.production=e.production,ce.culture=e.culture,de.moves.textContent=e.moves,de.production.textContent=e.production,de.food.textContent=e.food,de.culture.textContent=e.culture,de.manpower.textContent=ce.manpower,ce.manpower=e.manpower,de.foodMax.textContent=e.foodMax,de.cultureMax.textContent=e.cultureMax,de.oBonus.textContent=e.oBonus,de.dBonus.textContent=e.dBonus,de.productionBonus.textContent=e.productionBonus,de.foodBonus.textContent=e.foodBonus,de.cultureBonus.textContent=e.cultureBonus,Y(e)}function H(e){e.moves!==L&&(ce.moves=e.moves,de.moves.textContent=e.moves,e.sumMoves)}function U(e){e.production!==L&&o.to(ce,.3,{production:e.production,ease:Quad.easeIn,onUpdate:function(){de.production.textContent=~~ce.production}})}function q(e){e.manpower!==L&&(e.manpower>ce.manpower?(o.fromTo("#manpower",.5,{color:"#ffaa33"},{color:"#ffff00",repeat:-1,yoyo:!0}),o.to(ce,.5,{manpower:e.manpower,onUpdate:function(){de.manpower.textContent=~~ce.manpower}})):(ce.manpower=e.manpower,de.manpower.textContent=ce.manpower))}function K(e){H(e),U(e),o.to(ce,.3,{food:e.food===L?ce.food:e.food,culture:e.culture===L?ce.culture:e.culture,ease:Quad.easeIn,onUpdate:function(){de.food.textContent=~~ce.food,de.culture.textContent=~~ce.culture}}),q(e),e.foodMax!==L&&e.foodMax&&e.foodMax>ce.foodMax&&(de.foodMax.textContent=e.foodMax,ce.foodMax=e.foodMax),e.cultureMax!==L&&e.cultureMax&&e.cultureMax>ce.cultureMax&&(de.cultureMax.textContent=e.cultureMax,ce.cultureMax=e.cultureMax),e.oBonus!==L&&ce.oBonus!==e.oBonus&&(de.oBonus.textContent=e.oBonus,ce.oBonus=e.oBonus,z()),e.dBonus!==L&&ce.dBonus!==e.dBonus&&(de.dBonus.textContent=e.dBonus,ce.dBonus=e.dBonus),e.productionBonus!==L&&ce.productionBonus!==e.productionBonus&&(de.productionBonus.textContent=e.productionBonus,ce.productionBonus=e.productionBonus),e.foodBonus!==L&&ce.foodBonus!==e.foodBonus&&(de.foodBonus.textContent=e.foodBonus,ce.foodBonus=e.foodBonus),e.cultureBonus!==L&&ce.cultureBonus!==e.cultureBonus&&(de.cultureBonus.textContent=e.cultureBonus,ce.cultureBonus=e.cultureBonus,z()),Y(e)}function Y(e){o.to(de.foodBar,.3,{width:e.food/e.foodMax*100+"%"}),o.to(de.cultureBar,.3,{width:e.culture/e.cultureMax*100+"%"})}function J(){return this.account="",this.nation="",this.flag="",this.playerColor=0,this.team=1,this.alive=!0,this.government="",this}function X(){ue.lock(1);var t=a.getElementById("mainWrap");null!==t&&o.to(t,.5,{alpha:0}),e.ajax({type:"GET",url:app.url+"maps/"+ue.map.key+".php"}).done(function(t){de.worldWrap.innerHTML='<div id="worldWater"></div>'+t,e.ajax({type:"GET",url:app.url+"php/loadGameState.php"}).done(function(t){if(e("#login-modal").remove(),b(function(){e("#title-bg-wrap").remove()},2e3),ue.resourceTick=t.resourceTick,ue.startGame=1*t.startGame,ue.teamMode=t.teamMode,ue.gameMode=t.gameMode,ue.map.sizeX=t.mapData.sizeX,ue.map.sizeY=t.mapData.sizeY,ue.map.name=t.mapData.name,ue.map.tiles=t.mapData.tiles,t.tiles.length<ue.map.tiles)ue.loadAttempts<20?b(function(){ue.loadAttempts++,X()},500):(ue.msg(ie[ce.lang].failedToLoad),localStorage.setItem("reload",!1),b(function(){A.onbeforeunload=null,n.reload()},3e3));else{R(),e("meta").remove(),ue.screen.resizeMap(),we.gameMusicInit(),we.load.game(),he.load.game(),ce.player=t.player,ce.team=t.team,ce.account=t.account,ce.oBonus=t.oBonus,ce.dBonus=t.dBonus,ce.cultureBonus=t.cultureBonus,ce.tech=t.tech,ce.capital=t.capital,ce.flag=t.flag,ce.nation=t.nation,ce.foodMax=t.foodMax,ce.production=t.production,ce.sumProduction=t.sumProduction,ce.cultureMax=t.cultureMax,ce.moves=t.moves,ce.government=t.government,ce.cannonBonus=t.cannonBonus,be.updateGovernmentWindow(ce.government),"Monarchy"===ce.government?ce.cannonsBonus=2:"Democracy"===ce.government?ce.maxDeployment=48:"Republic"===ce.government?(ce.sumMoves=t.sumMoves,a.getElementById("moves").textContent=ce.sumMoves):"Fascism"===ce.government?(a.getElementById("moves").textContent=8,ce.deployCost=1,a.getElementById("deployCost").textContent=ce.deployCost):ce.government,pe.initialized=!0;for(var r=0,i=pe.player.length;r<i;r++)pe.player[r]=new J;ue.removeContainers(),ue.unlock(),ue.view="game",o.fromTo(gameWrap,1,{autoAlpha:0},{autoAlpha:1});for(var s=0,i=t.players.length;s<i;s++){c=t.players[s];(r=pe.player[c.player]).account=c.account,r.flag=c.flag,r.nation=c.nation,r.player=c.player,r.playerColor=c.playerColor,r.team=c.team,r.government=c.government,r.cpu=c.cpu,r.difficulty=c.difficulty,r.difficultyShort=c.difficulty.replace(/ /g,"")}for(var l=E.now(),s=0,i=t.tiles.length;s<i;s++){var c=t.tiles[s];pe.tiles[s]={name:c.tileName,account:c.account,player:c.player,nation:c.nation,flag:c.flag,capital:!!(t.capitalTiles.indexOf(s)>-1&&c.flag),units:c.units,food:c.food,production:c.production,culture:c.culture,defense:c.defense,adj:t.adj[s],timestamp:l};var u=a.getElementById("unit"+s);if(null!==u){var d=pe.tiles[s].capital?'<tspan class="unit-star">&#10028;</tspan>'+pe.tiles[s].units:pe.tiles[s].units;u.innerHTML=0===c.units?0:d,c.units&&(u.style.visibility="visible")}c.player&&o.set("#land"+s,{fill:ue.color[pe.player[c.player].playerColor],stroke:ue.color[pe.player[c.player].playerColor],strokeWidth:1,onComplete:function(){c.player&&o.set(this.target,{stroke:"hsl(+=0%, +=0%, -=30%)"})}})}ue.tileCount=i;for(var p=a.getElementsByClassName("unit"),m=(a.getElementById("mapBars"),a.getElementById("mapFlagWrap")),s=0,i=p.length;s<i;s++){var g=pe.tiles[s],f=p[s].getAttribute("x")-20,h=p[s].getAttribute("y")-30,y="blank.png";g!==L&&(!g.flag&&g.units?y="Player0.jpg":g.flag&&(y=g.flag));v=a.createElementNS("http://www.w3.org/2000/svg","image");if(v.id="flag"+s,v.setAttributeNS(null,"height",40),v.setAttributeNS(null,"width",40),v.setAttributeNS(null,"x",f),v.setAttributeNS(null,"y",h),v.setAttributeNS(null,"class","mapFlag"),v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/flags/"+y),m.appendChild(v),pe.tiles[s]!==L&&pe.tiles[s].capital){var v;(v=a.createElementNS("http://www.w3.org/2000/svg","path")).id="mapCapital"+s,v.setAttributeNS(null,"class","mapStar"),v.setAttributeNS(null,"d","m "+(f+20)+","+h+" 5.79905,17.10796 18.05696,0.50749 -14.47863,10.80187 5.09725,17.33001 -14.74733,-10.43203 -14.90668,10.20304 5.36427,-17.24922 -14.31008,-11.02418 18.06264,-0.22858 z")}var w=a.getElementById("targetCrosshair");o.to(w,10,{force3D:!0,transformOrigin:"50% 50%",rotation:360,repeat:-1,ease:Linear.easeNone})}pe.initMap();for(s=0;s<i;s++)le.initMapBars(s);ae.drawDiplomacyPanel(),V(t),b(function(){fe=Draggable.create(de.worldWrap,{minimumMovement:4,type:"x,y",bounds:"#gameWrap"}),z(),o.set(de.targetLine,{stroke:ue.color[pe.player[ce.player].playerColor]}),o.set(de.targetLine,{stroke:"hsl(+=0%, +=0%, -=5%)"}),o.set(de.arrowheadTip,{fill:ue.color[pe.player[ce.player].playerColor]}),o.set(de.arrowheadTip,{fill:"hsl(+=0%, +=0%, -=5%)"}),e("#gameWrap").on("click",".land",function(e){!function(e){if(e.id.slice(4),ce.attackOn){var t=ce.targetData;"attack"===t.attackName||"splitAttack"===t.attackName?ke.attack(e):"cannons"===t.attackName?ke.fireCannons(e):"missile"===t.attackName?ke.launchMissile(e):"nuke"===t.attackName&&ke.launchNuke(e)}else ae.showTarget(e)}(this)}).on("mouseenter",".land",function(){ce.lastTarget=this,ce.attackOn&&ae.showTarget(this,!0),o.set(this,{fill:"hsl(+=0%, +=0%, -=5%)"})}).on("mouseleave",".land",function(){var e=1*this.id.slice(4);if(pe.tiles.length>0){var t=pe.tiles[e]!==L?pe.tiles[e].player:0,a=t?pe.player[t].playerColor:0;o.set(this,{fill:ue.color[a]})}}),ce.focusTile(ce.capital),pe.startGameState(),ae.setCurrentYear(t.resourceTick),le.paths(),ke.setMenu(),I(ce.lastTgt),pe.setVisibilityAll(),a.getElementById("resources-ui").style.width=ie[ce.lang].resourceUiWidth},350)}}).fail(function(e){b(function(){X()},1500)}).always(function(){ue.unlock()})})}function Q(){ue.mouse.zoom+=10,ue.mouse.zoom>150&&(ue.mouse.zoom=150),o.to(de.worldWrap,.3,{transformOrigin:ue.mouse.transX+"% "+ue.mouse.transY+"%",force3D:!1,smoothOrigin:!0,scale:ue.mouse.zoom/100,onUpdate:function(){fe[0].applyBounds()},onComplete:function(){fe[0].applyBounds()}})}function Z(){ue.mouse.zoom-=10,ue.mouse.zoom<100&&(ue.mouse.zoom=100),o.to(de.worldWrap,.3,{force3D:!1,smoothOrigin:!0,transformOrigin:ue.mouse.transX+"% "+ue.mouse.transY+"%",scale:ue.mouse.zoom/100,onUpdate:function(){fe[0].applyBounds()},onComplete:function(){fe[0].applyBounds()}}),fe[0].applyBounds()}function $(e,t){var a=~~(e/ue.map.sizeX*100),n=~~(t/ue.map.sizeY*100);ue.mouse.transX=a,ue.mouse.transY=n}function ee(e){e===L&&(e={}),this.cost=e.cost!==L?e.cost:2,this.minimum=e.minimum!==L?e.minimum:2,this.attackName=e.attackName?e.attackName:"attack",this.splitAttack=!!e.splitAttack&&e.splitAttack,this.hudMsg=e.hudMsg?e.hudMsg:ie[ce.lang].hudAttack}function te(t){if(ue.chatOn=!ue.chatOn,ue.chatOn)ge.chatInputOpen.css("visibility","hidden"),ge.chatInputWrap.css("visibility","visible"),ge.chatInput.focus();else{var a=ge.chatInput.val().trim();if(t&&a)if("/friend"===a)ye.listFriends();else if(0===a.indexOf("/friend "))ye.toggleFriend(a.slice(8));else if(0===a.indexOf("/unignore ")){n=a.slice(10);ye.removeIgnore(n)}else if("/ignore"===a)ye.listIgnore();else if(0===a.indexOf("/ignore ")){var n=a.slice(8);ye.addIgnore(n)}else 0===a.indexOf("@")?ye.sendWhisper(a,"@"):0===a.indexOf("/who ")?ye.who(a):"/"===a.charAt(0)&&0!==a.indexOf("/me")||e.ajax({url:app.url+"php/insertChat.php",data:{message:a}});ge.chatInput.val("").blur(),ge.chatInputOpen.css("visibility","visible"),ge.chatInputWrap.css("visibility","hidden")}}var ae={defenseBonus:[1,2,3],defenseReductionAmount:[1,3,6],cannonDamage:function(){var e="Monarchy"===ce.government?2:0;return 2+ce.oBonus+e+"-"+(4+ce.oBonus+e)+ie[ce.lang].damage},cannonTooltip:function(){return ie[ce.lang].fireCannons+ae.cannonDamage()},missileDamage:function(){return 7+2*ce.oBonus+"-"+(12+2*ce.oBonus)+ie[ce.lang].damage},missileTooltip:function(){return ie[ce.lang].launchMissile+ae.missileDamage()},rushTooltip:function(e){return ie[ce.lang].rush+"("+ae.cultureBonus()+")"},defenseTooltip:function(e){return ie[ce.lang].boostsTileDefenses+ae.defenseBonus[e]+ie[ce.lang].reducesWeaponsBy+ae.defenseReductionAmount[e]},cultureBonus:function(){return 2+~~(ce.cultureBonus/50)},getTeamIcon:function(e){return ue.teamMode?'<span class="diploTeam">'+e+"</span>":""},getDiploRow:function(e){var t=e.cpu?ie[ce.lang].difficulties[e.difficulty]:e.account,a=be.governmentIcon(e),n=pe.player[e.player].playerColor;return'<div id="diplomacyPlayer'+n+'" class="diplomacyPlayers alive pb'+n+'"><div class="diplo-pipe pbar'+n+'"></div><img src="images/flags/'+e.flagSrc+'" class="diplo-flag no-select"><div class="diplo-data-col"<div><div class="nowrap">'+a+t+'</div><div class="nowrap">'+ae.getTeamIcon(e.team)+e.nation+"</div></div></div></div>"},getPlayersByTileRank:function(){var e=[0,0,0,0,0,0,0,0,0];return pe.tiles.forEach(function(t){t.player&&e[t.player]++}),e},drawDiplomacyPanel:function(){for(var e,t=[],n=0,o=pe.player.length,r=ae.getPlayersByTileRank();n<o;n++)if((e=pe.player[n]).account&&r[n]){for(e.flagArr=e.flag.split("."),e.flagShort=e.flagArr[0],e.flagSrc=e.flag;t[r[n]]!==L;)r[n]++;t[r[n]]=ae.getDiploRow(e)}a.getElementById("diplomacy-body").innerHTML=t.reverse().join("")},resizeWindow:function(){"game"===ue.view&&fe[0].applyBounds(),ue.screen.resizeMap()},windowDefault:"window-full-screen",initWindow:function(){var e=localStorage.getItem("window-size");null===e&&(localStorage.setItem("window-size",ae.windowDefault),e=ae.windowDefault),ae.setWindow(e)},setWindow:function(t){if(app.isApp){var a=require("nw.gui").Window.get();b(function(){"window-full-screen"===t?!a.isFullscreen&&a.enterFullscreen():"window-1920-1080"===t?(a.isFullscreen&&a.leaveFullscreen(),a.resizeTo(1920,1080),a.maximize()):"window-1600-900"===t?(a.isFullscreen&&a.leaveFullscreen(),a.resizeTo(1600,900)):"window-1360-768"===t?(a.isFullscreen&&a.leaveFullscreen(),a.resizeTo(1360,768)):"window-1280-720"===t?(a.isFullscreen&&a.leaveFullscreen(),a.resizeTo(1280,720)):(t="window-full-screen",!a.isFullscreen&&a.enterFullScreen()),e("#current-window-size").text(ie[ce.lang][ue.camel(t)]),localStorage.setItem("window-size",t)},100)}},click:"click",showTarget:function(e,a,n){if(e.id===L&&(e.id="land0"),"object"==typeof e){var r=1*e.id.slice(4),i=(pe.tiles[r],ce.tgt);if(a||i!==r&&(ce.tgt=r,le.selectTile(i,r)),a&&r!==ce.tgt){ce.targetLine[4]=1*de["unit"+r].getAttribute("x")-10,ce.targetLine[5]=1*de["unit"+r].getAttribute("y")-10;var s="M "+ce.targetLine[0]+","+ce.targetLine[1]+" "+ce.targetLine[4]+","+ce.targetLine[5],c=0;c+=t.abs(ce.targetLine[0]-ce.targetLine[4]),c+=t.abs(ce.targetLine[1]-ce.targetLine[5]),ce.targetLine[2]=(ce.targetLine[0]+ce.targetLine[4])/2,ce.targetLine[3]=(ce.targetLine[1]+ce.targetLine[5])/2-100;var d="M "+ce.targetLine[0]+","+ce.targetLine[1]+" Q "+ce.targetLine[2]+" "+ce.targetLine[3]+" "+ce.targetLine[4]+" "+ce.targetLine[5];o.set(de.targetLineShadow,{visibility:"visible",attr:{d:s}}),o.set([de.targetLine,de.targetLineBorder],{visibility:"visible",attr:{d:c>300?d:s}}),o.set([de.arrowhead,de.arrowheadBorder],{visibility:"hidden"}),o.set(de.targetLineBorder,{stroke:ue.color[pe.player[ce.player].playerColor]}),o.to([de.targetLine,de.targetLineBorder,de.targetLineShadow],.2,{startAt:{drawSVG:"0%"},drawSVG:"100%",onComplete:function(){o.set([de.arrowhead,de.arrowheadBorder],{visibility:"visible"}),o.to([de.targetLine,de.targetLineShadow],.5,{startAt:{strokeDasharray:"31,1",strokeDashoffset:0},strokeDashoffset:-32,repeat:-1,force3D:!0,ease:Linear.easeNone}),o.to(de.targetLineBorder,.5,{stroke:"#000"})}}),o.set(de.targetCrosshair,{fill:"#00dd00",visibility:"visible",x:ce.targetLine[4]-255,y:ce.targetLine[5]-257,transformOrigin:"50% 50%"}),o.to(de.targetCrosshair,1,{startAt:{scale:.35},force3D:!0,scale:.175,repeat:-1,ease:u.easeOut}),o.to(de.targetCrosshair,1,{startAt:{opacity:1},force3D:!0,opacity:0,repeat:-1,ease:l.easeIn})}n||(ce.lastTgt=i),I(r)}else ce.attackOn=!1,ce.attackName=""},transformYear:function(e){return(e<=40?4e3-100*e:e<=60?0+50*(e-40):e<=80?1e3+25*(e-60):e<=120?1500+10*(e-80):e<=170?1900+2*(e-120):2e3+1*(e-170))+(e>=40?" A.D.":" B.C.")},setCurrentYear:function(e){de.currentYear.textContent=ae.transformYear(e)},setTileUnits:function(e){var t=pe.tiles[e].capital?'<tspan class="unit-star">\t&#10028;</tspan>'+~~pe.tiles[e].units:~~pe.tiles[e].units;de["unit"+e].innerHTML=0===pe.tiles[e].units?"":t,o.to(de["unit"+e],.5,{startAt:{visibility:"visible"},opacity:1,ease:u.easeIn})},updateAdjacentTileVisibility:function(e){},setUnitVisibility:function(e){o.set(de["unit"+e],{startAt:{fill:"#ffffff",visibility:pe.tiles[e].units?"visible":"hidden"},opacity:1})}},ne=(/Xbox/i.test(navigator.userAgent),navigator.userAgent.toLowerCase().indexOf("playstation"),/Nintendo/i.test(navigator.userAgent),!!A.opera||navigator.userAgent.indexOf(" OPR/")>=0),oe="undefined"!=typeof InstallTrigger,re=F.prototype.toString.call(A.HTMLElement).indexOf("Constructor")>0;A.chrome;!!navigator.userAgent.match(/Trident\/7\./)?(x,e("head").append("<style> text { font-family: Verdana; stroke-width: 0; stroke: #000; fill: #fff; } .unit{ font-size: 26px; } </style>")):re&&(x,e("head").append("<style> text { fill: #ffffff; stroke: none; stroke-width: 0px; } </style>")),b(function(){e("script").remove()},1e3),ae.initWindow();var ie={updateIndexHtml:function(){["play-now-btn","create","createTeamBtn","joinPrivateGameBtn","createRankedBtn","joinRankedGame","toggleNation","leaderboardBtn","gameTableName","gameTableMap","gameTableType","friend-status","add-friend","ignore-status","ignore-user","who-account","whisper-account","change-channel","get-help","brokenNet","optionsHeader","musicVolume","soundVolume","bibleMode","windowSize","current-window-size","window-full-screen","window-1920-1080","window-1600-900","window-1360-768","window-1280-720","exit-game","versionSpan","leaderboardRankedBtn","leaderboardFfaBtn","leaderboardTeamBtn","setNationName","submitNationName","setNationFlag","lobbyRankedMatch","lobbyGameNameLabel","lobbyGamePasswordLabel","lobbyGameModeLabel","lobbyGameMapLabel","lobbyMaxPlayersLabel","startGame","cancelGame","confirmSurrenderPrompt","canceSurrenderButtonCancel","canceSurrenderButtonConfirm","hotkey-ui","createGame","createGameHead","createRankedGameHead","createGameNameLabel","createGamePasswordLabel","createGameMaxPlayerLabel","createGameMapLabel","privateGameNameLabel","privateGamePasswordLabel","joinPrivateGameBtnConfirm","cancelGame","cancelGame","cancelGame","cancelGame","cancelGame","cancelGame","cancelGame","joinPrivateGameBtn","abAttack","abSplitAttack","abDeploy","abRush","abBuild","abCannons","abMissile","abNuke","abResearch","abMasonry","abConstruction","abEngineering","abGunpowder","abRocketry","abAtomic","abFuture","reserveLabel","troopsLabel","hud"].forEach(function(e){a.getElementById(e).innerHTML=ie[ce.lang][_.camelCase(e)]}),["hide-ui","toggle-flags","hotkeys","gameOptions","surrender","exitSpectate","energy-timer-base","currentYear","energyWrap","foodWrap","scienceWrap","cultureWrap","generalWrap","tacticianWrap","troop-flex","foodBonusTitle","foodMilestoneTitle","scienceBonusTitle","scienceMilestoneTitle","cultureBonusTitle","cultureMilestoneTitle","attack","splitAttack","deploy","rush","upgradeTileDefense","launchNuke","researchMasonry","researchConstruction","researchEngineering","researchGunpowder","researchRocketry","researchAtomicTheory","researchFutureTech","options"].forEach(function(e){a.getElementById(e).title=ie[ce.lang][_.camelCase(e)]})},english:{playerColor:"Player Color",team:"Team",damage:" damage",hudAttack:"Attack: Select Target",hudSplitAttack:"Split Attack: Select Target",hudFireCannons:"Fire Cannons",hudLaunchMissile:"Launch Missile",hudLaunchNuke:"Launch Nuclear Weapon",resourceUiWidth:"22rem",selectTarget:"Select Target",reserveLabel:"Reserve",troopsLabel:"Troops",youHaveJoined:"You have joined the game: ",startingGame:"Starting game in ",to:"To ",whispers:" whispers: ",joinedChannel:"You have joined channel: ",selectTeam:"Select Team",selectPlayerColor:"Select Player Color",difficulties:{"Very Easy":"Very Easy",Easy:"Easy",Normal:"Normal",Hard:"Hard","Very Hard":"Very Hard",Mania:"Mania",Juggernaut:"Juggernaut"},governments:{Despotism:"Despotism",Monarchy:"Monarchy",Democracy:"Democracy",Fundamentalism:"Fundamentalism",Fascism:"Fascism",Republic:"Republic",Communism:"Communism",Random:"Random"},random:"Random",abAttack:"Attack",abSplitAttack:"Split Attack",abDeploy:"Deploy Troops",abRush:"Rush Troops",abBuild:"Build",abCannons:"Fire Cannons",abMissile:"Launch Missile",abNuke:"Launch Nuke",abResearch:"Research",abMasonry:"Masonry",abConstruction:"Construction",abEngineering:"Engineering",abGunpowder:"Gunpowder",abRocketry:"Rocketry",abAtomic:"Atomic Theory",abFuture:"Future Tech",hostLeft:"The host has left the lobby.",needTwoPlayers:"You need two players to start a game! Wait for players to join or add a computer player to begin.",failedToLoad:"Failed to load game data.",flagChanged:"Your nation's flag is now: ",rankedSearch:"Searching for ranked games...",noRankedFound:"No ranked games found!<br>Try creating a ranked game instead.",notScience:"Not enough science!",needTwoUnits:"You need at least 2 troops to move or attack!",maxUnits:"That territory has the maximum number of units!",friendlyFire:"Friendly fire! That's your teammate!",notEnoughEnergy:"Not enough energy!",notYourTile:"You do not own that tile.",noTroopsAvailable:"No troops available for deployment!",badGameName:"Game name must be at least 4-32 characters.",notEnoughPlayers:"Game must have 2-8 players.",newNationName:"Your new nation name is: ",verifyingSteam:"Verifying Steam Credentials...",steamNotFound:"Unable to detect Steam. Please launch Steam and try again!",logoutSuccess:"Logout successful",logoutFailed:"Logout failed",ribbonTitle:["","National Combat Medal","Tactical Nuke Recognition Award","Good Conduct Award","Patriot's Service Ribbon","Civic Service Ribbon","Bronze Meritorious Medal","Bronze Service Medal","Bronze Expeditionary Medal","Bronze Cross","Silver Cross","Golden Cross","Platinum Cross","Revolutionary Cause Award","Strategic Warfare Award","Combat Service Award","Combat Gallantry Award","Stalwart Conqueror's Medal","Dictator's Sword","King's Regalia","Archon's Scales","Divine Covenant","Emperor's Fasces","Eagle's Branch","Comrade's Sickle","Golden Expeditionary Medal","Golden Meritorious Medal","Golden Service Medal","Champion's Medal","Conqueror's Medal","Commander's Medal","Intrepid Heroism Award","Global War Expeditionary Medal","Silver Expeditionary Medal","Silver Meritorious Medal","Silver Service Medal","Engineer's Service Ribbon"],ribbonDescription:["","Established your nation","Destroyed a fortress with a nuclear weapon","Added two comrades to your friend list","Updated your national flag","Updated your nation's name","Won 10 ranked games","Won 10 team games","Won 10 free for all games","Achieved 1800+ rating","Achieved 2100+ rating","Achieved 2400+ rating","Achieved 2700+ rating","Great Revolutionary conquered a tile with 100+ units","Win a game with a 2-to-1 kill ratio","Won 10 games in a row","Won 25 games in a row","Conquered a tile with a fortress","Won a game under Despotism","Won a game as a Monarchy","Won a game as a Democracy","Won a game under Fundamentalism","Won a game under Fascism","Won a game as a Republic","Won a game under Communism","Won 500 free for all games","Won 500 ranked games","Won 500 team games","Hit top #10 on the ranked leaderboard","Hit top #100 on the ranked leaderboard","Hit top #1000 on the ranked leaderboard","Defeated the Juggernaut","Win an 8-player free for all game","Won 100 free for all games","Won 100 ranked games","Won 100 team games","Build a fortress"],gameNameNotValid:"Game name is not valid!",congratulations:"Congratulations!",gameVictory:"Your campaign for global domination has succeeded!",victory:"Victory",armistice:"Armistice!",gameArmistice:"The campaign has been suspended!",ceaseFire:"Cease Fire",defeat:"Defeat!",gameDefeat:"Your campaign for world domination has failed!",concede:"Concede Defeat",spectate:"Spectate",defeatIn:"Defeat in ",statOverview:"Overview",statUnits:"Units",statStructures:"Structures",statWeapons:"Weapons",statResources:"Resources",tabUnits:"Units",tabStructures:"Structures",tabWeapons:"Weapons",tabResources:"Resources",tabTotalScore:"Total Score",tabEarned:"Earned",tabDeployed:"Deployed",tabKilled:"Killed",tabLost:"Lost",tabBunkers:"Bunkers",tabWalls:"Walls",tabFortresses:"Fortresses",tabCannons:"Cannons",tabMissiles:"Missiles",tabNukes:"Nukes",tabEnergy:"Energy",tabScience:"Science",tabFood:"Food",tabCulture:"Culture",gameDuration:"Game Duration ",endGame:"End Game",joinPrivateGameBtnConfirm:"Join Game",createGameHead:"Free For All Game",createRankedGameHead:"Ranked Game",createGameNameLabel:"Game Name",createGamePasswordLabel:"Password (optional)",createGameMaxPlayerLabel:"Maximum Players:",createGameMapLabel:"Map",createGame:"Create Game",createTeamGameHeadLabel:"Team Game",noRankedGamesFound:"No ranked games found!<br>Try creating a ranked game instead.",privateGameNameLabel:"Game Name",privateGamePasswordLabel:"Password",confirmSurrenderPrompt:"Surrender? Are You Sure?",canceSurrenderButtonCancel:"Cancel",canceSurrenderButtonConfirm:"Surrender",hotkeyUi:"[V] Toggle the User Interface",options:"[ESC] Options",researchMasonry:"[Y] Research masonry to unlock bunkers\r\n(20 seconds)",researchConstruction:"[O] Research construction to unlock walls\r\n(30 seconds)",researchEngineering:"[E] Research engineering to unlock fortresses\r\n(45 seconds)",researchGunpowder:"[G] Research gunpowder to unlock cannons\r\n(25 seconds)",researchRocketry:"[K] Research rocketry to unlock missiles\r\n(40 seconds)",researchAtomicTheory:"[T] Research atomic theory to unlock nuclear weapons\r\n(60 seconds)",researchFutureTech:"[F] Research future technology\r\n(90 seconds)",attack:"[A] Attack with all troops",splitAttack:"[S] Attack with half of your troops",deploy:"[D] Deploy reserve troops to a tile",rush:"[R] Rush troops from your citizenry. Boosted by culture bonus ",defenseLabel:["Bunker","Wall","Fortress"],boostsTileDefenses:"[B] Boosts tile defenses +",reducesWeaponsBy:" and reduces weapon damage by ",fireCannons:"[C] Fire cannons at an adjacent tile. Boosted by Great Generals.\r\n",launchMissile:"[M] Launch a missile at any territory. Boosted by Great Generals.\r\n",launchNuke:"[N] Launch a nuclear weapon at any territory. Kills 80-99% of troops and destroys all structures.",foodBonusTitle:"Food Bonus",foodMilestoneTitle:"Food milestones produce reserve troops.",scienceBonusTitle:"Science Bonus",scienceMilestoneTitle:"Science is used to build structures, fire weapons, and research technology.",cultureBonusTitle:"Culture Bonus",cultureMilestoneTitle:"Culture milestones produce special rewards.",troopFlex:"Deploy troops to conquered territories",currentYear:"It's the current year!",energyWrap:"Energy is used to attack, move, deploy, and rush troops.",foodWrap:"Food milestones produce reserve troops",scienceWrap:"Science is used to build structures, weapons, and research technology.",cultureWrap:"Culture milestones produce special rewards",generalWrap:"Great Generals boost troop attack",tacticianWrap:"Great Tacticians boost troop defense",energyTimerBase:"Resources update at the end of each turn.",hideUi:"[V] Hide User Interface",toggleFlags:"Toggle Flags",hotkeys:"Hotkeys",gameOptions:"[ESC] Options",surrender:"Surrender",exitSpectate:"Exit Spectate",uninhabited:"Uninhabited",barbarianTribe:"Barbarian Tribe",Despotism:["Free movement through own tiles","Start with gunpowder","Start with a bunker","2x maximum army attack size"],Monarchy:["+2 defense","+1 culture from 2 food","50% starting culture bonus","+2 cannon damage"],Democracy:["4x maximum troop deployment","+3 reserve troops when you lose a tile","50% starting science bonus","Reduced culture milestone requirement"],Fundamentalism:["Overrun: Instant win with 4x advantage","Infiltration: -1 structure defense","Fast growth: Reduced food milestone requirement","+2 troop reward bonus"],Fascism:["+1 attack","+1 attack from tiles for each defensive structure","+4 attack vs barbarians","Bonus troop with each deployment"],Republic:["+1 energy","Combat medics heal 50% troops upon victory","Start with masonry","+50% plunder reward bonus from barbarians"],Communism:["Start with a great person","+1 science from 4 food","Can deploy troops to uninhabited territory","2x discovered reward bonus from barbarians"],removeCPU:"Remove CPU",addCPU:"Add CPU",lobbyRankedMatch:"Ranked Match",lobbyGameNameLabel:"Game Name",lobbyGamePasswordLabel:"Password",lobbyGameModeLabel:"Game Mode",lobbyGameMapLabel:"Map",lobbyMaxPlayersLabel:"Max Players",startGame:"Start Game",cancelGame:"Exit",setNationName:"Nation Name",submitNationName:"Update Nation Name",setNationFlag:"National Flag",leaderboardRankedBtn:"Ranked",leaderboardFfaBtn:"Free For All",leaderboardTeamBtn:"Team",playNowBtn:"Play Now",create:"Free For All",createTeamBtn:"Team Game",joinPrivateGameBtn:"Join Private Game",createRankedBtn:"Create Ranked Match",joinRankedGame:"Join Ranked Match",toggleNation:"Configure Nation",leaderboardBtn:"Leaderboard",gameTableName:"Game Name",gameTableMap:"Map",gameTableType:"Type",friendStatus:"Show Friend List",addFriend:"Toggle Friend",ignoreStatus:"Show Ignore List",ignoreUser:"Ignore Account",whoAccount:"Query Account",whisperAccount:"Private Message",changeChannel:"Change Channel",getHelp:"Chat Commands",brokenNet:"Welcome to Broken.net!",optionsHeader:"Options",musicVolume:"Music Volume",soundVolume:"Sound Effect Volume",bibleMode:"Bible Mode",windowSize:"Window Size",currentWindowSize:"Full Screen",windowFullScreen:"Full Screen",window19201080:"1920 x 1080",window1600900:"1600 x 900",window1360768:"1360 x 768",window1280720:"1280 x 720",exitGame:"Exit Game",versionSpan:"Version "},russian:{playerColor:"Цвет игрока",team:"команда",damage:" наносить ущерб",hudAttack:"Атака: выберите цель",hudSplitAttack:"Сплит-атака: выберите цель",hudFireCannons:"Пожарные пушки",hudLaunchMissile:"Запустить ракету",hudLaunchNuke:"Запуск ядерной бомбы",resourceUiWidth:"28rem",selectTarget:"Выберите цель",reserveLabel:"резерв",troopsLabel:"войска",youHaveJoined:"Вы присоединились к игре: ",startingGame:"Начало игры в ",to:"к ",whispers:" шепоты: ",joinedChannel:"Вы присоединились к каналу: ",selectTeam:"Выбрать команду",selectPlayerColor:"Выберите цвет игрока",difficulties:{"Very Easy":"Очень просто",Easy:"Легко",Normal:"Нормальный",Hard:"Жесткий","Very Hard":"Очень сложно",Mania:"Мания",Juggernaut:"Джаггернаут"},governments:{Despotism:"Деспотизм",Monarchy:"монархия",Democracy:"демократия",Fundamentalism:"Фундаментализм",Fascism:"Фашизм",Republic:"республика",Communism:"Коммунизм",Random:"случайный"},random:"случайный",abAttack:"Атака",abSplitAttack:"Сплит-атака",abDeploy:"Развертывание войск",abRush:"Стремительные войска",abBuild:"строить",abCannons:"Пожарные пушки",abMissile:"Запустить ракету",abNuke:"Запуск ядерной бомбы",abResearch:"Исследование",abMasonry:"Каменная кладка",abConstruction:"строительство",abEngineering:"инженерия",abGunpowder:"Порох",abRocketry:"ракетная техника",abAtomic:"Атомная теория",abFuture:"Будущая техника",hostLeft:"Хозяин покинул лобби.",needTwoPlayers:"Вам нужно два игрока, чтобы начать игру! Подождите, пока игроки присоединятся или добавят компьютерный проигрыватель.",failedToLoad:"Не удалось загрузить данные игры.",flagChanged:"Флаг вашей страны теперь: ",rankedSearch:"Поиск ранжированных игр ...",noRankedFound:"Ничего не найдено!<br>Вместо этого попробуйте создать ранжированную игру.",notScience:"Недостаточно науки!",needTwoUnits:"Вам нужно как минимум 2 войска, чтобы двигаться или атаковать!",maxUnits:"Эта территория имеет максимальное количество единиц!",friendlyFire:"Дружественный огонь! Это ваш товарищ по команде!",notEnoughEnergy:"Недостаточно энергии!",notYourTile:"У вас нет этой плитки.",noTroopsAvailable:"Нет войск для развертывания!",badGameName:"Название игры должно быть не менее 4-32 символов.",notEnoughPlayers:"В игре должно быть 2-8 игроков.",newNationName:"Ваше имя новой нации: ",verifyingSteam:"Проверка парольных учетных данных ...",steamNotFound:"Не удалось обнаружить Steam. Запустите Steam и повторите попытку!",logoutSuccess:"Выход завершен",logoutFailed:"Ошибка выхода из системы",ribbonTitle:["","Национальная боевая медаль","Тактическая награда за признание Nuke","Награда за хорошее поведение","патриот Сервисная лента","гражданского Сервисная лента","Бронзовая медаль","Медаль Бронзовая служба","Бронзовая экспедиционная медаль","Бронзовый крест","Серебряный крест","Золотой Крест","Платиновый крест","Революционная причина","Стратегическая война","Награда за боевые заслуги","Боевая награда","Почетная медаль завоевателя","Меч диктатора","Королевские регалии","Весы архонта","Божественный завет","Императорский топор","орел Филиал","Топорский серп","Золотая экспедиционная медаль","Золотая мерильная медаль","Золотая медаль обслуживания","Чемпионская медаль","Медаль Завоевателя","Медаль командира","Премия за непревзойденную героизм","Мировая военная экспедиционная медаль","Серебряная экспедиционная медаль","Серебряная медаль","Серебряная медаль","Техническая лента инженера"],ribbonDescription:["","Учреждена ваша нация","Разрушена крепость с ядерным оружием","Добавлено два товарища в список друзей","Обновлен ваш национальный флаг","Обновлено название вашей страны","Выиграл 10 ранжированных игр","Выиграно 10 командных игр","Выиграл 10 игр бесплатно для всех","Достигнуто 1800+ оценок","Достигнуто 2100+ оценок","Достигнуто 2400+ оценок","Достигнуто 2700+ оценок","Великий революционер завоевал плитку с более 100 единицами","Выиграйте игру с коэффициентом убийства 2 к 1","Выиграл 10 игр подряд","Выиграл 25 игр подряд","Завоевали плитку с крепостью","Выиграл игру под деспотизмом","Выиграл игру как монархию","Выиграл игру как демократия","Выиграл игру под фундаментализмом","Выиграл игру под фашизмом","Выиграл игру как республика","Выиграл игру под коммунизмом","Выиграл 500 бесплатно для всех игр","Выиграли 500 ранжированных игр","Выиграно 500 командных матчей","Хит top # 10 в рейтинге лидеров","Хит top # 100 в рейтинге лидеров","Хит top # 1000 в рейтинге лидеров","Победил Джаггернаут","Выиграйте 8-плеер бесплатно для всех","Выиграно 100 бесплатных игр для всех","Выиграли 100 ранжированных игр","Выиграно 100 командных матчей","Построить крепость"],gameNameNotValid:"Имя игры недействительно!",congratulations:"Поздравления!",gameVictory:"Ваша кампания за глобальное господство преуспела!",victory:"победа",armistice:"прекращение военных действий!",gameArmistice:"Кампания приостановлена!",ceaseFire:"Прекратить огонь",defeat:"Поражение!",gameDefeat:"Ваша кампания за мировое господство потерпела неудачу!",concede:"уступать поражение",spectate:"быть зрителем",defeatIn:"Поражение ",statOverview:"обзор",statUnits:"Единицы",statStructures:"сооружения",statWeapons:"оружие",statResources:"Ресурсы",tabUnits:"Единицы",tabStructures:"сооружения",tabWeapons:"оружие",tabResources:"Ресурсы",tabTotalScore:"Общий счет",tabEarned:"заработанный",tabDeployed:"развернутый",tabKilled:"убитый",tabLost:"Потерял",tabBunkers:"Бункеры",tabWalls:"стены",tabFortresses:"Крепости",tabCannons:"Пушки",tabMissiles:"Ракеты",tabNukes:"Ядерное оружие",tabEnergy:"энергии",tabScience:"Наука",tabFood:"питание",tabCulture:"культура",gameDuration:"Продолжительность игры ",endGame:"Конец игры",joinPrivateGameBtnConfirm:"Присоединиться к игре",createGameHead:"Бесплатные игры для всех",createRankedGameHead:"Рейтинг игры",createGameNameLabel:"Название игры",createGamePasswordLabel:"Пароль (необязательно)",createGameMaxPlayerLabel:"Максимальное количество игроков:",createGameMapLabel:"карта",createGame:"Создать игру",createTeamGameHeadLabel:"Командная игра",noRankedGamesFound:"Найденные игры не найдены!<br>Попробуйте создать ранжированную игру вместо.",privateGameNameLabel:"Название игры",privateGamePasswordLabel:"пароль",confirmSurrenderPrompt:"Сдаться? Ты уверен?",canceSurrenderButtonCancel:"Отмена",canceSurrenderButtonConfirm:"капитуляция",hotkeyUi:"Нажмите V, чтобы переключить пользовательский интерфейс.",options:"[ESC] Опции",researchMasonry:"[Y] Исследовательская кладка для разблокировки бункеров\r\n(20 секунд)",researchConstruction:"[O] Исследование строительства для разблокировки стен\r\n(30 секунд)",researchEngineering:"[E] Исследовательская разработка для разблокировки крепостей\r\n(45 секунд)",researchGunpowder:"[G] Исследовать порох, чтобы разблокировать пушки\r\n(25 секунд)",researchRocketry:"[K] Научно-исследовательская ракета для разблокировки ракет\r\n(40 секунд)",researchAtomicTheory:"[T] Исследование атомной теории для разблокировки ядерного оружия\r\n(60 секунд)",researchFutureTech:"[F] Исследование будущих технологий\r\n(90 секунд)",attack:"[A] Атака со всеми войсками",splitAttack:"[S] Атака с половиной ваших войск",deploy:"[D] Разверните резервные войска на плитку",rush:"[R] Выпустите войска из своих граждан. Повышенный бонус за культуру ",defenseLabel:["бункерный","стена","Крепость"],boostsTileDefenses:"[B] Увеличивает защиту от плитки +",reducesWeaponsBy:" и уменьшает урон от оружия ",fireCannons:"[C] Огненные пушки на соседней плитке. Подпитывается Великими Генералами.\r\n",launchMissile:"[M] Запустить ракету на любой территории. Подпитывается Великими Генералами.\r\n",launchNuke:"[N] Запустить ядерную руку на любой территории. Убивает 80-99% солдат и уничтожает все структуры.",foodBonusTitle:"Продовольственный бонус",foodMilestoneTitle:"Продовольственные вехи производят резервные войска.",scienceBonusTitle:"Научный бонус",scienceMilestoneTitle:"Наука используется для создания структур, огнестрельного оружия и исследовательских технологий.",cultureBonusTitle:"Культурный бонус",cultureMilestoneTitle:"Культурные вехи дают особые награды.",troopFlex:"Разверните войска на завоеванные территории",currentYear:"Это в текущем году!",energyWrap:"Энергия используется, чтобы атаковать, перемещать, развертывать и бросать войска.",foodWrap:"Продовольственные вехи производят резервные войска",scienceWrap:"Наука используется для создания структур, оружия и исследовательских технологий.",cultureWrap:"Культурные вехи дают особые награды",generalWrap:"Великие генералы повышают атаку войск",tacticianWrap:"Великие тактики повышают оборону войск",energyTimerBase:"Обновление ресурсов в конце каждого хода.",hideUi:"[V] Hide User Interface",toggleFlags:"Переключить флаги",hotkeys:"Клавиатурный",gameOptions:"[ESC] Опции",surrender:"капитуляция",exitSpectate:"Выход из зрительного зала",uninhabited:"необитаемый",barbarianTribe:"Племя варваров",Despotism:["Свободное передвижение через собственные плитки","Начать с пороха","Начните с бункера","2x максимальный размер атаки армии"],Monarchy:["+2 защита","+1 культура из 2 блюд","50% старт бонуса культуры","+2 повреждение пушки"],Democracy:["4x максимальное развертывание войск","+3 резервные войска, когда вы теряете плитку","50% бонус к науке","Требование о минимальном значении культуры"],Fundamentalism:["перерасход: Мгновенная победа с 4-мя преимуществами","инфильтрация: -1 защита структуры","Быстрый рост: Требование о сокращении потребности в продовольствии","+2 вознаграждение за награду"],Fascism:["+1 атака","+1 атака из плиток для каждой защитной структуры","+4 атака против варваров","Бонусный отряд с каждым развертыванием"],Republic:["+1 энергия","Боевые медики излечивают 50% солдат после победы","Начать с кладки","+50% грабительский бонус от варваров"],Communism:["Начните с отличного человека","+1 наука из 4 блюд","Можно развернуть войска на необитаемой территории","2x открыл бонус от варваров"],removeCPU:"удалить компьютер",addCPU:"добавить компьютер",lobbyRankedMatch:"Рейтинг",lobbyGameNameLabel:"Название игры",lobbyGamePasswordLabel:"пароль",lobbyGameModeLabel:"Игровой режим",lobbyGameMapLabel:"карта",lobbyMaxPlayersLabel:"Максимум игроков",startGame:"Начать игру",cancelGame:"Выход",setNationName:"Название страны",submitNationName:"Обновить имя страны",setNationFlag:"Национальный флаг",leaderboardRankedBtn:"Занимает",leaderboardFfaBtn:"Бесплатно для всех",leaderboardTeamBtn:"команда",playNowBtn:"Играть сейчас",create:"Бесплатно для всех",createTeamBtn:"Командная игра",joinPrivateGameBtn:"Присоединиться к частной игре",createRankedBtn:"Создать ранжированный матч",joinRankedGame:"Присоединиться к рейтингу",toggleNation:"Настройка нации",leaderboardBtn:"Лидеры",gameTableName:"Название игры",gameTableMap:"карта",gameTableType:"Тип",friendStatus:"Показать список друзей",addFriend:"Переключить друга",ignoreStatus:"Показать список игнорируемых",ignoreUser:"Игнорировать аккаунт",whoAccount:"Учетная запись",whisperAccount:"Личное сообщение",changeChannel:"Изменить канал",getHelp:"Чат-команды",brokenNet:"Добро пожаловать в Broken.net!",optionsHeader:"Опции",musicVolume:"Объем музыки",soundVolume:"Объем звукового эффекта",bibleMode:"Режим Библии",windowSize:"Размер окна",currentWindowSize:"Полноэкранный",windowFullScreen:"Полноэкранный",window19201080:"1920 x 1080",window1600900:"1600 x 900",window1360768:"1360 x 768",window1280720:"1280 x 720",exitGame:"Выход из игры",versionSpan:"Версия "},schinese:{playerColor:"球员颜色",team:"球队",damage:" 损伤",hudAttack:"攻击: 选择目标",hudSplitAttack:"分开进攻: 选择目标",hudFireCannons:"炮火覆盖",hudLaunchMissile:"发射导弹",hudLaunchNuke:"发射核炸弹",resourceUiWidth:"22rem",selectTarget:"选择目标",reserveLabel:"保留",troopsLabel:"部队",youHaveJoined:"你已经加入游戏: ",startingGame:"游戏即将开始于 ",to:"转到 ",whispers:" 讯息: ",joinedChannel:"你已经加入频道: ",selectTeam:"选择队伍",selectPlayerColor:"选择玩家颜色",difficulties:{"Very Easy":"非常简单",Easy:"简单",Normal:"正常l",Hard:"困难","Very Hard":"非常困难",Mania:"狂暴",Juggernaut:"巨兽"},governments:{Despotism:"专制",Monarchy:"君主制",Democracy:"民主制",Fundamentalism:"教旨主义",Fascism:"法西斯",Republic:"共和国",Communism:"共产主义",Random:"随机"},random:"随机",abAttack:"攻击",abSplitAttack:"分开进攻",abDeploy:"部署部队",abRush:"紧急征召",abBuild:"建造",abCannons:"炮火覆盖",abMissile:"发射导弹",abNuke:"发射核炸弹",abResearch:"研究",abMasonry:"土木工程",abConstruction:"建造",abEngineering:"工程设施",abGunpowder:"火药",abRocketry:"火箭发射技术",abAtomic:"原子理论",abFuture:"先进科技",hostLeft:"主机已经离开游戏",needTwoPlayers:"你需要两名玩家来开始游戏! 等待另一名玩家以启动游戏.",failedToLoad:"读取游戏存档失败",flagChanged:"你现在的势力旗帜是: ",rankedSearch:"搜寻排位赛...",noRankedFound:"未能找到合适的排位赛!<br>你可以试着自己建立一个房间",notScience:"研究点数不足!",needTwoUnits:"你需要至少两支部队才能移动或者攻击（每个地区必须有一支部队作为守备队）!",maxUnits:"该地区驻扎军队数量已经达到上限!",friendlyFire:"友军火力误伤! 那是你的队友!",notEnoughEnergy:"能量点不足!",notYourTile:"你尚未控制那个地块",noTroopsAvailable:"没有可部署的部队!",badGameName:"游戏名称必须位 4-32 个字符",notEnoughPlayers:"游戏必须拥有 2-8 名玩家",newNationName:"你的新势力名字是 ",verifyingSteam:"校检 Steam 链接...",steamNotFound:"无法连接到STEAM，请重新启动STEAM!",logoutSuccess:"成功注销",logoutFailed:"注销失败",ribbonTitle:["","势力战役勋章","战术核弹勋章","动员组织勋章","爱国者绶带","公民服役绶带","青铜荣誉勋章","青铜服役勋章","青铜远征勋章","青铜十字勋章","银十字勋章","金十字勋章","白金十字勋章","革命勋章","战争策略家勋章","战斗服役勋章","作战勇敢勋章","伟大征服者勋章","独裁者之剑","国王之冠","执政官之秤","神圣协议","帝皇法西斯","老鹰后裔","同志，镰刀！","黄金远征勋章","黄金荣誉勋章l","黄金荣誉勋章","冠军勋章","征服者勋章","指挥官勋章","无畏英雄奖励","全球远征勋章l","白银远征勋章","白银荣誉勋章l","白银服役勋章","工程师参站绶带"],ribbonDescription:["","创建你自己的势力","用核武器摧毁一处要塞","在好友列表中添加两位共产主义同志","选择势力旗帜","选择势力名称","赢得10场排位赛","应当10场小组赛","赢得是10场FFA比赛","段位达到1800+ ","段位达到2100+ ","段位达到2400+ ","段位达到2700+ ","用100+的部队占领一个地块","以 2比1的伤亡比例获得胜利","赢得10场胜利","赢得25场胜利","夺取敌方一处由要塞控制的地块","专制制度下获得一场胜利","作为君主赢得一场胜利","民主制度下获得一场胜利","教旨主义下获得一场胜利","法西斯主义下获得一场胜利","作为共和国赢得一场胜利","共产主义制度下获得一场胜利","赢得500场FFA游戏","赢得500场排位赛","赢得500场小组赛","成为排位赛前十名","成为排位赛前一百名","成为排位赛前一千名","打败巨兽","赢得一场有八名玩家的FFA比赛","赢得100场FFA比赛","赢得100场排位赛","赢得100场小组赛","建造要塞"],gameNameNotValid:"游戏名称不适合!",congratulations:"恭喜!",gameVictory:"你已经是世界的统治者!",victory:"胜利",armistice:"停战!",gameArmistice:"战争会暂停一段时间!",ceaseFire:"停火",defeat:"失败!",gameDefeat:"你统治世界的野心破灭了!",concede:"承认失败",spectate:"观战",defeatIn:"失败于 ",statOverview:"概况",statUnits:"部队",statStructures:"建筑",statWeapons:"武器",statResources:"资源",tabUnits:"部队",tabStructures:"建筑",tabWeapons:"武器",tabResources:"资源",tabTotalScore:"总分",tabEarned:"获得",tabDeployed:"部署",tabKilled:"歼敌",tabLost:"损失",tabBunkers:"碉堡",tabWalls:"围墙",tabFortresses:"要塞",tabCannons:"火炮",tabMissiles:"导弹",tabNukes:"核弹",tabEnergy:"能量点",tabScience:"研究点",tabFood:"食物点",tabCulture:"文化点",gameDuration:"游戏时间 ",endGame:"结束游戏",joinPrivateGameBtnConfirm:"加入游戏",createGameHead:"允许所有类型的游戏",createRankedGameHead:"排位赛",createGameNameLabel:"房间名字",createGamePasswordLabel:"密码(可选)",createGameMaxPlayerLabel:"最大玩家数目:",createGameMapLabel:"地图",createGame:"创建游戏",createTeamGameHeadLabel:"小组赛",noRankedGamesFound:"未找到排位赛!<br>T试着自己创建一个房间",privateGameNameLabel:"房间名字",privateGamePasswordLabel:"密码",confirmSurrenderPrompt:"投降? 确定吗?",canceSurrenderButtonCancel:"取消",canceSurrenderButtonConfirm:"投降",hotkeyUi:"[V] 切换用户界面",options:"[ESC] 选项",researchMasonry:"[Y] 研究土木工程来解锁碉堡\r\n(20 秒)",researchConstruction:"[O] 研究建造来解锁围墙\r\n(30 秒)",researchEngineering:"[E] 研究工程设施来解锁要塞\r\n(45 秒)",researchGunpowder:"[G] 研究火药来解锁获要塞\r\n(25 秒)",researchRocketry:"[K] 研究火箭技术来解锁导弹\r\n(40 秒)",researchAtomicTheory:"[T] 研究原子学理论来解锁核武器\r\n(60 秒)",researchFutureTech:"[F] 研究先进科技\r\n(90 秒)",attack:"[A] 用所选全部部队进攻",splitAttack:"[S] 用所选一半部队进攻",deploy:"[D]部署部队到地块上",rush:"[R] 从你的民众中动员部队，文化点对此有影响 ",defenseLabel:["碉堡","围墙","要塞"],boostsTileDefenses:"[B] 增加地块防御",reducesWeaponsBy:" 并且减少敌军武器杀伤 ",fireCannons:"[C]  向某地块进行炮火覆盖， 名将会对此有加成。\r\n",launchMissile:"[M] 向某地块发射导弹， 名将会对此有加成。\r\n",launchNuke:"[N] 向某地块发射核弹，这会击杀 80-99% 的敌军部队并且摧毁所有建筑 。",foodBonusTitle:"食物点加成",foodMilestoneTitle:"部队需要食物.",scienceBonusTitle:"研究点加成",scienceMilestoneTitle:"研究点用于建造建筑，生产火器和研究科技。",cultureBonusTitle:"文化点加成",cultureMilestoneTitle:"文化点会提供特别奖励",troopFlex:"部署部队以略地千里",currentYear:"正是此时!",energyWrap:"能量点用于攻击，移动，部署和紧急征召部队。",foodWrap:"部队需要食物",scienceWrap:"研究点用于建造建筑，生产火器和研究科技。",cultureWrap:"文化点会提供特别奖励",generalWrap:"名将会增加部队攻击力",tacticianWrap:"大战略家增加部队防御力",energyTimerBase:"每回合结束后点数会增加",hideUi:"[V] 隐藏用户界面",toggleFlags:"变换旗帜",hotkeys:"热键",gameOptions:"[ESC] 选项",surrender:"投降",exitSpectate:"退出观战",uninhabited:"无人区",barbarianTribe:"蛮族部落",Despotism:["己方领土自由移动","火药科技开局","开局拥有一碉堡","攻击力量翻倍"],Monarchy:["+2 防御","2 食物点加一文化点","文化点获取只有50% ","+2 火炮杀伤"],Democracy:["4倍陆军部署上限","每失去要给地块获得三支部队","研究点获取只有50% ","减少文化点消耗"],Fundamentalism:["立即胜利: I取得所有方面 4倍优势后立刻胜利","容易被渗透: -1建筑防御","快速增长: 减少食物消耗","+2 部队奖励奖金"],Fascism:["+1 攻击","发起攻击的地块每个防御建筑会提供额外的1点攻击力加成","同蛮族作战时+4攻击","部署部队会有奖励"],Republic:["+1 能量点","胜利后会治愈百分之五十的部队","开局拥有土木工程科技","同蛮族作战时+50%  掠夺奖励"],Communism:["开局时拥有一个伟大领袖","每4食物点加1研究点","能在无人区部署部队","同蛮族作战2x 发现奖励"],removeCPU:"移除 电脑",addCPU:"增加 电脑",lobbyRankedMatch:"排位赛",lobbyGameNameLabel:"游戏名称",lobbyGamePasswordLabel:"密码",lobbyGameModeLabel:"游戏模式",lobbyGameMapLabel:"地图",lobbyMaxPlayersLabel:"最大玩家数目",startGame:"开始游戏",cancelGame:"退出",setNationName:"势力名称",submitNationName:"选择势力名称",setNationFlag:"势力旗帜",leaderboardRankedBtn:"段位",leaderboardFfaBtn:"开放",leaderboardTeamBtn:"仅队伍",playNowBtn:"现在游玩（单机）",create:"开放",createTeamBtn:"小组赛",joinPrivateGameBtn:"加入私人游戏",createRankedBtn:"建立排位赛房间",joinRankedGame:"加入排位赛",toggleNation:"势力配置",leaderboardBtn:"记分板",gameTableName:"房间名字",gameTableMap:"地图",gameTableType:"类型",friendStatus:"显示好友列表",addFriend:"下一个好友",ignoreStatus:"展示已忽略列表",ignoreUser:"忽略账户",whoAccount:"举报账号",whisperAccount:"私信",changeChannel:"更换频道",getHelp:"聊天指令",brokenNet:"欢迎来到 Broken.net!",optionsHeader:"选项",musicVolume:"音乐音量",soundVolume:"效果音量",bibleMode:"圣经模式",windowSize:"窗口化",currentWindowSize:"全屏",windowFullScreen:" 全屏",window19201080:"1920 x 1080",window1600900:"1600 x 900",window1360768:"1360 x 768",window1280720:"1280 x 720",exitGame:"退出游戏",versionSpan:"版 "},german:{playerColor:"Spielerfarbe",team:"Mannschaft",damage:" Beschädigung",hudAttack:"Attacke: Ziel auswählen",hudSplitAttack:"Split-Angriff: Ziel auswählen",hudFireCannons:"Feuerkanonen",hudLaunchMissile:"Raketen starten",hudLaunchNuke:"Startet die Atombombe",resourceUiWidth:"26rem",selectTarget:"Ziel auswählen",reserveLabel:"Reservieren",troopsLabel:"Truppen",youHaveJoined:"Du bist dem Spiel beigetreten: ",startingGame:"Spielstart in ",to:"Zu ",whispers:" flüstert: ",joinedChannel:"Du bist dem Kanal beigetreten: ",selectTeam:"Team auswählen",selectPlayerColor:"Wählen Sie Spielerfarbe",difficulties:{"Very Easy":"Sehr leicht",Easy:"Einfach",Normal:"Normal",Hard:"Hart","Very Hard":"Sehr schwer",Mania:"Manie",Juggernaut:"Juggernaut"},governments:{Despotism:"Despotismus",Monarchy:"Monarchie",Democracy:"Demokratie",Fundamentalism:"Fundamentalismus",Fascism:"Faschismus",Republic:"Republik",Communism:"Kommunismus",Random:"Zufällig"},random:"Zufällig",abAttack:"Attacke",abSplitAttack:"Split-Angriff",abDeploy:"Bereitstellen von Truppen",abRush:"Rush-Truppen",abBuild:"Bauen",abCannons:"Feuerkanonen",abMissile:"Raketen starten",abNuke:"Startet die Atombombe",abResearch:"Forschung",abMasonry:"Mauerwerk",abConstruction:"Konstruktion",abEngineering:"Ingenieurwesen",abGunpowder:"Schießpulver",abRocketry:"Raketentechnik",abAtomic:"Atomtheorie",abFuture:"Zukunft Tech",hostLeft:"Der Gastgeber hat die Lobby verlassen.",needTwoPlayers:"Du brauchst zwei Spieler, um ein Spiel zu beginnen! Warten Sie, bis die Spieler dem Computer beitreten oder einen Computer hinzufügen.",failedToLoad:"Laden der Spieldaten fehlgeschlagen.",flagChanged:"Die Fahne deiner Nation ist jetzt: ",rankedSearch:"Suche nach Ranglisten-Spielen...",noRankedFound:"Keine Ranglistenspiele gefunden!<br>Versuchen Sie stattdessen, ein Ranglisten-Spiel zu erstellen.",notScience:"Nicht genug Wissenschaft!",needTwoUnits:"Du brauchst mindestens 2 Truppen, um dich zu bewegen oder anzugreifen!",maxUnits:"Dieses Gebiet hat die maximale Anzahl von Einheiten!",friendlyFire:"Teambeschuss! Das ist dein Teamkollege!",notEnoughEnergy:"Nicht genug Energie!",notYourTile:"Du besitzt diese Kachel nicht.",noTroopsAvailable:"Keine Truppen für den Einsatz verfügbar!",badGameName:"Der Spielname muss mindestens 4-32 Zeichen lang sein.",notEnoughPlayers:"Das Spiel muss 2-8 Spieler haben.",newNationName:"Ihr neuer Nationenname ist: ",verifyingSteam:"Steam-Anmeldedaten überprüfen...",steamNotFound:"Steam kann nicht gefunden werden. Bitte starte Steam und versuche es erneut!",logoutSuccess:"Abmeldung erfolgreich",logoutFailed:"Abmeldung fehlgeschlagen",ribbonTitle:["","Nationale Kampfmedaille","Tactical Nuke Anerkennungspreis","Preis für gutes Benehmen","Service-Band des Patrioten","Bürgerservice-Band","Bronze Verdienstmedaille","Bronze-Service-Medaille","Bronze-Expeditionsmedaille","Bronze Kreuz","Silberkreuz","Goldenes Kreuz","Platin-Kreuz","Preis für revolutionäre Zwecke","Strategischer Kriegsführungspreis","Kampfdienst-Auszeichnung","Galanterie Auszeichnung","Gewaltige Eroberer-Medaille","Schwert des Diktators","Königs Regalia","Archons Skalen","Göttlicher Bund","Kaisers Fasces","Adler Zweig","Genosse Sichel","Goldene Expeditionsmedaille","Goldene verdienstvolle Medaille","Goldene Service-Medaille","Meistermedaille","Eroberer-Medaille","Kommandeursmedaille","Unerschrockener Heldentumspreis","Expeditionsmedaille des Weltkrieges","Silberne Expeditionsmedaille","Silberne verdienstvolle Medaille","Silberne Service-Medaille","Techniker-Serviceband"],ribbonDescription:["","Begründete deine Nation","Zerstöre eine Festung mit einer Atomwaffe","Habe zwei Kameraden zu deiner Freundesliste hinzugefügt","Ihre Nationalflagge aktualisiert","Aktualisierte den Namen deiner Nation","Gewann 10 Ranglistenspiele","Gewann 10 Mannschaftsspiele","Gewann 10 gratis für alle Spiele","Erreicht 1800+ Bewertung","Erreicht 2100+ Bewertung","Erreicht 2400 + Rating","Erreichte 2700+ Bewertung","Große Revolutionäre eroberten eine Kachel mit 100+ Einheiten","Gewinne ein Spiel mit einem 2-zu-1-Tötungsverhältnis","Gewann 10 Spiele in Folge","Gewann 25 Spiele in Folge","Eroberte eine Fliese mit einer Festung","Gewann ein Spiel unter Despotismus","Gewann ein Spiel als Monarchie","Gewann ein Spiel als Demokratie","Gewann ein Spiel unter Fundamentalismus","Gewann ein Spiel unter Faschismus","Gewann ein Spiel als eine Republik","Gewann ein Spiel unter dem Kommunismus","Gewann 500 gratis für alle Spiele","Gewann 500 Ranglistenspiele","Gewann 500 Mannschaftsspiele","Treffe die Top 10 auf der Rangliste","Treffe die Top 100 auf der Rangliste","Treffe die Top # 1000 auf der Rangliste","Besiege den Juggernaut","Gewinne ein 8-Spieler-FFA-Spiel","Gewann 100 gratis für alle Spiele","Gewann 100 Ranglistenspiele","Gewann 100 Mannschaftsspiele","Baue eine Festung"],gameNameNotValid:"Der Spielername ist nicht gültig!",congratulations:"Herzliche Glückwünsche!",gameVictory:"Ihre Kampagne für die globale Vorherrschaft ist gelungen!",victory:"Sieg",armistice:"Waffenstillstand!",gameArmistice:"Die Kampagne wurde ausgesetzt!",ceaseFire:"Feuer einstellen",defeat:"Niederlage!",gameDefeat:"Ihre Kampagne für die Weltherrschaft ist gescheitert!",concede:"Concede Niederlage",spectate:"Zuschauen",defeatIn:"Niederlage in ",statOverview:"Überblick",statUnits:"Einheiten",statStructures:"Strukturen",statWeapons:"Waffen",statResources:"Ressourcen",tabUnits:"Einheiten",tabStructures:"Strukturen",tabWeapons:"Waffen",tabResources:"Ressourcen",tabTotalScore:"Gesamtpunktzahl",tabEarned:"Verdient",tabDeployed:"Bereitgestellt",tabKilled:"Getötet",tabLost:"Hat verloren",tabBunkers:"Bunkers",tabWalls:"Wände",tabFortresses:"Festungen",tabCannons:"Kanonen",tabMissiles:"Raketen",tabNukes:"Kernwaffen",tabEnergy:"Energie",tabScience:"Wissenschaft",tabFood:"Essen",tabCulture:"Kultur",gameDuration:"Spieldauer ",endGame:"Spiel beenden",joinPrivateGameBtnConfirm:"Spiel beitreten",createGameHead:"Kostenlos für alle Spiele",createRankedGameHead:"Ranglistenspiel",createGameNameLabel:"Spielname",createGamePasswordLabel:"Passwort (optional)",createGameMaxPlayerLabel:"Maximale Spielerzahl:",createGameMapLabel:"Karte",createGame:"Spiel erstellen",createTeamGameHeadLabel:"Teamspiel",noRankedGamesFound:"Keine Ranglistenspiele gefunden!<br>Versuchen Sie stattdessen, ein Ranglisten-Spiel zu erstellen.",privateGameNameLabel:"Spielname",privateGamePasswordLabel:"Passwort",confirmSurrenderPrompt:"Kapitulation? Bist du sicher?",canceSurrenderButtonCancel:"Stornieren",canceSurrenderButtonConfirm:"Kapitulation",hotkeyUi:"[V] Wechseln Sie die Benutzeroberfläche",options:"[ESC] Optionen",researchMasonry:"[Y] Erforsche Mauerwerk, um Bunker freizuschalten\r\n(20 Sekunden)",researchConstruction:"[O] Erforschen Sie die Konstruktion, um Wände zu öffnen\r\n(30 Sekunden)",researchEngineering:"[E] Forschungstechnik zum Freischalten von Festungen\r\n(45 Sekunden)",researchGunpowder:"[G] Erforsche Schießpulver, um Kanonen freizuschalten\r\n(25 Sekunden)",researchRocketry:"[K] Research Raketentechnik Raketen zu entsperren\r\n(40 Sekunden)",researchAtomicTheory:"[T] Forschung Atomtheorie, um Atomwaffen freizuschalten\r\n(60 Sekunden)",researchFutureTech:"[F] Forschung Zukunftstechnologie\r\n(90 Sekunden)",attack:"[A] Angriff mit allen Truppen",splitAttack:"[S] Greife mit der Hälfte deiner Truppen an",deploy:"[D] Setze Reservetruppen auf eine Kachel um",rush:"[R] Rush Truppen aus Ihrer Bürgerschaft. Angetrieben durch Kulturbonus ",defenseLabel:["Bunker","Mauer","Festung"],boostsTileDefenses:"[B] Verstärkt die Verteidigung der Fliese +",reducesWeaponsBy:" und reduziert Waffenschaden um ",fireCannons:"[C] Feuerkanonen auf einer angrenzenden Fliese. Von großen Generälen beflügelt.\r\n",launchMissile:"[M] Starte eine Rakete auf ein beliebiges Territorium. Von großen Generälen beflügelt.\r\n",launchNuke:"[N] Startet eine Atomwaffe in jedem Gebiet. Tötet 80-99% der Truppen und zerstört alle Strukturen.",foodBonusTitle:"Essensbonus",foodMilestoneTitle:"Nahrungsmittelmeilensteine produzieren Reservetruppen.",scienceBonusTitle:"Wissenschaftsbonus",scienceMilestoneTitle:"Wissenschaft wird verwendet, um Strukturen zu bauen, Feuerwaffen und Forschungstechnologie.",cultureBonusTitle:"Kulturbonus",cultureMilestoneTitle:"Kulturmeilensteine erzeugen besondere Belohnungen.",troopFlex:"Setze Truppen in eroberte Gebiete ein",currentYear:"Es ist das laufende Jahr!",energyWrap:"Energie wird verwendet, um Truppen anzugreifen, zu bewegen, einzusetzen und zu stürzen.",foodWrap:"Nahrungsmittelmeilensteine produzieren Reservetruppen",scienceWrap:"Wissenschaft wird verwendet, um Strukturen, Waffen und Forschungstechnologie zu bauen.",cultureWrap:"Kulturmeilensteine erzeugen besondere Belohnungen",generalWrap:"Große Generäle verstärken Truppenangriffe",tacticianWrap:"Große Taktiker verstärken die Truppenabwehr",energyTimerBase:"Ressourcen werden am Ende jeder Runde aktualisiert.",hideUi:"[V] Benutzerschnittstelle ausblenden",toggleFlags:"Flaggen umschalten",hotkeys:"Hotkeys",gameOptions:"[ESC] Optionen",surrender:"Kapitulation",exitSpectate:"Spectate verlassen",uninhabited:"Unbewohnt",barbarianTribe:"Barbarischer Stamm",Despotism:["Freizügigkeit durch eigene Fliesen","Beginne mit Schießpulver","Fang mit einem Bunker an","2x maximale Angriffsstärke der Armee"],Monarchy:["+2 Verteidigung","+1 Kultur aus 2 Lebensmitteln","50% Start Kulturbonus","+2 Kanonenschaden"],Democracy:["4x maximale Truppentrage","+3 Reserviere Truppen, wenn du ein Plättchen verlierst","50% Start Wissenschaft Bonus","Reduzierte Meilensteinanforderung für die Kultur"],Fundamentalism:["Overrun: Sofortiger Gewinn mit 4x Vorteil","Infiltration: -1 Strukturverteidigung","Schnelles Wachstum: Reduzierte Essen Meilenstein-Anforderung","+2 Truppenbelohnungsbonus"],Fascism:["+1 Attacke","+1 Angriff von Kacheln für jede Verteidigungsstruktur","+4 Angriff gegen Barbaren","Bonustruppe bei jeder Bereitstellung"],Republic:["+1 Energie","Kampfmediziner heilen 50% der Truppen nach dem Sieg","Beginnen Sie mit Mauerwerk","+50% plündern Belohnungsbonus von Barbaren"],Communism:["Beginne mit einer großartigen Person","+1 Wissenschaft von 4 Essen","Kann Truppen auf unbewohntes Gebiet bringen","2x entdeckte Belohnungsbonus von Barbaren"],removeCPU:"Entfernen Sie den Computer",addCPU:"Computer hinzufügen",lobbyRankedMatch:"Ranglisten-Spiel",lobbyGameNameLabel:"Spielname",lobbyGamePasswordLabel:"Passwort",lobbyGameModeLabel:"Spielmodus",lobbyGameMapLabel:"Karte",lobbyMaxPlayersLabel:"Maximale Spieleranzahl",startGame:"Spiel beginnen",cancelGame:"Ausgang",setNationName:"Nationenname",submitNationName:"Nationenname aktualisieren",setNationFlag:"Nationalflagge",leaderboardRankedBtn:"Rangliste",leaderboardFfaBtn:"Frei für alle",leaderboardTeamBtn:"Mannschaft",playNowBtn:"Jetzt spielen",create:"Frei für alle",createTeamBtn:"Teamspiel",joinPrivateGameBtn:"Privates Spiel beitreten",createRankedBtn:"Erstelle Ranglisten-Spiel",joinRankedGame:"Melde dich im Ranglisten-Spiel an",toggleNation:"Konfigurieren Sie Nation",leaderboardBtn:"Bestenliste",gameTableName:"Spielname",gameTableMap:"Karte",gameTableType:"Art",friendStatus:"Freundesliste anzeigen",addFriend:"Toggle Freund",ignoreStatus:"Zeige Ignorierliste",ignoreUser:"Konto ignorieren",whoAccount:"Konto abfragen",whisperAccount:"Private Nachricht",changeChannel:"Kanal wechseln",getHelp:"Chatbefehle",brokenNet:"Willkommen zu Broken.net!",optionsHeader:"Optionen",musicVolume:"Musiklautstärke",soundVolume:"Soundeffekt-Lautstärke",bibleMode:"Bibelmodus",windowSize:"Fenstergröße",currentWindowSize:"Vollbild",windowFullScreen:"Vollbild",window19201080:"1920 x 1080",window1600900:"1600 x 900",window1360768:"1360 x 768",window1280720:"1280 x 720",exitGame:"Spiel verlassen",versionSpan:"Ausführung "},portuguese:{playerColor:"Cor do Jogador",team:"Equipe",damage:" danificar",hudAttack:"Ataque: selecione o alvo",hudSplitAttack:"Ataque Dividido: Selecionar Alvo",hudFireCannons:"Canhões de fogo",hudLaunchMissile:"Míssil de lançamento",hudLaunchNuke:"Lançar Bomba Nuclear",resourceUiWidth:"24rem",selectTarget:"Selecione o alvo",reserveLabel:"reserva",troopsLabel:"Tropas",youHaveJoined:"Você entrou no jogo: ",startingGame:"Começando o jogo em ",to:"Para ",whispers:" sussurros: ",joinedChannel:"Você entrou no canal: ",selectTeam:"Selecionar time",selectPlayerColor:"Selecione a cor do player",difficulties:{"Very Easy":"Muito fácil",Easy:"Fácil",Normal:"Normal",Hard:"Difícil","Very Hard":"Muito difícil",Mania:"Mania",Juggernaut:"Juggernaut"},governments:{Despotism:"Despotismo",Monarchy:"Monarquia",Democracy:"Democracia",Fundamentalism:"Fundamentalismo",Fascism:"Fascismo",Republic:"República",Communism:"O comunismo",Random:"Aleatória"},random:"Aleatória",abAttack:"Ataque",abSplitAttack:"Ataque Dividido",abDeploy:"Implantar tropas",abRush:"Tropas de pressa",abBuild:"Construir",abCannons:"Canhões de fogo",abMissile:"Míssil de lançamento",abNuke:"Lançar Bomba Nuclear",abResearch:"Pesquisa",abMasonry:"Alvenaria",abConstruction:"Construção",abEngineering:"Engenharia",abGunpowder:"Pólvora",abRocketry:"Foguetes",abAtomic:"Teoria atômica",abFuture:"Tech futuro",hostLeft:"O anfitrião deixou o saguão.",needTwoPlayers:"Você precisa de dois jogadores para começar um jogo! Aguarde que os jogadores participem ou adicionem um player de computador para começar.",failedToLoad:"Falha ao carregar dados do jogo.",flagChanged:"A bandeira do seu país é agora: ",rankedSearch:"Procurando por jogos classificados...",noRankedFound:"Nenhum jogo classificado encontrado!<br>Tente criar um jogo classificado.",notScience:"Ciência insuficiente!",needTwoUnits:"Você precisa de pelo menos 2 tropas para se mover ou atacar!",maxUnits:"Esse território tem o número máximo de unidades!",friendlyFire:"Fogo amigo! Esse é seu companheiro de equipe!",notEnoughEnergy:"Energia não suficiente!",notYourTile:"Você não possui esse bloco.",noTroopsAvailable:"Nenhuma tropa disponível para implantação!",badGameName:"O nome do jogo deve ter pelo menos 4 a 32 caracteres.",notEnoughPlayers:"O jogo deve ter 2-8 jogadores.",newNationName:"Seu novo nome da nação é: ",verifyingSteam:"Verificando as credenciais do Steam...",steamNotFound:"Não é possível detectar o Steam. Por favor, inicie o Steam e tente novamente!",logoutSuccess:"Logout com sucesso",logoutFailed:"Logout falhou",ribbonTitle:["","Medalha Nacional de Combate","Prêmio de Reconhecimento Nuke Tático","Prêmio de boa conduta","Faixa de serviço do patriota","Faixa de serviço cívico","Medalha Meritória de Bronze","Medalha de Serviço Bronze","Medalha Expedicionária de Bronze","Cruz de bronze","Cruz de prata","Cruz dourada","Cruz de Platina","Prêmio de Causa Revolucionária","Prêmio de Guerra Estratégica","Prêmio de serviço de combate","Prêmio Galanteador de Combate","Medalha do Conquistador Stalwart","Espada do Ditador","Regalia do rei","Escalas de Arconte","Convênio Divino","Fasces do Imperador","Filial da Águia","Foice de Camarada","Medalha Expedicionária Dourada","Medalha Meritória Dourada","Medalha de Serviço de Ouro","Medalha do Campeão","Medalha do Conquistador","Medalha do Comandante","Prêmio de heroísmo intrépido","Medalha Expedicionária Global de Guerra ","Medalha Expedicionária de Prata","Medalha Meritória de Prata","Medalha de Serviço de Prata","Faixa de serviço do engenheiro"],ribbonDescription:["","Estabeleceu sua nação","Destruiu uma fortaleza com uma arma nuclear","Adicionado dois camaradas à sua lista de amigos","Atualizou sua bandeira nacional","Atualizou o nome da sua nação","Ganhou 10 jogos classificados","Ganhou 10 jogos de equipe","Ganhou 10 grátis para todos os jogos","Alcançou a classificação de 1800+","Alcançou 2100+ classificação","Achieved 2400+ rating","Achieved 2700+ rating","Grande Revolucionário conquistou uma telha com mais de 100 unidades","Ganhe um jogo com uma razão de 2 para 1 de mortes","Ganhou 10 jogos seguidos","Ganhou 25 jogos seguidos","Conquistou uma telha com uma fortaleza","Ganhou um jogo sob Despotismo","Ganhou um jogo como Monarquia","Ganhou um jogo como uma democracia","Ganhou um jogo sob o fundamentalismo","Ganhou um jogo sob o fascismo","Ganhou um jogo como uma república","Ganhou um jogo sob o comunismo","Ganhou 500 grátis para todos os jogos","Ganhou 500 jogos classificados","Ganhou 500 jogos de equipe","Atingir o top 10 na classificação geral","Atingir o top # 100 na classificação geral","Atingiu o topo # 1000 no ranking de classificação","Derrotou o Juggernaut","Ganhe um 8 jogadores grátis para todos os jogos","Ganhou 100 livres para todos os jogos","Ganhou 100 jogos classificados","Ganhou 100 jogos de equipe","Construa uma fortaleza"],gameNameNotValid:"O nome do jogo não é válido!",congratulations:"Parabéns!",gameVictory:"Sua campanha pela dominação global foi bem sucedida!",victory:"Vitória",armistice:"Armistício!",gameArmistice:"A campanha foi suspensa!",ceaseFire:"Cessar fogo",defeat:"Derrota!",gameDefeat:"Sua campanha pela dominação do mundo falhou!",concede:"Reconhecer a derrota",spectate:"Olhar",defeatIn:"Derrota em ",statOverview:"Visão geral",statUnits:"Unidades",statStructures:"Estruturas",statWeapons:"Armas",statResources:"Recursos",tabUnits:"Unidades",tabStructures:"Estruturas",tabWeapons:"Armas",tabResources:"Recursos",tabTotalScore:"Pontuação total",tabEarned:"Ganhou",tabDeployed:"Implantado",tabKilled:"Morto",tabLost:"Perdido",tabBunkers:"Bunkers",tabWalls:"Paredes",tabFortresses:"Fortalezas",tabCannons:"Canhões",tabMissiles:"Mísseis",tabNukes:"Armas nucleares",tabEnergy:"Energia",tabScience:"Ciência",tabFood:"Comida",tabCulture:"Cultura",gameDuration:"Duração do Jogo ",endGame:"Jogo final",joinPrivateGameBtnConfirm:"Entrar no jogo",createGameHead:"Grátis para todos os jogos",createRankedGameHead:"Jogo classificado",createGameNameLabel:"Nome do jogo",createGamePasswordLabel:"Senha (opcional)",createGameMaxPlayerLabel:"Máximo de Jogadores:",createGameMapLabel:"Mapa",createGame:"Criar jogo",createTeamGameHeadLabel:"Jogo de equipe",noRankedGamesFound:"Nenhum jogo classificado encontrado!<br>Tente criar um jogo classificado.",privateGameNameLabel:"Nome do jogo",privateGamePasswordLabel:"Senha",confirmSurrenderPrompt:"Entrega?",canceSurrenderButtonCancel:"Cancelar",canceSurrenderButtonConfirm:"Entrega",hotkeyUi:"[V] Alternar a interface do usuário",options:"[ESC] Opções",researchMasonry:"[Y] Pesquisa de alvenaria para destravar bunkers\r\n(20 segundos)",researchConstruction:"[O] Construção de pesquisa para desbloquear paredes\r\n(30 segundos)",researchEngineering:"[E] Engenharia de pesquisa para desbloquear fortalezas\r\n(45 segundos)",researchGunpowder:"[G] Pesquisa de pólvora para desbloquear canhões\r\n(25 segundos)",researchRocketry:"[K] Pesquisa de foguetes para desbloquear mísseis\r\n(40 segundos)",researchAtomicTheory:"[T] Pesquise teoria atômica para desbloquear armas nucleares\r\n(60 segundos)",researchFutureTech:"[F] Tecnologia de pesquisa futura\r\n(90 segundos)",attack:"[A] Ataque com todas as tropas",splitAttack:"[S] Ataque com metade de suas tropas",deploy:"[D] Implantar tropas de reserva em um ladrilho",rush:"[R] Apresse as tropas de seus cidadãos. Impulsionado pelo bônus cultural ",defenseLabel:["Bunker","parede","Fortaleza"],boostsTileDefenses:"[B] Aumenta as defesas do azulejo +",reducesWeaponsBy:" e reduz dano de arma por ",fireCannons:"[C] Canhões de fogo em uma telha adjacente. Impulsionado por grandes generais.\r\n",launchMissile:"[M] Lançar um míssil em qualquer território. Impulsionado por grandes generais.\r\n",launchNuke:"[N] Lance uma arma nuclear em qualquer território. Mata 80-99% das tropas e destrói todas as estruturas.",foodBonusTitle:"Bônus Alimentar",foodMilestoneTitle:"Marcos miliários de alimentos produzem tropas de reserva.",scienceBonusTitle:"Bônus da Ciência",scienceMilestoneTitle:"A ciência é usada para construir estruturas, armas de fogo e tecnologia de pesquisa.",cultureBonusTitle:"Bônus de Cultura",cultureMilestoneTitle:"Marcos de cultura produzem recompensas especiais.",troopFlex:"Implantar tropas em territórios conquistados",currentYear:"É o ano corrente!",energyWrap:"A energia é usada para atacar, mover, implantar e apressar as tropas.",foodWrap:"Marcos miliários de alimentos produzem tropas de reserva",scienceWrap:"A ciência é usada para construir estruturas, armas e tecnologia de pesquisa.",cultureWrap:"Marcos de cultura produzem recompensas especiais",generalWrap:"Grandes generais aumentam ataque de tropas",tacticianWrap:"Grandes táticos reforçam defesa de tropas",energyTimerBase:"Atualização de recursos no final de cada turno.",hideUi:"[V] Ocultar interface do usuário",toggleFlags:"Alternar sinalizadores",hotkeys:"Teclas de atalho",gameOptions:"[ESC] Opções",surrender:"Entrega",exitSpectate:"Sair de Espectador",uninhabited:"Desabitada",barbarianTribe:"Tribo Bárbara",Despotism:["Livre circulação através de telhas próprias","Comece com a pólvora","Comece com um bunker","2x tamanho máximo de ataque do exército"],Monarchy:["+2 defesa","+1 cultura de 2 alimentos","50% começando bônus cultural","+2 dano de canhão"],Democracy:["4x implantação máxima de tropas","+3 tropas de reserva quando você perde um azulejo","50% começando bônus de ciência","Requisito de marco de cultura reduzido"],Fundamentalism:["Superação: vitória instantânea com vantagem de 4x","Infiltração: -1 estrutura de defesa","Crescimento rápido: exigência de marcos alimentares reduzidos","+2 bônus de recompensa de tropas"],Fascism:["+1 ataque","+1 ataque de telhas para cada estrutura defensiva","+4 ataque vs bárbaros","Tropa de bônus com cada implantação"],Republic:["+1 energia","Médicos de combate curam 50% das tropas após a vitória","Comece com alvenaria","+50% saqueie bónus de recompensa dos bárbaros"],Communism:["Comece com uma ótima pessoa","+1 ciência de 4 alimentos","Pode implantar tropas em território desabitado","2x bônus de recompensa descoberto de bárbaros"],removeCPU:"Remover computador",addCPU:"Adicionar computador",lobbyRankedMatch:"Partida ranqueada",lobbyGameNameLabel:"Nome do jogo",lobbyGamePasswordLabel:"Senha",lobbyGameModeLabel:"Modo de jogo",lobbyGameMapLabel:"Mapa",lobbyMaxPlayersLabel:"Máximo de jogadores",startGame:"Começar o jogo",cancelGame:"Saída",setNationName:"Nome da nação",submitNationName:"Atualizar nome da nação",setNationFlag:"Bandeira nacional",leaderboardRankedBtn:"Classificados",leaderboardFfaBtn:"Grátis para todos",leaderboardTeamBtn:"Equipe",playNowBtn:"Jogue agora",create:"Grátis para todos",createTeamBtn:"Jogo de equipe",joinPrivateGameBtn:"Participe do Jogo Privado",createRankedBtn:"Criar um jogo classificado",joinRankedGame:"Junte-se ao jogo classificado",toggleNation:"Configurar nação",leaderboardBtn:"Entre os melhores",gameTableName:"Nome do jogo",gameTableMap:"Mapa",gameTableType:"Tipo",friendStatus:"Mostrar lista de amigos",addFriend:"Alternar Amigo",ignoreStatus:"Mostrar lista de ignorados",ignoreUser:"Ignorar conta",whoAccount:"Conta de Consulta",whisperAccount:"Mensagem privada",changeChannel:"Mude o canal",getHelp:"Comandos de Chat",brokenNet:"Bem-vindo ao Broken.net!",optionsHeader:"Opções",musicVolume:"Volume da música",soundVolume:"Volume do efeito sonoro",bibleMode:"Modo Bíblico",windowSize:"Tamanho da janela",currentWindowSize:"Tela cheia",windowFullScreen:"Tela cheia",window19201080:"1920 x 1080",window1600900:"1600 x 900",window1360768:"1360 x 768",window1280720:"1280 x 720",exitGame:"Sair do jogo",versionSpan:"Versão "},alternateSupportedLanguages:["russian","schinese","german","portuguese"],apiLanguageCode:["arabic","bulgarian","schinese","tchinese","czech","danish","dutch","finnish","french","german","greek","hungarian","italian","japanese","koreana","norwegian","polish","portuguese","brazilian","romanian","russian","spanish","swedish","thai","turkish","ukrainian"]};!function(){if(!e("#titleMenu").length){var t=localStorage.getItem("email"),a=localStorage.getItem("token");t&&(a?e.ajax({type:"POST",url:app.url+"/php/master1.php",data:{run:"authenticate",email:t,token:a}}).done(function(o){"Login successful!"===o&&e.ajax({type:"POST",url:app.url+"/php/master1.php",data:{run:"getToken",email:t}}).done(function(o){a=o,e.ajax({type:"POST",url:app.url+"/php/master1.php",data:{run:"authenticate",email:t,token:a}}).done(function(e){localStorage.setItem("token",a),n.reload()}).fail(function(e){})})}):e.ajax({type:"POST",url:app.url+"/php/master1.php",data:{run:"getToken",email:t}}).done(function(e){a=e}))}}();var se={init:function(e){var t=ce.flag,n='<img id="statWorld" src="images/FlatWorld90.jpg">';n+='<div id="statResult" class="no-select">\t\t\t<img class="statResultFlag" src="images/flags/'+t+'">\t\t\t<span id="statGameResult">'+ie[ce.lang].defeatIn+ae.transformYear(e.resourceTick)+'</span>\t\t\t<img class="statResultFlag" src="images/flags/'+t+'">\t\t</div>\t\t<div id="statTabWrap" class="no-select shadow4">\t\t\t<div id="statOverview" class="statTabs active">\t\t\t\t'+ie[ce.lang].statOverview+'\t\t\t</div><div id="statUnits" class="statTabs">\t\t\t\t'+ie[ce.lang].statUnits+'\t\t\t</div><div id="statStructures" class="statTabs">\t\t\t\t'+ie[ce.lang].statStructures+'\t\t\t</div><div id="statWeapons" class="statTabs">\t\t\t\t'+ie[ce.lang].statWeapons+'\t\t\t</div><div id="statResources" class="statTabs">\t\t\t\t'+ie[ce.lang].statResources+'\t\t\t</div>\t\t</div>\t\t<table id="gameStatsTable" class="table"></table>\t\t<div id="statFooter" class="container-fluid">\t\t\t<div class="row">\t\t\t\t<div id="statQuote" class="col-xs-7 shadow4 stagBlue">\t\t\t\t\t<div id="muh-bible">'+se.data.quote+'</div>\t\t\t\t\t<div id="statVerse" class="text-right">'+se.data.verse+'</div>\t\t\t\t</div>\t\t\t\t<div id="statDuration" class="col-xs-4 stagBlue text-center">\t\t\t\t\t<div id="gameDuration">'+ie[ce.lang].gameDuration+se.gameDuration(ue.gameDuration)+'</div>\t\t\t\t\t<button id="statsEndGame" class="btn btn-md btn-block btn-responsive shadow4 lobbyButtons">'+ie[ce.lang].endGame+'</button>\t\t\t\t</div>\t\t\t</div>\t\t</div>\t\t<div id="ribbonBackdrop"></div>\t\t<div id="ribbonReward" class="fw-primary title-modals">\t\t\t<div class="header text-center">\t\t\t\t<h2 class="header">Achievement Unlocked!</h2>\t\t\t</div>\t\t\t<hr class="fancyhr">\t\t\t<div id="ribbonBody"></div>\t\t</div>',a.getElementById("statWrap").innerHTML=n,se.events(),le.muhBible(),o.to("#statWorld",300,{startAt:{xPercent:-50,yPercent:-50,rotation:-360},rotation:0,repeat:-1,ease:Linear.easeNone}),se.setLeaderValues()},setBibleMode:function(t){var n=a.createElement("style");n.id="bible-state",n.type="text/css",n.innerHTML="#statQuote { visibility: visible!important }",t||(n.innerHTML="#statQuote { visibility: hidden }"),e("#bible-state").remove(),a.head.appendChild(n),localStorage.setItem("bible",t?1:0)},show:function(){de.bgmusic.loop=!0,se.setView("statOverview"),ue.victory?(we.play("bell-8"),we.play("TheAssault",1),a.getElementById("statGameResult").textContent="Victory in "+ae.transformYear(se.data.resourceTick)):(we.play("defeat"),we.play("JourneyOfForgottenSoldiers",1)),a.getElementById("statWrap").style.visibility="visible",o.to("#gameWrap",.5,{startAt:{alpha:0},alpha:1}),se.achievements.length&&(we.play("ding3"),o.to("#ribbonBackdrop",.5,{startAt:{visibility:"visible",alpha:0},alpha:1}),o.to("#ribbonReward",1,{startAt:{visibility:"visible",alpha:0,top:0,y:0},alpha:1,y:30})),e("#worldWrap, #targetWrap, #ui2, #resources-ui, #diplomacy-ui, #chat-ui, #chat-input-open, #chat-input-wrap, #surrenderScreen").remove()},events:function(){e("#statWrap").on(ae.click,".statTabs",function(){e(".statTabs").removeClass("active"),e(this).addClass("active"),we.play("switch13");var t=e(this).attr("id");se.setView(t)}).on(ae.click,"#statsEndGame",function(){n.reload()}).on(ae.click,"#ribbonBackdrop",function(){o.to("#ribbonBackdrop, #ribbonReward",.25,{alpha:0,onComplete:function(){o.set("#ribbonBackdrop, #ribbonReward",{visibility:"hidden"})}})})},maxValue:{unitsTotal:0,structuresTotal:0,weaponsTotal:0,resourcesTotal:0,overviewTotal:0},setLeaderValues:function(){for(var e=1;e<=8;e++){var t=se.data[e];if(t!==L){for(var a in t)1===e?se.maxValue[a]=t[a]:t[a]>se.maxValue[a]&&(se.maxValue[a]=t[a]);var n=se.unitsTotal(e),o=se.structuresTotal(e),r=se.weaponsTotal(e),i=se.resourcesTotal(e),s=se.overviewTotal(e);n>se.maxValue.unitsTotal&&(se.maxValue.unitsTotal=se.unitsTotal(e)),o>se.maxValue.structuresTotal&&(se.maxValue.structuresTotal=o),r>se.maxValue.weaponsTotal&&(se.maxValue.weaponsTotal=r),i>se.maxValue.resourcesTotal&&(se.maxValue.resourcesTotal=i),s>se.maxValue.overviewTotal&&(se.maxValue.overviewTotal=s)}}},currentTabId:"",setView:function(e){if(e!==se.currentTabId){se.currentTabId=e;var t=se[e]();a.getElementById("gameStatsTable").innerHTML=t}},barAnimate:new o.delayedCall(0,""),animate:function(e,t){b(function(){var n={max:100,lastVal:0};se.barAnimate.kill(),se.barAnimate=o.to(n,t,{startAt:{max:0},max:100,onUpdate:function(){~~n.lastVal!=~~n.max&&(n.lastVal=n.max,we.play("rollover5"))},onComplete:function(){we.play("switch11")},ease:y.easeOut});for(var r=1,i=e.length;r<i;r++){var s=e[r];!function(e,a,n,r){o.to(e,t,{startAt:{max:0},max:e.max,onUpdate:function(){a.textContent=~~e.max},ease:r.easeOut}),o.to(n,t,{startAt:{width:0},width:e.max/se.maxValue[e.key]*100+"%",ease:r.easeOut})}(s,a.getElementById(s.id),a.getElementById(s.id+"-bar"),y)}})},statOverview:function(){for(var e=se.playerHead([ie[ce.lang].tabUnits,ie[ce.lang].tabStructures,ie[ce.lang].tabWeapons,ie[ce.lang].tabResources,ie[ce.lang].tabTotalScore]),t=1;t<=8;t++){var a=se.data[t];if(se.data[t]!==L){n=[{},{id:"p"+t+"-units",max:se.unitsTotal(t),key:"unitsTotal"},{id:"p"+t+"-structures",max:se.structuresTotal(t),key:"structuresTotal"},{id:"p"+t+"-weapons",max:se.weaponsTotal(t),key:"weaponsTotal"},{id:"p"+t+"-resources",max:se.resourcesTotal(t),key:"resourcesTotal"},{id:"p"+t+"-total",max:se.overviewTotal(t),key:"overviewTotal"}];se.animate(n,1.5),e+='<tr class="statRow no-pointer">'+se.playerCell(a,t);for(var n,o=pe.player[t].playerColor,r=(n=["units","structures","weapons","resources","total"]).length,i=0;i<r;i++){var s=i+1===r?" statSum":"";e+='<td class="stagBlue statTD">\t\t\t\t\t\t\t<div class="statBar pb'+o+'">\t\t\t\t\t\t\t\t<div id="p'+t+"-"+n[i]+'-bar" class="statBarBg pbar'+o+'">&nbsp</div>\t\t\t\t\t\t\t\t<div id="p'+t+"-"+n[i]+'" class="statVal'+s+'">0</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</td>'}e+='</tr>\t\t\t\t<tr class="statSpacer"></tr>'}}return e},statUnits:function(){for(var e=se.playerHead([ie[ce.lang].tabEarned,ie[ce.lang].tabDeployed,ie[ce.lang].tabKilled,ie[ce.lang].tabLost]),t=1;t<=8;t++){var a=se.data[t];if(a!==L){n=[{},{id:"p"+t+"-earned",max:a.earned,key:"earned"},{id:"p"+t+"-deployed",max:a.deployed,key:"deployed"},{id:"p"+t+"-killed",max:a.killed,key:"killed"},{id:"p"+t+"-lost",max:a.lost,key:"lost"}];se.animate(n,1.5),e+='<tr class="stagBlue statRow no-pointer">'+se.playerCell(a,t);for(var n,o=pe.player[t].playerColor,r=(n=["earned","deployed","killed","lost"]).length,i=0;i<r;i++)e+='<td class="stagBlue statTD">\t\t\t\t\t\t\t<div class="statBar pb'+o+'">\t\t\t\t\t\t\t\t<div id="p'+t+"-"+n[i]+'-bar" class="statBarBg pbar'+o+'">&nbsp</div>\t\t\t\t\t\t\t\t<div id="p'+t+"-"+n[i]+'" class="statVal">0</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</td>';e+='</tr>\t\t\t\t<tr class="statSpacer"></tr>'}}return e},statStructures:function(){for(var e=se.playerHead([ie[ce.lang].tabBunkers,ie[ce.lang].tabWalls,ie[ce.lang].tabFortresses]),t=1;t<=8;t++){var a=se.data[t];if(a!==L){n=[{},{id:"p"+t+"-bunkers",max:a.bunkers,key:"bunkers"},{id:"p"+t+"-walls",max:a.walls,key:"walls"},{id:"p"+t+"-fortresses",max:a.fortresses,key:"fortresses"}];se.animate(n,1),e+='<tr class="stagBlue statRow no-pointer">'+se.playerCell(a,t);for(var n,o=pe.player[t].playerColor,r=(n=["bunkers","walls","fortresses"]).length,i=0;i<r;i++)e+='<td class="stagBlue statTD">\t\t\t\t\t\t\t<div class="statBar pb'+o+'">\t\t\t\t\t\t\t\t<div id="p'+t+"-"+n[i]+'-bar" class="statBarBg pbar'+o+'">&nbsp</div>\t\t\t\t\t\t\t\t<div id="p'+t+"-"+n[i]+'" class="statVal">0</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</td>';e+='</tr>\t\t\t\t<tr class="statSpacer"></tr>'}}return e},statWeapons:function(){for(var e=se.playerHead([ie[ce.lang].tabCannons,ie[ce.lang].tabMissiles,ie[ce.lang].tabNukes]),t=1;t<=8;t++){var a=se.data[t];if(a!==L){n=[{},{id:"p"+t+"-cannons",max:a.cannons,key:"cannons"},{id:"p"+t+"-missiles",max:a.missiles,key:"missiles"},{id:"p"+t+"-nukes",max:a.nukes,key:"nukes"}];se.animate(n,1),e+='<tr class="stagBlue statRow no-pointer">'+se.playerCell(a,t);for(var n,o=pe.player[t].playerColor,r=(n=["cannons","missiles","nukes"]).length,i=0;i<r;i++)e+='<td class="stagBlue statTD">\t\t\t\t\t\t\t<div class="statBar pb'+o+'">\t\t\t\t\t\t\t\t<div id="p'+t+"-"+n[i]+'-bar" class="statBarBg pbar'+o+'">&nbsp</div>\t\t\t\t\t\t\t\t<div id="p'+t+"-"+n[i]+'" class="statVal">0</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</td>';e+='</tr>\t\t\t\t<tr class="statSpacer"></tr>'}}return e},statResources:function(){for(var e=se.playerHead([ie[ce.lang].tabEnergy,ie[ce.lang].tabScience,ie[ce.lang].tabFood,ie[ce.lang].tabCulture]),t=1;t<=8;t++){var a=se.data[t];if(a!==L){var n=[{},{id:"p"+t+"-moves",max:a.moves,key:"moves"},{id:"p"+t+"-production",max:a.production,key:"production"},{id:"p"+t+"-food",max:a.food,key:"food"},{id:"p"+t+"-culture",max:a.culture,key:"culture"}];se.animate(n,1.5),e+='<tr class="stagBlue statRow no-pointer">'+se.playerCell(a,t);var o=pe.player[t].playerColor;e+='<td class="stagBlue statTD">\t\t\t\t\t\t<div class="statBar pb'+o+'">\t\t\t\t\t\t\t<div id="p'+t+'-moves-bar" class="statBarBg pbar'+o+'">&nbsp</div>\t\t\t\t\t\t\t<div id="p'+t+'-moves" class="statVal">0</div>\t\t\t\t\t\t</div>\t\t\t\t\t</td>\t\t\t\t\t<td class="stagBlue statTD">\t\t\t\t\t\t<div class="statBar pb'+o+'">\t\t\t\t\t\t\t<div id="p'+t+'-production-bar" class="statBarBg pbar'+o+'">&nbsp</div>\t\t\t\t\t\t\t<div id="p'+t+'-production" class="statVal">0</div>\t\t\t\t\t\t</div>\t\t\t\t\t</td>\t\t\t\t\t<td class="stagBlue statTD">\t\t\t\t\t\t<div class="statBar pb'+o+'">\t\t\t\t\t\t\t<div id="p'+t+'-food-bar" class="statBarBg pbar'+o+'">&nbsp</div>\t\t\t\t\t\t\t<div id="p'+t+'-food" class="statVal">0</div>\t\t\t\t\t\t</div>\t\t\t\t\t</td>\t\t\t\t\t<td class="stagBlue statTD">\t\t\t\t\t\t<div class="statBar pb'+o+'">\t\t\t\t\t\t\t<div id="p'+t+'-culture-bar" class="statBarBg pbar'+o+'">&nbsp</div>\t\t\t\t\t\t\t<div id="p'+t+'-culture" class="statVal">0</div>\t\t\t\t\t\t</div>\t\t\t\t\t</td>\t\t\t\t</tr>\t\t\t\t<tr class="statSpacer"></tr>'}}return e},playerHead:function(e){for(var t='<tr><th style="width: 420px"></th>',a=0,n=e.length;a<n;a++)t+=4===a?'<th class="text-center statHead chat-warning">'+e[a]+"</th>":'<th class="text-center statHead">'+e[a]+"</th>";return t+='</tr><tr class="statSpacer2"></tr>'},playerCell:function(e,t){var a=pe.player[t],n=(a.playerColor,e.flag),o='<td class="stat-detail-wrap">\t\t\t<div class="statWrapper">\t\t\t\t<img class="statFlagBG" src="images/flags/'+n+'">\t\t\t</div>\t\t\t<img class="statsFlags" src="images/flags/'+n+'">\t\t\t<div class="statsPlayerWrap">\t\t\t\t<div class="statsAccount chat-warning nowrap">'+be.governmentIcon(a);ue.teamMode&&(o+='<span class="diploTeam">'+a.team+"</span>");return o+=(1===e.cpu?a.difficulty:e.account)+'</div>\t\t\t\t<div class="statsNation nowrap">'+e.nation+"</div>\t\t\t</div>\t\t</td>"},data:{},gameDuration:function(e){return se.hours(e)+se.minutes(e)+":"+se.seconds(e)},hours:function(e){var t="";return e>=3600&&(t=~~(e/3600)+":"),t},minutes:function(e){var t="";return e<60?e>=3600&&(t="00:"):(t=~~(e/60%60))<10&&(t="0"+t),t},seconds:function(e){var t=~~(e%60);return t<10?"0"+t:t},get:function(){e.ajax({url:app.url+"php/stats.php"}).done(function(e){se.data=e,se.init(e),se.notifyRibbons(e.ribbons),se.notifySteam(e.ribbons)})},achievements:[],notifyRibbons:function(e){var t="";if(e.forEach(function(e){t+='<div class="ribbonName ranked">'+ie[ce.lang].ribbonTitle[e]+'</div>\t\t\t<div class="ribbonDescription ranked">'+ie[ce.lang].ribbonDescription[e]+'</div>\t\t\t<img class="giantRibbon block" src="images/ribbons/ribbon'+e+'.jpg">'}),a.getElementById("ribbonBody").innerHTML=t,se.achievements=e,se.achievements.length&&(new Audio("sound/ding3.mp3"),app.isApp)){var n=require("./greenworks");n.initAPI()&&n.init()}},notifySteam:function(e){if(app.isApp){var t=require("./greenworks");t.initAPI()&&(t.init(),e.forEach(function(e){t.activateAchievement("medal"+e,function(){})}))}},overviewTotal:function(e){se.data[e];return this.unitsTotal(e)+this.structuresTotal(e)+this.weaponsTotal(e)+this.resourcesTotal(e)},unitsTotal:function(e){var t=se.data[e];return 100*t.deployed+3*t.killed},structuresTotal:function(e){var t=se.data[e];return 80*t.bunkers+140*t.walls+200*t.fortresses},weaponsTotal:function(e){var t=se.data[e];return 40*t.cannons+60*t.missiles+400*t.nukes},resourcesTotal:function(e){var t=se.data[e];return~~(t.food/20+t.culture/60+t.production/20)}},le={colors:["#ffffff","#fff","#eeffee","#ffffee","#99ff99","#eefff3","#ddddff"],randomColor:function(){return le.colors[~~(6*t.random())]},getXY:function(e){var t=de["unit"+e].getBBox();return{x:t.x,y:t.y}},icon:{troops:{audio:"",image:"troops.png",color:"#ff0"},energy:{audio:"",image:"energy.png",color:"#ffa"},food:{audio:"",image:"food.png",color:"#b5ff00"},production:{audio:"",image:"production.png",color:"#7cf"},culture:{audio:"",image:"culture.png",color:"#d2d"},shield:{audio:"build",image:"tile-defense.png",color:"#ff0"}},upgrade:function(e,t,n){le.icon[t].audio&&we.play(le.icon[t].audio);var r=de["unit"+e].getBBox(),i=r.x+r.width/2-10,s=r.y+r.height/2+10,l=a.createElementNS("http://www.w3.org/2000/svg","g"),c=a.createElementNS("http://www.w3.org/2000/svg","text");c.setAttributeNS(null,"x",i-10),c.setAttributeNS(null,"y",s+10),c.style.fontFamily="FontAwesome",c.style.fontSize="20px",c.style.fill=le.icon[t].color,n&&(c.textContent="+"+n);var u=a.createElementNS("http://www.w3.org/2000/svg","image");u.setAttributeNS(null,"width","3rem"),u.setAttributeNS(null,"height","3rem"),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/icons/"+le.icon[t].image),u.setAttributeNS(null,"x",i+10),u.setAttributeNS(null,"y",s-20),l.appendChild(u),l.appendChild(c),de.mapAnimations.appendChild(l),o.to([c,u],.5,{startAt:{xPercent:-50,yPercent:-50,transformOrigin:"50% 50%",alpha:1,scale:.1},scale:1,ease:d.easeOut.config(3)}),o.to([c,u],1.5,{y:"-=30"}),o.to([c,u],.5,{delay:1.5,alpha:0,onComplete:function(){l.parentNode.removeChild(l)}}),this.updateMapBars(e)},paths:function(){},rifle:function(){o.to(de.troopIcon,.05,{startAt:{x:-1,y:-2},x:1,y:2,repeat:3,yoyo:!0,ease:RoughEase.ease.config({template:i.easeNone,strength:2,points:5,taper:"none",randomize:!0,clamp:!1}),onComplete:function(){o.to(this.target,1.5,{y:0,ease:p.easeOut})}})},updateMapBars:function(t){var a=de["unit"+t].getBBox(),n=a.x+a.width/2-10,o=a.y+a.height/2+10;e(".mapBars"+t).remove(),this.initMapBars(t,n,o)},target:function(){var e={brightness:200};o.to(e,.5,{brightness:100,onUpdate:function(){le.brightness(de.targetUiWrap,e.brightness)}})},initMapBars:function(e,t,n){var o=de["unit"+e],t=o.getAttribute("x")-25,n=o.getAttribute("y")-24,r=0;pe.tiles[e].food&&(r+=6),pe.tiles[e].production&&(r+=6),pe.tiles[e].culture&&(r+=6);var i=pe.tiles[e].defense;i&&(r+=6);var s=5*pe.tiles[e].food;if(s>40&&(s=40),t+=5,r){u=a.createElementNS("http://www.w3.org/2000/svg","rect");if(u.setAttributeNS(null,"width",40),u.setAttributeNS(null,"height",r),u.setAttributeNS(null,"x",t),u.setAttributeNS(null,"y",n+26),u.setAttributeNS(null,"fill","#151515"),u.setAttributeNS(null,"stroke","#000000"),u.setAttributeNS(null,"stroke-width",1),u.setAttributeNS(null,"opacity",1),u.setAttributeNS(null,"class","mapBars"+e),de.mapBars.appendChild(u),n+=23,pe.tiles[e].food){n+=6;(u=a.createElementNS("http://www.w3.org/2000/svg","line")).setAttributeNS(null,"x1",t),u.setAttributeNS(null,"y1",n),u.setAttributeNS(null,"x2",t+s),u.setAttributeNS(null,"y2",n),u.setAttributeNS(null,"stroke","#b5ff00"),u.setAttributeNS(null,"stroke-width",5),u.setAttributeNS(null,"opacity",1),u.setAttributeNS(null,"class","mapBars mapBars"+e),de.mapBars.appendChild(u)}if(pe.tiles[e].production){n+=6;var l=10*pe.tiles[e].production;l>40&&(l=40);(u=a.createElementNS("http://www.w3.org/2000/svg","line")).setAttributeNS(null,"x1",t),u.setAttributeNS(null,"y1",n),u.setAttributeNS(null,"x2",t+l),u.setAttributeNS(null,"y2",n),u.setAttributeNS(null,"stroke","#7cf"),u.setAttributeNS(null,"stroke-width",5),u.setAttributeNS(null,"opacity",1),u.setAttributeNS(null,"class","mapBars mapBars2x mapBars"+e),de.mapBars.appendChild(u)}if(pe.tiles[e].culture){n+=6;var c=5*pe.tiles[e].culture;c>40&&(c=40);(u=a.createElementNS("http://www.w3.org/2000/svg","line")).setAttributeNS(null,"x1",t),u.setAttributeNS(null,"y1",n),u.setAttributeNS(null,"x2",t+c),u.setAttributeNS(null,"y2",n),u.setAttributeNS(null,"stroke","#dd22dd"),u.setAttributeNS(null,"stroke-width",5),u.setAttributeNS(null,"opacity",1),u.setAttributeNS(null,"class","mapBars mapBars"+e),de.mapBars.appendChild(u)}if(i){n+=6;var u,d=10*i;(u=a.createElementNS("http://www.w3.org/2000/svg","line")).setAttributeNS(null,"x1",t),u.setAttributeNS(null,"y1",n),u.setAttributeNS(null,"x2",t+d),u.setAttributeNS(null,"y2",n),u.setAttributeNS(null,"stroke","#ffff00"),u.setAttributeNS(null,"stroke-width",5),u.setAttributeNS(null,"opacity",1),u.setAttributeNS(null,"class","mapBars mapBars3x mapBars"+e),de.mapBars.appendChild(u)}}},gunfire:function(e,n,o){var r=de["unit"+e].getBBox(),i=de["unit"+n].getBBox(),s=~~(9*t.random()),l=[.6,.6,.43,.43,.43,.43,.9,.43,.76,.43];o&&(we.play("machine"+s,null,o),pe.tiles[e].player===ce.player&&le.rifle());for(var c=0;c<30;c++)!function(){var e=a.createElementNS("http://www.w3.org/2000/svg","path"),n=i.x+50*t.random(),o=i.y+50*t.random(),u=r.x+~~(16*t.random())-8,d=r.y+~~(16*t.random())-8,p=t.random()>.5?"M "+u+","+d+" "+n+","+o:"M "+n+","+o+" "+u+","+d;e.setAttributeNS(null,"stroke",le.randomColor()),e.setAttributeNS(null,"stroke-width",1),de.world.appendChild(e),TweenLite.to(e,.08,{delay:c/30*l[s],startAt:{attr:{d:p},drawSVG:"0% 25%"},drawSVG:"75% 100%",ease:Linear.easeIn,onComplete:function(){TweenLite.to(e,.033,{drawSVG:"100% 100%",ease:Linear.easeOut,onComplete:function(){this.target.parentNode.removeChild(this.target)}})}}),c%8==0?le.flash({d:.2,scale:2,x:n-100,y:o-100}):c%8==4&&le.flash({d:.15,scale:1.5,x:u-100,y:d-100})}()},flash:function(e){var t=a.createElementNS("http://www.w3.org/2000/svg","image");t.setAttributeNS(null,"width","200px"),t.setAttributeNS(null,"height","200px"),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/flash.png"),t.setAttributeNS(null,"class","no-pointer"),t.setAttributeNS(null,"x",e.x),t.setAttributeNS(null,"y",e.y),de.world.appendChild(t),TweenLite.to(t,e.d,{startAt:{transformOrigin:"50% 50%",scale:e.scale},scale:0,onComplete:function(){this.target.parentNode.removeChild(this.target)}})},flashNuke:function(e){var t=a.createElementNS("http://www.w3.org/2000/svg","image");t.setAttributeNS(null,"width","200px"),t.setAttributeNS(null,"height","200px"),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/flash.png"),t.setAttributeNS(null,"class","no-pointer"),t.setAttributeNS(null,"x",e.x),t.setAttributeNS(null,"y",e.y),de.world.appendChild(t),TweenLite.to(t,e.d,{startAt:{transformOrigin:"50% 50%",scale:0},scale:e.scale,onComplete:function(){this.target.parentNode.removeChild(this.target)}}),TweenLite.to(t,e.d-1.8,{delay:1.8,opacity:0})},cannons:function(e,n,o,r,i){var s=de["unit"+e].getBBox(),l=de["land"+n].getBBox(),c=de["unit"+n].getBBox();if(r=r===L?.08:r,pe.tiles[e].player===ce.player||pe.tiles[n].player===ce.player){var u=~~(3*t.random());o&&we.play("grenade"+[5,6,8][u])}for(var d=s.x+.5*s.width,p=s.y+.5*s.height,m=.5*l.width,g=m/2,f=.5*l.height,h=f/2-10,b=0;b<20;b++)!function(t){var n=a.createElementNS("http://www.w3.org/2000/svg","circle"),o=c.x+t.random()*m-g,s=c.y+t.random()*f-h;n.setAttributeNS(null,"cx",d),n.setAttributeNS(null,"cy",p),n.setAttributeNS(null,"r",4),n.setAttributeNS(null,"fill",ue.color[pe.player[pe.tiles[e].player].playerColor]),n.setAttributeNS(null,"class","no-pointer"),n.setAttributeNS(null,"stroke",le.randomColor()),n.setAttributeNS(null,"strokeWidth",1),de.mapAnimations.appendChild(n),TweenLite.to(n,r,{delay:.0125*b,startAt:{alpha:1},attr:{cx:o,cy:s},ease:Linear.easeNone,onComplete:function(){var e=.5*t.random()+.3,a=i===L?e/2:i,r=10*e+3;TweenLite.to(n,a,{startAt:{fill:"none",strokeWidth:0,attr:{r:0}},strokeWidth:r,attr:{r:r/2},ease:Linear.easeNone,onComplete:function(){b%2==0&&le.flash({d:.25,scale:1,x:o-100,y:s-100}),TweenLite.to(n,a,{attr:{r:r},strokeWidth:0,ease:y.easeOut}),TweenLite.to(n,a,{alpha:0,onComplete:function(){this.target.parentNode.removeChild(this.target)},ease:y.easeOut})}})}}),0===b&&le.flash({d:1,scale:2,x:d-100,y:p-100})}(t);le.smoke(n,c.x,c.y,.8)},missile:function(e,n,r){r&&we.play("missile7");var i=de["unit"+e],s=i.getBBox(),c=s.x+s.width/2,u=s.y+s.height/2,d=de["unit"+n],p=d.getBBox(),m=p.x+p.width/2,g=p.y+p.height/2;ce.motionPath[0]=1*i.getAttribute("x")-10,ce.motionPath[1]=1*i.getAttribute("y")-10,ce.motionPath[4]=1*d.getAttribute("x")-10,ce.motionPath[5]=1*d.getAttribute("y")-10,ce.motionPath[2]=(ce.motionPath[0]+ce.motionPath[4])/2,ce.motionPath[3]=(ce.motionPath[1]+ce.motionPath[5])/2-t.abs(c-m)/3,o.set(de.motionPath,{attr:{d:"M "+ce.motionPath[0]+","+ce.motionPath[1]+" "+ +ce.motionPath[4]+" "+ce.motionPath[5]}});var f=a.createElementNS("http://www.w3.org/2000/svg","image");f.setAttributeNS(null,"width","200px"),f.setAttributeNS(null,"height","200px"),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/flash-orange.png"),f.setAttributeNS(null,"class","no-pointer"),f.setAttributeNS(null,"x",c),f.setAttributeNS(null,"y",u),de.mapAnimations.appendChild(f),TweenLite.to(f,1,{startAt:{xPercent:-50,yPercent:-50},x:m-c-24,y:g-u-24,ease:l.easeIn,onComplete:function(){this.target.parentNode.removeChild(this.target)}});var h=a.createElementNS("http://www.w3.org/2000/svg","circle");h.setAttributeNS(null,"cx",c),h.setAttributeNS(null,"cy",u),h.setAttributeNS(null,"r",12),h.setAttributeNS(null,"fill",ue.color[pe.player[pe.tiles[e].player].playerColor]),h.setAttributeNS(null,"stroke","#ffddaa"),h.setAttributeNS(null,"stroke-width",2),h.setAttributeNS(null,"class","no-pointer"),de.mapAnimations.appendChild(h);var y=0;o.to(h,.1,{attr:{r:3},repeat:-1}),TweenLite.to(h,1,{startAt:{alpha:1,xPercent:-50,yPercent:-50},attr:{cx:m,cy:g},ease:l.easeIn,onUpdate:function(){if(++y%2==0){var e=a.createElementNS("http://www.w3.org/2000/svg","image");e.setAttributeNS(null,"height",40),e.setAttributeNS(null,"width",40),e.setAttributeNS(null,"opacity",1),e.setAttributeNS(null,"x",h.getAttribute("cx")-10),e.setAttributeNS(null,"y",h.getAttribute("cy")-10),e.setAttributeNS(null,"class","no-pointer"),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/smoke.png"),de.mapAnimations.appendChild(e),TweenLite.to(e,.3,{startAt:{xPercent:-50,yPercent:-50,transformOrigin:"50% 50%"},scale:3,onComplete:function(){this.target.parentNode.removeChild(this.target)}}),TweenLite.to(e,.5,{alpha:0})}},onComplete:function(){this.target.parentNode.removeChild(this.target),le.missileExplosion(n,ue.color[pe.player[pe.tiles[e].player].playerColor])}}),le.flash({d:1,scale:3,x:c-100,y:u-100}),le.flash({d:1,scale:3,x:c-100,y:u-100})},missileExplosion:function(e,n){var r=de["unit"+e].getBBox(),i=~~(3*t.random());we.play("grenade"+[5,6,8][i]);for(var c=0,d=0,p=0;p<5;p++)!function(e){le.flash({d:.5,scale:3,x:c-100,y:d-100}),le.flash({d:.5,scale:2,x:c-100,y:d-100});var t=a.createElementNS("http://www.w3.org/2000/svg","circle");c=r.x+60*e.random()-30,d=r.y+60*e.random()-30,t.setAttributeNS(null,"cx",c),t.setAttributeNS(null,"cy",d),t.setAttributeNS(null,"r",0),t.setAttributeNS(null,"class","no-pointer"),t.setAttributeNS(null,"fill",n),t.setAttributeNS(null,"stroke","#ffffaa"),de.mapAnimations.appendChild(t);var i=.05*p;TweenLite.to(t,.75,{delay:i,attr:{r:32},onComplete:function(){o.to(t,1,{attr:{r:1},ease:s.easeIn,onComplete:function(){this.target.parentNode.removeChild(this.target)}})},ease:u.easeOut}),o.to(t,.1,{fill:"hsl(+=0%, +=0%, +="+~~(100*e.random())+"%)",repeat:-1}),TweenLite.to(t,1.75,{startAt:{alpha:1},alpha:0,ease:l.easeIn})}(t);le.smoke(e,c,d,1)},nuke:function(e,t){var n=de["unit"+e].getBBox(),r=n.x,i=n.y;shadow=a.createElementNS("http://www.w3.org/2000/svg","ellipse"),shadow.setAttributeNS(null,"cx",r),shadow.setAttributeNS(null,"cy",i),shadow.setAttributeNS(null,"rx",2),shadow.setAttributeNS(null,"ry",1),shadow.setAttributeNS(null,"fill","#000000"),shadow.setAttributeNS(null,"stroke","none"),de.mapAnimations.appendChild(shadow),o.to(shadow,1,{startAt:{opacity:.5},attr:{rx:10,ry:5},ease:s.easeIn,onComplete:function(){this.target.parentNode.removeChild(this.target)}});var l=a.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttributeNS(null,"cx",r),l.setAttributeNS(null,"cy",i-A.innerHeight),l.setAttributeNS(null,"r",15),l.setAttributeNS(null,"fill",ue.color[pe.player[t].playerColor]),l.setAttributeNS(null,"stroke","#ffddaa"),l.setAttributeNS(null,"class","no-pointer"),l.setAttributeNS(null,"stroke-width",2),de.mapAnimations.appendChild(l),TweenLite.to(l,.1,{attr:{r:3},ease:Linear.easeIn,repeat:-1}),TweenLite.to(l,1,{startAt:{alpha:1},attr:{cy:i},ease:s.easeIn,onComplete:function(){this.target.parentNode.removeChild(l)}}),TweenLite.to(ue,1,{onComplete:function(){we.play("bomb9"),le.screenShake(33,7,.033,1),le.sepia(),le.flashNuke({d:2.5,scale:5,opacity:0,x:r-100,y:i-100}),le.flashNuke({d:2.5,scale:4,x:r-100,y:i-100}),le.flashNuke({d:2.5,scale:3,x:r-100,y:i-100}),le.flashNuke({d:2.5,scale:2,x:r-100,y:i-100}),o.to(de.screenFlash,.05,{startAt:{opacity:.7,background:"#ffffff"},opacity:0,background:"#ff8800",ease:h.easeOut});var n=a.createElementNS("http://www.w3.org/2000/svg","circle");n.setAttributeNS(null,"cx",r),n.setAttributeNS(null,"cy",i),n.setAttributeNS(null,"r",1),n.setAttributeNS(null,"fill",ue.color[pe.player[t].playerColor]),n.setAttributeNS(null,"stroke","#ffdd88"),n.setAttributeNS(null,"class","no-pointer"),de.mapAnimations.appendChild(n),TweenLite.to(n,1.5,{startAt:{alpha:1},attr:{r:80},onComplete:function(){o.to(n,1,{attr:{r:50},ease:s.easeIn})},ease:c.easeOut}),o.to(n,.05,{fill:"hsl(+=0%, +=0%, +=20%)",repeat:-1,yoyo:!0,ease:g.config(6)}),TweenLite.to(n,2.5,{alpha:0,ease:u.easeIn,onComplete:function(){this.target.parentNode.removeChild(this.target)}}),le.smoke(e,r,i),le.smoke(e,r,i),le.smoke(e,r,i),le.smoke(e,r,i)}})},sepia:function(){var e={sepia:100,brightness:200,blur:3};TweenLite.to(e,2.5,{sepia:0,brightness:100,blur:0,ease:c.easeOut,onUpdate:function(){o.set(de.worldWrap,{filter:"sepia("+e.sepia+"%) brightness("+e.brightness+"%) blur("+e.blur+"px)"})}})},smoke:function(e,t,n,o){if(t===L){var r=le.getXY(e);t=r.x,n=r.y}o===L&&(o=1.25);var i=a.createElementNS("http://www.w3.org/2000/svg","image");i.setAttributeNS(null,"width",256),i.setAttributeNS(null,"height",256),i.setAttributeNS(null,"x",t),i.setAttributeNS(null,"y",n),i.setAttributeNS(null,"opacity",0),i.setAttributeNS(null,"class","no-pointer"),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","images/smoke.png"),de.mapAnimations.appendChild(i),TweenLite.to(i,3,{startAt:{alpha:1,transformOrigin:"50% 50%",xPercent:-50,yPercent:-50,scale:0},ease:u.easeOut,scale:o}),TweenLite.to(i,3,{alpha:0,onComplete:function(){this.target.parentNode.removeChild(this.target)}})},screenShake:function(e,a,n,r){var i=0;!function e(t,a,n,s,l){var c=a/2;r&&i%2==0&&--a<2&&(a=2),TweenLite.to(s,n,{x:~~(l.random()*a-c),y:~~(l.random()*a-c),onComplete:function(){o.to(s,n,{x:~~(l.random()*a-c),y:~~(l.random()*a-c),onComplete:function(){o.to(s,n,{x:~~(l.random()*a-c),y:~~(l.random()*a-c),onComplete:function(){o.to(s,n,{x:0,y:0,onComplete:function(){++i<t&&e(t,a,n,s,l)}})}})}})}})}(e,a,n,de.gameWrap,t)},selectTile:function(e,t){TweenLite.set(de["land"+e],{filter:"",fill:ue.color[pe.player[pe.tiles[e].player].playerColor],stroke:pe.tiles[e].player?ue.color[pe.player[pe.tiles[e].player].playerColor]:"#aaa",strokeDasharray:"none",strokeDashoffset:0,strokeWidth:1,onComplete:function(){pe.tiles[e].player&&o.set(this.target,{strokeWidth:1,stroke:"hsl(+=0%, +=0%, -=30%)"})}});var n=de["land"+t].cloneNode(!0);de.landWrap.appendChild(n),de["land"+t].parentNode.removeChild(de["land"+t]),de["land"+t]=a.getElementById("land"+t);var r=ue.color[pe.player[pe.tiles[t].player?pe.tiles[t].player:ce.player].playerColor],i=ue.color[pe.player[pe.tiles[t].player?pe.tiles[t].player:0].playerColor];TweenLite.set(de["land"+t],{fill:i,stroke:r,onComplete:function(){o.set(this.target,{stroke:"hsl(+=0%, +=0%, +=15)"})}}),o.to(de["land"+t],.4,{startAt:{filter:"url(#emboss)",strokeDasharray:"5,5",strokeWidth:3,strokeDashoffset:0},strokeDashoffset:10,repeat:-1,ease:Linear.easeNone})},brightness:function(e,t){TweenLite.set(e,{filter:"brightness("+t+"%)"})},muhBible:function(){var e=new r,t=new SplitText(a.getElementById("muh-bible"),{type:"words,chars"}).chars;e.staggerFromTo(t,.2,{immediateRender:!0,alpha:0},{delay:.1,alpha:1},.033)},energyBar:function(e){if(TweenLite.to(de.energyIndicator,2.7*ue.speed,{startAt:{strokeDasharray:"0,100"},force3D:!0,strokeDasharray:"100,100",ease:Linear.easeNone}),TweenLite.to(de.currentYear,3,{startAt:{color:"#ff0"},color:"#fff"}),e){de.currentYear.textContent=ae.transformYear(e);var t={blur:15};TweenLite.to(t,1,{blur:0,ease:Linear.easeIn,onUpdate:function(){le.blur(de.currentYear,t.blur)}})}},blur:function(e,t){TweenLite.set(e,{filter:"blur("+t+"px)"})},research:function(t){var n=a.createElement("div"),r=a.createElement("div"),i=a.createElement("div"),s=a.createElement("div"),l=a.getElementById(t.element);n.className="research-progress",r.className="research-label",r.innerHTML=t.tech,i.className="research-bar",s.className="research-bar-bg",l.parentNode.insertBefore(n,l.nextSibling),n.appendChild(r),n.appendChild(i),i.appendChild(s),o.to(s,t.duration,{startAt:{width:0},width:"100%",ease:Linear.easeIn,onComplete:function(){n.parentNode.removeChild(n),Te[t.method](),"Future Tech"===t.tech&&e("#researchFutureTech").css("display","flex")}}),"Future Tech"===t.tech?e("#researchFutureTech").css("display","none"):l.parentNode.removeChild(l),e(".tooltip.in").remove()}},ce={window:"Full Screen",lastReceivedWhisper:"",account:"",channel:"",player:0,playerColor:0,team:0,gameName:"Earth Alpha",max:8,tgt:1,lastTgt:1,capital:0,lastTarget:{},units:0,food:0,production:25,culture:0,oBonus:-1,dBonus:-1,productionBonus:-1,foodBonus:-1,cultureBonus:-1,foodMax:25,cultureMax:300,manpower:0,moves:4,sumMoves:4,sumFood:0,sumProduction:0,sumCulture:0,flag:"",targetLine:[0,0,0,0,0,0],motionPath:[0,0,0,0,0,0],attackOn:!1,splitAttack:!1,splitAttackCost:1,attackCost:2,deployCost:1,rushCost:2,maxDeployment:12,cannonBonus:0,targetData:{},selectedFlag:"Default",selectedFlagFull:"Default.jpg",government:"Despotism",tech:{masonry:0,construction:0,engineering:0,gunpowder:0,rocketry:0,atomicTheory:0},hud:function(e,t){me.hud.kill(),de.hud.style.visibility="visible",de.hud.textContent=e,t&&(me.hud=o.to(de.hud,5,{onComplete:function(){de.hud.style.visibility="hidden"}}))},clearHud:function(){me.hud.kill(),de.hud.style.visibility="hidden",o.set([de.targetLine,de.targetLineBorder,de.targetLineShadow,de.targetCrosshair],{visibility:"hidden",strokeDashoffset:0}),e("#style-land-pointer").remove(),ge.head.append('<style id="style-land-pointer">.land{ cursor: pointer; }</style>')},checkSelectLastTarget:function(){pe.tiles[ce.tgt].player!==ce.player&&(pe.tiles[ce.lastTgt].player===ce.player?ce.nextTarget(!1,ce.lastTgt):ce.nextTarget(!1))},nextTarget:function(e,a){if(!ue.spectateStatus){ce.lastTgt=ce.tgt;var n=0,o=pe.tiles.length;for(a===L?e?ce.tgt--:ce.tgt++:ce.tgt=a,ce.tgt<0&&(ce.tgt=o-1);n<o&&ce.player!==pe.tiles[ce.tgt%o].player;)e?ce.tgt--:ce.tgt++,ce.tgt<0&&(ce.tgt=o-1),n++;ce.tgt=a===L?e?t.abs(ce.tgt):ce.tgt%o:a,ce.focusTile(ce.tgt,.1),le.selectTile(ce.lastTgt,ce.tgt)}},focusTile:function(e,t){var a=de["land"+e];if(null!==a){var n=a.getBBox();t===L&&(t=.5);var r=512-n.x;r>0&&(r=0);var i=-1*(ue.map.sizeX-A.innerWidth);r<i&&(r=i);var s=234-n.y;s>0&&(s=0);var l=-1*(ue.map.sizeY-A.innerHeight);s<l&&(s=l),o.to(de.worldWrap,t,{force3D:!1,x:r*ue.resizeX,y:s*ue.resizeY}),ae.showTarget(de["land"+e],!1,1)}}};e.ajaxSetup({type:"POST",timeout:5e3}),o.defaultEase=Quad.easeOut;var ue={cannonTimer:0,missileTimer:0,nukeTimer:0,Msg:a.getElementById("Msg"),msgTimer:new o.delayedCall(0,""),camel:function(e){for(var t=1,a=(e=e.split("-")).length;t<a;t++)e[t]=e[t].charAt(0).toUpperCase()+e[t].substr(1);return e.join("")},msg:function(e,t){if(e.trim()){0===t?o.set(ue.Msg,{overwrite:1,startAt:{opacity:1}}):((t===L||t<2)&&(t=2),ue.msgTimer.kill(),ue.msgTimer=o.to(ue.Msg,t,{startAt:{scaleY:1,opacity:1},onComplete:function(){ue.msgClose()}})),e&&(ue.Msg.innerHTML=e);var a=new r,n=new SplitText(ue.Msg,{type:"words,chars"}).chars;a.staggerFromTo(n,.01,{immediateRender:!0,alpha:0},{delay:.1,alpha:1},.01)}},msgClose:function(){o.to(ue.Msg,.3,{scaleY:0})},gameDuration:0,spectateStatus:0,modalSpeed:.5,friends:[],ignore:[],color:["#02063a","#bb0000","#0077ff","#a5a500","#006000","#b06000","#33ddff","#b050b0","#5500aa","#660000","#0000bb","#663300","#33dd33","#222222","#00ff99","#ff6666","#ff00ff","#e4e4e4","#220088","#404000","#888888"],rankedMode:0,teamMode:0,joinedGame:!1,searchingGame:!1,defaultTitle:"Firmament Wars",titleFlashing:!1,name:"",password:"",speed:12,focusUpdateNationName:!1,focusGameName:!1,view:"title",resizeX:1,resizeY:1,sfxFood:!1,sfxCulture:!1,chatOn:!1,overlay:a.getElementById("overlay"),over:0,showSpectateButton:1,victory:!1,startTime:E.now(),keyLock:!1,loadAttempts:0,upgradeCost:[40,50,60],isModalOpen:!1,lock:function(e){ue.overlay.style.display="block",ue.overlay.style.opacity=void 0===e?0:1,ue.keyLock=!0},unlock:function(e){ue.overlay.style.display="none",ue.overlay.style.opacity=e?0:1,ue.keyLock=!1},unlockFade:function(e){e||(e=1),o.to(ue.overlay,e,{startAt:{opacity:1},ease:c.easeIn,opacity:0,onComplete:function(){ue.overlay.style.display="none"}})},TDC:function(){return new o.delayedCall(0,"")},screen:{resizeMap:function(){e("#mapStyle").remove();var t='<style id="mapStyle">#worldWrap{ position: absolute; top: 0%; left: 0%; width: '+ue.map.sizeX/A.innerWidth*100+"%; height: "+ue.map.sizeY/A.innerHeight*100+"%; }</style>";ge.head.append(t)}},mouse:{zoom:100,mouseTransX:50,mouseTransY:50},map:{sizeX:3200,sizeY:1500,name:"Earth Omega",key:"EarthOmega",tiles:85},updateUserInfo:function(){"localhost"!==n.host&&e.ajax({async:!0,type:"GET",dataType:"jsonp",url:"https://geoip-db.com/json/geoip.php?jsonp=?"}).done(function(t){t.latitude+="",t.longitude+="",ue.geo=t,e.ajax({url:app.url+"php/updateUserInfo.php",data:{location:ue.geo}}).done(function(){localStorage.setItem("geo",G.stringify(ue.geo)),localStorage.setItem("geoSeason",1),localStorage.setItem("geoTime",E.now())})})},checkPlayerData:function(){var t=localStorage.getItem(ce.account+"_geo"),a=localStorage.getItem(ce.account+"_geoTime"),n=localStorage.getItem(ce.account+"_geoSeason");null!==a||null===n?(E.now()-a>7776e3||null===n)&&ue.updateUserInfo():null===t&&ue.updateUserInfo();var o=localStorage.getItem("ignore");if(null!==o)ue.ignore=G.parse(o);else{app.isApp&&ye.configureNation();localStorage.setItem("ignore",G.stringify([]))}var r=1*localStorage.getItem("bible");e("#bible-status").prop("checked",!!r),se.setBibleMode(r)},config:{audio:{musicVolume:10,soundVolume:20}},geo:{},keepAlive:function(){e.ajax({type:"GET",url:app.url+"php/keepAlive.php"}).always(function(){b(ue.keepAlive,12e4)})},removeContainers:function(){e("#firmament-wars-logo-wrap, #mainWrap").remove()},notification:{},sendNotification:function(e){a.hasFocus()||"game"===ue.view||"function"!=typeof Notification||Notification.requestPermission().then(function(t){if("granted"===t){var n=" says: ";if(e.flag&&(e.msg||e.message)){"chat-whisper"===e.type&&(n=" whispers: ");var o=e.account+n,r=e.flag.replace(/-/g," ")+("Nepal"===e.flag?".png":".jpg");ue.notification=new Notification(o,{icon:"images/flags/"+r,tag:"Firmament Wars",body:e.msg?e.msg:e.message}),ue.notification.onclick=function(){A.focus()},ue.titleFlashing||(ue.titleFlashing=!0,function e(t){a.hasFocus()||(a.title=t%2==0?o:ue.defaultTitle,b(e,3e3,++t))}(0)),we.play("chat")}}})},chat:function(e,t){var a={message:e,type:t};"title"===ue.view?ye.chat(a):"lobby"===ue.view?be.chat(a):pe.chat(a)},getRandomFlag:function(){var e=[],a=0;for(var n in ue.flagData)ue.flagData[n].name.forEach(function(t){e[a++]=t});var o=e.length,r=~~(t.random()*o);return e[r]},flagData:{Africa:{group:"Africa",name:["Algeria","Botswana","Cameroon","Cape Verde","Ivory Coast","Egypt","Ghana","Kenya","Liberia","Morocco","Mozambique","Namibia","Nigeria","South Africa","Uganda"]},Asia:{group:"Asia",name:["Bangladesh","Cambodia","China","Hong Kong","India","Indonesia","Iran","Japan","Malaysia","Mongolia","Myanmar","Nepal","North Korea","Pakistan","Philippines","Singapore","South Korea","Sri Lanka","Suriname","Taiwan","Thailand","Vietnam"]},Europe:{group:"Europe",name:["Albania","Austria","Belgium","Bosnia and Herzegovina","Bulgaria","Croatia","Czech Republic","Denmark","England","Estonia","Finland","France","Germany","Greece","Hungary","Iceland","Ireland","Italy","Kosovo","Latvia","Lithuania","Macedonia","Montenegro","Netherlands","Norway","Poland","Portugal","Romania","Russia","Scotland","Serbia","Slovakia","Slovenia","Spain","Sweden","Switzerland","Ukraine","United Kingdom","Vatican City"]},Eurasia:{group:"Eurasia",name:["Armenia","Azerbaijan","Georgia","Kazakhstan","Uzbekistan"]},Historic:{group:"Historic",name:["Benin Empire","Byzantine Empire","Confederate Flag","Flanders","Gadsden Flag","Holy Roman Empire","Isle of Man","Rising Sun Flag","NSDAP Flag","NSDAP War Ensign","Ottoman Empire","Rhodesia","Shahanshahi","USSR","Veneto","Welsh"]},MiddleEast:{group:"Middle East",name:["Israel","Jerusalem","Jordan","Kurdistan","Lebanon","Palestine","Qatar","Saudi Arabia","Syria","Turkey"]},NorthAmerica:{group:"North America",name:["Bahamas","Barbados","Canada","Costa Rica","Cuba","Haiti","Honduras","Mexico","Saint Lucia","Trinidad and Tobago","United States"]},Oceania:{group:"Oceania",name:["Australia","New Zealand"]},US_States:{group:"US States",name:["Alaska","Alabama","Arkansas","Arizona","California","Maryland","Mississippi","Montana","South Carolina","Texas","Virginia"]},Miscellaneous:{group:"Miscellaneous",name:["Anarcho-Capitalist","Anarcho-Syndicalist","Cascadia","Christian","Edgemaster","European Union","High Energy","ISIS","Jefferson State","Jolly Roger","Kekistan","Northwest Front","Pan-African Flag","pol","Rainbow Flag","Sicily","United Nations"]},SouthAmerica:{group:"South America",name:["Argentina","Bolivia","Brazil","Chile","Colombia","Ecuador","Paraguay","Peru","Uruguay","Venezuela"]}},initGameCallback:function(t){app.isApp?e("#logout").remove():e("#logout").css("display","inline-block"),ie.updateIndexHtml(),o.staggerTo(a.getElementsByClassName("action-btn"),.5,{startAt:{x:-30},x:0,opacity:1},.1),ce.channel=t.initChannel,e(".actionButtons").tooltip({animation:!1,placement:"left",container:"body"}),e("[title]").tooltip({animation:!1,placement:"bottom",container:"body"}),t.account?(app.account=t.account,isLoggedIn=1,e("#logout").text("Logout "+t.account),app.isApp&&e("#login-modal").remove(),ye.chat({message:"There are "+t.currentPlayers+" people playing Firmament Wars."}),a.getElementById("updateNationFlag").src="images/flags/"+t.flag,a.getElementById("selectedFlag").textContent=t.flagShort,ye.refreshGamesCallback(t.games),ce.account=t.account,ce.flag=t.flag,ce.rating=t.rating,ue.checkPlayerData(),ye.friendGetCallback(t.friends),ue.msgClose()):notLoggedIn();var n=a.getElementById("firmamentWarsLogo"),r={shadow:2,brightness:100};o.to(r,3,{overwrite:1,shadow:12,brightness:150,repeat:-1,yoyo:!0,ease:u.easeIn,onUpdate:function(){!function(e){n.style.filter="drop-shadow(0px 0px "+e.shadow+"px #048) brightness("+e.brightness+"%)"}(r)}}),ve.init(),t.isNewAccount&&ye.configureNation()}};ue.init=function(){ue.lock(),app.isApp&&e("#exit-game").on("click",function(){ye.exitGame()});var t="";for(var r in ue.flagData)t+="<li class='dropdown-header'>"+ue.flagData[r].group+"</li>",ue.flagData[r].name.forEach(function(e){t+="<li class='flex-row flagSelect'><img class='flag' src='images/flags/"+e+".jpg'<a class='flex-1 no-select'>"+e+"</a></li>"});if(a.getElementById("flagDropdown").innerHTML=t,o.to("#title-stars-1",50,{startAt:{backgroundPosition:"0"},force3D:!0,backgroundPosition:"-1920px",repeat:-1,ease:Linear.easeNone}),o.to("#title-stars-2",75,{startAt:{backgroundPosition:"200px -200px"},backgroundPosition:"-1720px -200px",repeat:-1,ease:Linear.easeNone}),o.to("#title-stars-3",100,{startAt:{backgroundPosition:"400px -400px"},backgroundPosition:"-1520px -400px",repeat:-1,ease:Linear.easeNone}),o.to("#title-backdrop",12,{startAt:{scale:1,transformOrigin:"0% 100%"},scale:3,repeat:-1,yoyo:!0,ease:s.easeInOut}),o.to("#firmamentWarsBG",1,{startAt:{y:"-47%"},y:"-50%",onComplete:function(){o.to("#firmamentWarsBG",10,{startAt:{scale:1},scale:1.08,repeat:-1,yoyo:!0,ease:s.easeInOut})}}),ce.lang="english",app.isApp){ue.lock(1),ue.msg(ie[ce.lang].verifyingSteam);var i=require("./greenworks"),l={screenName:"",steamid:"",handle:0};if(i.initAPI()){i.init();var c=i.getSteamId();l.screenName=c.screenName,l.steamid=c.steamId,i.getAuthSessionTicket(function(t){l.handle=t.handle,e.ajax({type:"POST",url:app.url+"php/init-game.php",data:{version:app.version,screenName:l.screenName,steamid:l.steamid,ticket:t.ticket.toString("hex")}}).done(function(e){var t=i.getCurrentUILanguage(),a=ie.alternateSupportedLanguages.indexOf(t);ye.chat({message:"Detected language: "+t}),a>-1&&(ce.lang=ie.alternateSupportedLanguages[a]),i.cancelAuthTicket(l.handle),ue.initGameCallback(e)}).fail(function(e){ue.lock(1),e.responseText&&ue.msg(e.responseText,0)})})}else ue.lock(1),ue.msg(ie[ce.lang].steamNotFound,0)}else e.ajax({type:"POST",url:app.url+"php/init-game.php",data:{version:app.version,screenName:"",steamid:"",ticket:""}}).done(function(e){ue.initGameCallback(e)}).fail(function(e){ue.lock(1),e.responseText&&ue.msg(e.responseText,0)});("localhost"===n.hostname&&"#stop"!==n.hash||localStorage.getItem("resync")&&!1!==localStorage.getItem("reload"))&&(localStorage.setItem("resync",0),e.ajax({type:"GET",url:app.url+"php/rejoinGame.php"}).done(function(e){e.gameId>0&&(ce.player=e.player,ce.playerColor=e.player,ue.teamMode=e.teamMode,ue.rankedMode=e.rankedMode,ce.team=e.team,pe.id=e.gameId,ue.map=e.mapData,b(function(){be.init(e),be.join(0),V(e),ce.government=e.government,be.updateGovernmentWindow(ce.government),ve.joinGame()},111))}).fail(function(e){ue.msg(e.responseText)}))}();var de,pe={name:"",tiles:[],initialized:!1,toggleGameWindows:function(){var t="visible"===e("#targetWrap").css("visibility");o.set(de.gameWindows,{visibility:t?"hidden":"visible"}),t?o.to("#hotkey-ui",.5,{startAt:{opacity:0,visibility:"visible"},opacity:1}):o.set("#hotkey-ui",{visibility:"hidden"})},toggleFlags:function(){var t="block"===e("#diplomacy-body").css("display");o.set("#diplomacy-body",{display:t?"none":"block"})},player:[0,0,0,0,0,0,0,0,0],initMap:function(){!function(e,t){for(var a=0;a<t;a++)de["land"+a]=e.getElementById("land"+a),de["flag"+a]=e.getElementById("flag"+a),de["unit"+a]=e.getElementById("unit"+a)}(a,pe.tiles.length)},chat:function(e){for(;de.chatContent.childNodes.length>10;)de.chatContent.removeChild(de.chatContent.firstChild);var t=a.createElement("div");e.type&&(t.className=e.type),t.innerHTML=e.message,de.chatContent.appendChild(t),b(function(){t!==L&&null!==t.parentNode&&o.to(t,.125,{alpha:0,onComplete:function(){null!==t.parentNode&&t.parentNode.removeChild(t)}})},12e3)},eliminatePlayer:function(t){var a=t.player,n=0,r=0,i=[];pe.player[a].alive=!1,pe.player.forEach(function(e,t){e.account&&e.alive&&(e.cpu||(n++,-1===i.indexOf(e.team)&&i.push(e.team)),e.cpu&&r++)}),e("#diplomacyPlayer"+a).removeClass("alive"),ue.teamMode?i.length<=1&&(ue.showSpectateButton=0):n<=1&&(ue.showSpectateButton=0),ue.over||(a===ce.player?(new Audio("sound/shotgun2.mp3"),e.ajax({type:"GET",url:app.url+"php/gameDefeat.php"}).done(function(e){var t="";e.ceaseFire?t="<p>"+ie[ce.lang].armistice+"</p>\t\t\t<div>"+ie[ce.lang].gameArmistice+'</div>\t\t\t<div id="ceaseFire" class="endBtn">\t\t\t\t<div class="modalBtnChild">'+ie[ce.lang].ceaseFire+"</div>\t\t\t</div>":e.gameDone&&(t="<p>"+ie[ce.lang].defeat+"</p>\t\t\t<div>"+ie[ce.lang].gameDefeat+"</div>",ue.showSpectateButton&&(t+='<div id="spectate" class="endBtn">\t\t\t\t\t<div class="modalBtnChild">'+ie[ce.lang].spectate+"</div>\t\t\t\t</div>"),t+='<div id="endWar" class="endBtn">\t\t\t\t<div class="modalBtnChild">'+ie[ce.lang].concede+"</div>\t\t\t</div>"),t&&P(t)}).fail(function(e){})):ue.teamMode?i.length<=1&&b(function(){D()},1e3):n<=1&&!r&&b(function(){D()},1e3)),o.set("#diplomacyPlayer"+a,{autoAlpha:0,onComplete:function(){e("#diplomacyPlayer"+a).css("display","none")}}),o.set("#diplomacyPlayer"+a,0,{startAt:{transformPerspective:400,transformOrigin:"50% 0",rotationX:0},paddingTop:0,paddingBottom:0,height:0,rotationX:-90}),"byPlayer"!==t.eliminateType&&pe.removePlayer(a)},removePlayer:function(e){pe.tiles[e].account="",pe.tiles[e].nation="",pe.tiles[e].flag="";for(var t=0,a=pe.tiles.length;t<a;t++)pe.tiles[t].player===e&&(pe.tiles[t].account="",pe.tiles[t].defense="",pe.tiles[t].flag="",pe.tiles[t].nation="",pe.tiles[t].player=0,pe.tiles[t].units=0,pe.tiles[t].tile=t,pe.updateTile(pe.tiles[t]))},getGameState:function(){e.ajax({type:"GET",url:app.url+"php/getGameState.php"}).done(function(e){for(var t=0,a=e.tiles.length;t<a;t++){var n=e.tiles[t],r=!1;if(n.player!==pe.tiles[t].player){pe.tiles[t].units||o.set(de["unit"+t],{visibility:"visible"}),pe.tiles[t].player=n.player,pe.tiles[t].account=pe.player[n.player].account,pe.tiles[t].nation=pe.player[n.player].nation,pe.tiles[t].flag=pe.player[n.player].flag,ce.tgt===t&&(r=!0);var i=pe.player[n.player].flag?pe.player[n.player].flag:"blank.png";null!==de["flag"+t]&&(de["flag"+t].href.baseVal="images/flags/"+i),o.set(de["land"+t],{fill:ue.color[pe.player[n.player].playerColor],stroke:n.player?ue.color[pe.player[n.player].playerColor]:"#aaa",strokeWidth:1,onComplete:function(){n.player&&o.set(this.target,{stroke:"hsl(+=0%, +=0%, -=30%)"})}})}if(n.units!==pe.tiles[t].units){n.units,pe.tiles[t].units;pe.tiles[t].units=n.units,ce.tgt===t&&(r=!0),ae.setTileUnits(t)}r&&ae.showTarget(de["land"+t])}}).fail(function(e){})},updateDefense:function(e){var t=e.tile;pe.tiles[t].defense=e.defense,le.updateMapBars(t),ce.tgt===t&&ae.showTarget(de["land"+ce.tgt])},updateTile:function(e){var t=1*e.tile,a=e.player,n=1e4*e.timestamp;if(!(n<pe.tiles[t].timestamp)){pe.tiles[t].player=a,pe.tiles[t].account=pe.player[a].account,pe.tiles[t].nation=pe.player[a].nation,pe.tiles[t].flag=pe.player[a].flag,pe.tiles[t].timestamp=n;var r=pe.player[a].flag?pe.player[a].flag:pe.tiles[t].units?"Player0.jpg":"blank.png";null!==de["flag"+t]&&(de["flag"+t].href.baseVal="images/flags/"+r),o.set(de["land"+t],{fill:ue.color[pe.player[a].playerColor],stroke:a?ue.color[pe.player[a].playerColor]:"#aaa",strokeWidth:1,onComplete:function(){a&&o.set(this.target,{stroke:"hsl(+=0%, +=0%, "+(ce.tgt===t?"+=15%)":"-=30%)")})}}),e.units?e.units!==pe.tiles[t].units&&(pe.tiles[t].units=e.units,ae.setTileUnits(t)):(pe.tiles[t].units=0,o.set(de["unit"+t],{visibility:"hidden"})),ce.tgt===t&&ae.showTarget(de["land"+t]),ae.drawDiplomacyPanel()}},isMineOrAdjacent:function(e){if(pe.tiles[e].player===ce.player)return 1;if(!pe.tiles[e].units)return 0;var t=0;return pe.tiles[e].adj.forEach(function(e){pe.tiles[e].player===ce.player&&(t=1)}),t},setVisibilityAll:function(){pe.tiles.forEach(function(e,t){ae.setUnitVisibility(t)})},setSumValues:function(){for(var e={food:0,production:0,culture:0},t=0;t<ue.tileCount;t++)ce.player===pe.tiles[t].player&&(e.food+=pe.tiles[t].food,e.production+=pe.tiles[t].production,e.culture+=pe.tiles[t].culture)},energyTimer:0,startGameState:function(){pe.getGameState(),pe.energyTimer=v(pe.updateResources,1e3*ue.speed),le.energyBar()},triggerNextTurn:function(e){k(pe.energyTimer),pe.energyTimer=v(pe.updateResources,1e3*ue.speed),pe.updateResources()},updateResources:function(){if(!ue.over){var t=0,a=0;pe.player.forEach(function(e){e.alive&&(e.cpu?Se.takeTurn(e):0===e.cpu&&(t||(t=1,e.account===ce.account&&(a=1))))}),e.ajax({url:app.url+"php/updateResources.php",data:{pingCpu:a,resourceTick:ue.resourceTick}}).done(function(e){ue.resourceTick=e.resourceTick,K(e),pe.reportMilestones(e),le.energyBar(e.resourceTick)}).fail(function(e){O()})}},reportMilestones:function(e){if(e.cultureMsg!==L&&e.cultureMsg){var t={message:e.cultureMsg};pe.chat(t),we.play("culture"),we.play("cheer3"),z()}}},me={hud:ue.TDC()};R();var ge={head:e("#head"),chatInputOpen:e("#chat-input-open"),chatInputWrap:e("#chat-input-wrap"),chatInput:e("#chat-input"),lobbyChatInput:e("#lobby-chat-input"),titleChatInput:e("#title-chat-input")},fe=[],he={cache:{},load:{game:function(){for(var e=["smoke.png"],t=0,a=e.length;t<a;t++){var n=e[t];he.cache[n]=new Image,he.cache[n].src="images/"+n}}}},ye={players:[],games:[],getLeaderboard:function(t){var n=a.getElementById("leaderboardBody");n.innerHTML="",ue.lock(),e.ajax({url:app.url+"php/leaderboard.php",data:{type:t}}).done(function(e){n.innerHTML=e.str,ue.unlock()})},refreshTimer:0,refreshGames:function(){E.now()-ye.refreshTimer>5e3&&(ye.refreshTimer=E.now(),ue.lock(1),e("#title-chat-input").focus(),o.to("#refresh-game-button",1,{rotation:"+=360",ease:Linear.easeIn}),e.ajax({type:"GET",url:app.url+"php/refreshGames.php"}).done(function(e){ye.refreshGamesCallback(e.games)}).fail(function(e){}).always(function(){ue.unlock()}))},refreshGamesCallback:function(e){var t=a.getElementById("gameTableBody");if(null!==t){for(var n="",o=0,r=e.length;o<r;o++){var i=e[o];ye.games[i.id]=1*i.players,n+="<tr id='game_"+i.id+"' class='shadow4 wars wars-"+i.gameMode+" no-select' data-name='"+i.name+"'>\t\t\t\t<td class='warCells'>"+i.name+"</td>\t\t\t\t<td class='warCells'>"+i.map+"</td>\t\t\t\t<td class='warCells'>"+i.gameMode+"</td>\t\t\t</tr>"}t.innerHTML=n}},init:void e(a).ready(function(){e("#titleChatLog").on("mousedown",function(){ye.chatDrag=!0}).on("mouseup",function(){ye.chatDrag=!1}),e("#title-chat-input").on("focus",function(){ye.chatOn=!0}).on("blur",function(){ye.chatOn=!1}),e(".createGameInput").on("focus",function(){ye.createGameFocus=!0}).on("blur",function(){ye.createGameFocus=!1}),e("#login-container").on(ae.click,".nw-link",function(){ye.openWindow(e(this).attr("href"))}),b(function(){ue.keepAlive()},18e4)}),updateTimer:0,updatePlayers:function(t){w(ye.updateTimer),ye.titleUpdate=e("#titleChatPlayers").length,ye.titleUpdate?function a(){isLoggedIn&&"title"===ue.view&&e.ajax({type:"POST",url:app.url+"php/titleUpdate.php",data:{channel:ce.channel}}).done(function(e){ye.updatePlayerCallback(e)}).always(function(){t||(ye.updateTimer=b(a,5e3))})}():e("#titleChat, #titleMenu").remove()},updatePlayerCallback:function(e){if("title"===ue.view){if(e.playerData!==L){for(var t=[],n=0,o=(p=e.playerData).length;n<o;n++){var r=p[n].account,i=p[n].flag,s=p[n].rating;if(ye.players[r]===L)ye.addPlayer(r,i,s);else if(ye.players[r].flag!==i){var l=a.getElementById("titlePlayerFlag_"+r);null!==l&&(l.src="images/flags/"+i)}t.push(r)}for(var c in ye.players)if(-1===t.indexOf(c)){var u={account:c};ye.removePlayer(u)}}a.getElementById("titleChatHeaderCount").textContent=o!==L?"("+o+")":"";var d=[];if(e.gameData!==L)for(var p=e.gameData,n=0,o=p.length;n<o;n++)d[p[n].id]={players:1*p[n].players,max:1*p[n].max};ye.games.forEach(function(e,t){if(d[t]===L){a={id:t};ye.removeGame(a)}else if(d[t].players!==ye.games[t]){var a={id:t,players:d[t].players,max:d[t].max};ye.setToGame(a)}})}},addPlayer:function(e,t,n){ye.players[e]={flag:t};o=a.getElementById("titlePlayer"+e);null!==o&&o.parentNode.removeChild(o);var o;(o=a.createElement("div")).className="titlePlayer",o.id="titlePlayer"+e,o.innerHTML='<img id="titlePlayerFlag_'+e+'" class="flag" src="images/flags/'+t+'"><span class="chat-rating">['+n+']</span> <span class="titlePlayerAccount">'+e+"</span>",e&&t&&ye.titleUpdate&&de.titleChatBody.appendChild(o)},removePlayer:function(e){delete ye.players[e.account];var t=a.getElementById("titlePlayer"+e.account);null!==t&&t.parentNode.removeChild(t)},updateGame:function(e){"addToGame"===e.type?ye.addToGame(e):"removeFromGame"===e.type?ye.removeFromGame(e):"addGame"===e.type?ye.addGame(e):"removeGame"===e.type&&ye.removeGame(e)},updatePlayerText:function(e){var t=a.getElementById("game_players_"+e);null!==t&&(t.textContent=ye.games[e])},setToGame:function(e){var t=e.id;ye.games[t]=e.players},addToGame:function(e){var t=e.id;ye.games[t]!==L?ye.games[t]+1>e.max?ye.games[t]=e.max:ye.games[t]++:ye.games[t]=1},removeFromGame:function(e){var t=e.id;ye.games[t]!==L?ye.games[t]-1<1?ye.games[t]=1:ye.games[t]--:ye.games[t]=1},addGame:function(e){ye.games[e.id]=1;var t=a.createElement("tr"),n="Ranked"===e.gameMode?"Ranked":"Team"===e.gameMode?"Team":"FFA";t.id="game_"+e.id,t.className="shadow4 wars wars-"+n+" no-select",t.setAttribute("data-name",e.name),t.innerHTML="<td class='warCells'>"+e.name+"</td>\t\t\t<td class='warCells'>"+e.map+"</td>\t\t\t<td class='warCells'>"+n+"</td>",de.gameTableBody.insertBefore(t,de.gameTableBody.childNodes[0])},removeGame:function(e){delete ye.games[e.id];var t=a.getElementById("game_"+e.id);null!==t&&t.parentNode.removeChild(t)},mapData:{EarthOmega:{name:"Earth Omega",tiles:78,players:8},France:{name:"France",tiles:81,players:8},Italy:{name:"Italy",tiles:81,players:8},Japan:{name:"Japan",tiles:47,players:3},Turkey:{name:"Turkey",tiles:75,players:7},UnitedKingdom:{name:"United Kingdom",tiles:69,players:8},UnitedStates:{name:"United States",tiles:48,players:2}},chatDrag:!1,chatOn:!1,scrollBottom:function(){ye.chatDrag||(de.titleChatLog.scrollTop=de.titleChatLog.scrollHeight)},chat:function(e){if("title"===ue.view&&e.message){for(;de.titleChatLog.childNodes.length>500;)de.titleChatLog.removeChild(de.titleChatLog.firstChild);"inserted-image"===e.type&&function e(t){++t<10&&(ye.scrollBottom(),b(e,200,t))}(0);var t=a.createElement("div");e.type&&(t.className=e.type),t.innerHTML=e.message,de.titleChatLog.appendChild(t),ye.scrollBottom()}},friendGet:function(){ue.friends=[],e.ajax({type:"GET",url:app.url+"php/friendGet.php"}).done(function(e){ye.friendGetCallback(e.friends)})},friendGetCallback:function(e){e.forEach(function(e){ue.friends.push(e)})},toggleFriend:function(t){(t=t.trim())!==ce.account?e.ajax({url:app.url+"php/friendToggle.php",data:{account:t}}).done(function(e){"fail"===e.action?ue.chat("You cannot have more than 20 friends!"):"remove"===e.action?(ue.chat("Removed "+t+" from your friend list"),ye.friendGet()):"add"===e.action&&(ue.chat("Added "+t+" to your friend list"),ye.friendGet())}):ue.chat("You can't be friends with yourself!","chat-muted")},listIgnore:function(){var e=ue.ignore.length;ue.chat("<div>Ignore List ("+e+")</div>");for(var t=0;t<e;t++){var a='<div><span class="chat-muted titlePlayerAccount">'+ue.ignore[t]+"</span></div>";ue.chat(a)}},addIgnore:function(e){e=e.toLowerCase().trim(),ue.chat("<div>Ignoring "+e+"</div>"),-1===ue.ignore.indexOf(e)&&e?ue.ignore.length<20?e!==ce.account?(ue.ignore.push(e),localStorage.setItem("ignore",G.stringify(ue.ignore)),ue.chat("Now ignoring account: "+e,"chat-muted")):ue.chat("<div>You can't ignore yourself!</div><img src='images/chat/random/autism.jpg'>","chat-muted"):ue.chat("You cannot ignore more than 20 accounts!","chat-muted"):ue.chat("Already ignoring "+e+"!","chat-muted")},removeIgnore:function(e){if((e=e.toLowerCase().trim())&&ue.ignore.indexOf(e)>-1){var t=ue.ignore.indexOf(e);ue.ignore.splice(t,1),localStorage.setItem("ignore",G.stringify(ue.ignore)),ue.chat("Stopped ignoring account: "+e,"chat-muted")}else ue.chat(e+" is not on your ignore list.","chat-muted")},chatReceive:function(e){if("title"===ue.view)"remove"===e.type?ye.removePlayer(e):"add"===e.type?ye.addPlayer(e.account,e.flag,e.rating):e.message!==L&&ye.chat(e);else if("lobby"===ue.view)"hostLeft"===e.type?be.hostLeft():"lobby-set-cpu-difficulty"===e.type?be.updateDifficulty(e):"updateGovernment"===e.type?be.updateGovernment(e):"updatePlayerColor"===e.type?be.updatePlayerColor(e):"updateTeamNumber"===e.type?be.updateTeamNumber(e):"countdown"===e.type?be.countdown(e):"updateLobbyPlayer"===e.type?be.updatePlayer(e):"updateLobbyCPU"===e.type?be.updateCPU(e):e.message!==L&&be.chat(e);else{if("cannons"===e.type)le.cannons(e.attackerTile,e.tile,!0),pe.updateTile(e);else if("missile"===e.type)le.missile(e.attacker,e.defender,!0);else if("nuke"===e.type)b(function(){le.nuke(e.tile,e.attacker)},5e3);else if("nukeHit"===e.type)pe.updateTile(e),pe.updateDefense(e);else if("gunfire"===e.type){var t=e.player===ce.player||e.playerB===ce.player?.7:.2;le.gunfire(e.attackerTile,e.tile,t),pe.updateTile(e),e.rewardUnits&&le.upgrade(e.tile,"troops",e.rewardUnits)}else"updateTile"===e.type?(pe.updateTile(e),pe.setSumValues(),e.rewardUnits&&le.upgrade(e.tile,"troops",e.rewardUnits),"sniper0"===e.sfx&&le.upgrade(e.tile,"culture")):"democracy-units"===e.type?ce.player===e.player&&ke.democracyUnits():"food"===e.type?e.account.indexOf(ce.account)>-1&&we.play("hup2"):"upgrade"===e.type?(pe.updateDefense(e),le.upgrade(e.tile,"shield")):"eliminated"===e.type?pe.eliminatePlayer(e):"endTurnCheck"===e.type?pe.triggerNextTurn(e):"disconnect"===e.type&&pe.eliminatePlayer(e);e.message&&("gunfire"===e.type?e.defender===ce.account&&pe.chat(e):pe.chat(e)),e.sfx&&we.play(e.sfx)}},sendWhisper:function(t,a){var n=(t=(t=t.split(a))[1].split(" ")).shift();e.ajax({url:app.url+"php/insertWhisper.php",data:{account:n,flag:ce.flag,playerColor:ce.playerColor,message:t[0],action:"send"}})},lastWhisper:{account:"",message:"",timestamp:0},receiveWhisper:function(e){"title"===ue.view?ye.chat(e):"lobby"===ue.view?be.chat(e):pe.chat(e)},changeChannel:function(e,t){var a=e.split(t);ve.setChannel(a[1])},who:function(t){var a=t.split("/who ");e.ajax({url:app.url+"php/whoUser.php",data:{account:a[1]}}).done(function(e){var t='<div class="who-wrap"><div class="who-wrap-left">';t+=e.str,e.account!==ce.account&&-1===ue.friends.indexOf(e.account)&&(t+='<button style="pointer-events: initial" class="addFriend btn btn-xs fwBlue" data-account="'+e.account+'">Add Friend</button>'),t+='</div><div class="who-wrap-right">',t+=function(){var t="";if(e.ribbons!==L){e.ribbons.reverse();var a,n=0,o=e.ribbons.length;if(o){for(t+='<div class="ribbon-wrap">';n<o;n++)t+='<img class="pointer ribbon" data-ribbon="'+(a=e.ribbons[n])+'" src="images/ribbons/ribbon'+a+'.jpg">';t+="</div>"}}return t}()+"</div></div>",ue.chat(t)}).fail(function(){ue.chat("No data found.")})},help:function(){['<div class="chat-warning">Chat Commands:</div>',"<div>#channel: join channel</div>","<div>@account: whisper user</div>","<div>/ignore account: ignore account</div>","<div>/unignore account: stop ignoring account</div>","<div>/friend account: add/remove friend</div>","<div>/who account: check account info (or click account name)</div>"].forEach(function(e){ye.chat({message:e,type:"chat-muted"})})},broadcast:function(t){e.ajax({url:app.url+"php/insertBroadcast.php",data:{message:t}})},closeApp:function(){e.ajax({type:"GET",url:app.url+"php/close-app.php"}).done(function(){})},url:function(t){e.ajax({url:app.url+"php/insertUrl.php",data:{url:t}})},img:function(t){e.ajax({url:app.url+"php/insertImg.php",data:{url:t}})},video:function(t){e.ajax({url:app.url+"php/insertVideo.php",data:{url:t}})},fwpaid:function(t){e.ajax({url:app.url+"php/fwpaid.php",data:{message:t}})},addRibbon:function(t,a){e.ajax({url:app.url+"php/fw-add-ribbon.php",data:{account:t,ribbon:a}})},sendMsg:function(t){var a=ge.titleChatInput.val().trim();if(t||ye.chatOn){if(a)if("/friend"===a)ye.listFriends();else if(0===a.indexOf("/friend "))ye.toggleFriend(a.slice(8));else if(0===a.indexOf("/unignore ")){o=a.slice(10);ye.removeIgnore(o)}else if("/ignore"===a)ye.listIgnore();else if(0===a.indexOf("/ignore ")){o=a.slice(8);ye.addIgnore(o)}else if(0===a.indexOf("/join "))ye.changeChannel(a,"/join ");else if(0===a.indexOf("#"))ye.changeChannel(a,"#");else if(0===a.indexOf("/j "))ye.changeChannel(a,"/j ");else if(0===a.indexOf("@"))ye.sendWhisper(a,"@");else if(0===a.indexOf("/who "))ye.who(a);else if(0===a.indexOf("/broadcast "))ye.broadcast(a);else if(0===a.indexOf("/closeApp"))ye.closeApp();else if(0===a.indexOf("/url "))ye.url(a);else if(0===a.indexOf("/img "))ye.img(a);else if(0===a.indexOf("/video "))ye.video(a);else if(0===a.indexOf("/fw-paid ")){o=a.slice(8);ye.fwpaid(o)}else if(0===a.indexOf("/fw-add-ribbon ")){var n=a.split(" "),o=n[1],r=n[2];ye.addRibbon(o,r)}else"/"===a.charAt(0)&&0!==a.indexOf("/me")||"/me"===a||e.ajax({url:app.url+"php/insertTitleChat.php",data:{message:a}});ge.titleChatInput.val("")}},listFriendsThrottle:0,listFriends:function(){if(!(E.now()-ye.listFriendsThrottle<5e3)){ye.listFriendsThrottle=E.now();var t=ue.friends.length;ue.chat("<div>Checking friends list...</div>"),ue.friends.length?e.ajax({url:app.url+"php/friendStatus.php",data:{friends:ue.friends}}).done(function(e){n="<div>Friend List ("+t+")</div>";ue.chat(n);for(var a=0;a<t;a++){var n="",o=e.players.indexOf(ue.friends[a]);o>-1?(n+='<div><span class="chat-online titlePlayerAccount">'+ue.friends[a]+"</span>","number"==typeof e.locations[o]?n+=" playing in game: "+e.locations[o]:(n+=" in chat channel: ","title"===ue.view?n+='<span class="chat-online chat-join">'+e.locations[o]+"</span>":n+=e.locations[o]),n+="</div>",ue.chat(n)):ue.chat('<div><span class="chat-muted titlePlayerAccount">'+ue.friends[a]+"</span></div>")}}):ue.chat("<div>You don't have any friends! Use /friend account to add a new friend.</div>","chat-muted"),e("#title-chat-input").focus()}},showBackdrop:function(e){o.to("#titleViewBackdrop",.3,{startAt:{visibility:"visible",alpha:0},alpha:1,onComplete:function(){e!==L&&e.focus()}}),ue.isModalOpen=!0;var t={blur:0};o.to(t,.3,{blur:3,onUpdate:function(){le.blur("#mainWrap, #gameWrap",t.blur)}})},toggleModal:function(){ue.isModalOpen?ye.closeModal():ye.showModal()},showModal:function(){o.to("#optionsModal",ue.modalSpeed,{startAt:{visibility:"visible",y:0,alpha:0},y:30,alpha:1}),ye.showBackdrop();var e={blur:0};o.to(e,.3,{blur:3,onUpdate:function(){le.blur("#mainWrap, #gameWrap",e.blur)}})},closeModal:function(){o.set(".title-modals, #titleViewBackdrop",{alpha:0,visibility:"hidden"}),ue.isModalOpen=!1;var e={blur:3};o.to(e,.3,{blur:0,onUpdate:function(){le.blur("#mainWrap, #gameWrap",e.blur)}})},exitGame:function(){ye.closeGame(),nw.App.closeAllWindows()},closeGame:function(){if(app.isApp){require("nw.gui");ce.account&&ve.removePlayer(ce.account),"lobby"===ue.view?W():"game"===ue.view&&j()}},addCpu:0,createGameFocus:!1,createGame:function(){var t=e("#gameName").val(),a=e("#gamePassword").val(),n=1*e("#gamePlayers").val(),o=ue.speed;!ue.rankedMode&&(t.length<4||t.length>32)?(ue.msg(ie[ce.lang].badGameName,1),b(function(){e("#gameName").focus().select()},100)):!ue.rankedMode&&(n<2||n>8||n%1!=0)?ue.msg(ie[ce.lang].notEnoughPlayers,1):ye.createGameService(t,a,ye.mapData[ue.map.key].name,n,ue.rankedMode,ue.teamMode,o)},openWindow:function(e){app.isApp},configureNation:function(){o.to("#configureNation",ue.modalSpeed,{startAt:{visibility:"visible",y:0,alpha:0},y:30,alpha:1}),ye.showBackdrop()},createGameService:function(t,a,n,o,r,i,s){ue.lock(1),we.play("click"),ue.rankedMode=r,ue.teamMode=i,e.ajax({url:app.url+"php/createGame.php",data:{name:t,pw:a,map:n,max:o,rating:r,teamMode:i,speed:s}}).done(function(e){ve.removePlayer(ce.account),ce.player=e.player,ce.playerColor=e.playerColor,ce.team=e.team,pe.id=e.gameId,pe.name=e.gameName,be.init(e),be.join(),ve.joinGame(),be.styleStartGame()}).fail(function(e){ue.msg(e.statusText),ue.unlock(1)})},joinGame:function(){if(ue.name=e("#joinGame").val(),!ue.name)return ue.msg(ie[ce.lang].gameNameNotValid,1.5),void e("#joinGame").focus().select();ue.password=e("#joinGamePassword").val(),ue.lock(),we.play("click"),e.ajax({url:app.url+"php/joinGame.php",data:{name:ue.name,password:ue.password}}).done(function(e){ye.joinGameCallback(e)}).fail(function(e){ue.msg(e.statusText,1.5)}).always(function(){ue.unlock()})},joinGameCallback:function(e){ve.removePlayer(ce.account),ce.player=e.player,ce.playerColor=e.player,ue.teamMode=e.teamMode,ue.rankedMode=e.rankedMode,ce.team=e.team,pe.id=e.id,pe.name=e.gameName,ue.map=e.mapData,be.init(e),be.join(),ve.joinGame()},submitNationName:function(){var t=e("#updateNationName").val();ue.lock(),we.play("click"),e.ajax({url:app.url+"php/updateNationName.php",data:{name:t}}).done(function(t){ue.msg(ie[ce.lang].newNationName+t),e("#updateNationName").val(t)}).fail(function(e){ue.msg(e.statusText)}).always(function(){ue.unlock()})}};!function(){var t="";for(var n in ye.mapData)t+="<li><a class='mapSelect' href='#'>"+ye.mapData[n].name+"</a></li>";var o=a.getElementById("mapDropdown");null!==o&&(o.innerHTML=t),isLoggedIn&&e("[title]").tooltip({animation:!1})}();var be={data:[{account:""},{account:""},{account:""},{account:""},{account:""},{account:""},{account:""},{account:""},{account:""}],startClassOn:"btn btn-md btn-block btn-responsive shadow4 lobbyButtons",startClassOff:"btn btn-md btn-block btn-responsive shadow4 lobbyButtons",totalPlayers:function(){for(var e=0,t=0,a=be.data.length;t<a;t++)be.data[t].account&&e++;return e},addCpuPlayer:function(){e.ajax({url:app.url+"php/cpu-add-player.php",data:{flag:ue.getRandomFlag()}})},updateGovernmentWindow:function(e){var t="";if("Random"===e)a.getElementById("lobbyGovernment"+ce.player).innerHTML=ie[ce.lang].governments[e],a.getElementById("lobbyGovernmentDescription").innerHTML='<div id="lobbyGovName" class="text-primary">Random</div><div id="lobbyGovPerks"><div>???</div><div>???</div><div>???</div><div>???</div></div>';else{t='<div id="lobbyGovName" class="text-primary"><img src="images/icons/'+e+'.png" class="fw-icon-sm">'+ie[ce.lang].governments[e]+"</div>",t+='<div id="lobbyGovPerks">';for(var n in ie[ce.lang][e])t+="<div>"+ie[ce.lang][e][n]+"</div>";t+="</div>",a.getElementById("lobbyGovernment"+ce.player).innerHTML='<img src="images/icons/'+e+'.png" class="fw-icon-sm">'+ie[ce.lang].governments[e],a.getElementById("lobbyGovernmentDescription").innerHTML=t}},chat:function(e){for(;de.lobbyChatLog.childNodes.length>200;)de.lobbyChatLog.removeChild(de.lobbyChatLog.firstChild);var t=a.createElement("div");e.type&&(t.className=e.type),t.innerHTML=e.message,de.lobbyChatLog.appendChild(t),be.chatDrag||(de.lobbyChatLog.scrollTop=de.lobbyChatLog.scrollHeight)},chatDrag:!1,gameStarted:!1,chatOn:!1,sendMsg:function(t){var a=ge.lobbyChatInput.val().trim();if(t||be.chatOn){if(a)if("/friend"===a)ye.listFriends();else if(0===a.indexOf("/friend "))ye.toggleFriend(a.slice(8));else if(0===a.indexOf("/unignore ")){n=a.slice(10);ye.removeIgnore(n)}else if("/ignore"===a)ye.listIgnore();else if(0===a.indexOf("/ignore ")){var n=a.slice(8);ye.addIgnore(n)}else 0===a.indexOf("@")?ye.sendWhisper(a,"@"):0===a.indexOf("/who ")?ye.who(a):"/"===a.charAt(0)&&0!==a.indexOf("/me")||e.ajax({url:app.url+"php/insertLobbyChat.php",data:{message:a}});ge.lobbyChatInput.val("")}},init:function(e){if(!be.initialized){a.getElementById("lobbyChatLog").innerHTML=ie[ce.lang].youHaveJoined+e.name,be.sendMsg();var t=a.getElementById("lobbyGameName");if(null!==t){e.rating&&(a.getElementById("lobbyRankedMatch").style.display="block",a.getElementById("lobbyGameNameWrap").style.display="none"),t.innerHTML=e.name,a.getElementById("lobbyGameMode").textContent=e.gameMode,e.password&&(a.getElementById("lobbyGamePasswordWrap").style.display="block",a.getElementById("lobbyGamePassword").innerHTML=e.password),a.getElementById("lobbyGameMap").innerHTML=e.map,a.getElementById("lobbyGameMax").innerHTML=e.max,a.getElementById("startGame").style.display=1===e.player?"block":"none",e.startGame||(a.getElementById("mainWrap").style.display="flex");for(var n='<div id="lobbyWrap">',o=1;o<=8;o++){if(n+='<div id="lobbyRow'+o+'" class="lobbyRow">\t\t\t\t\t<div class="lobby-row-col-1">\t\t\t\t\t\t<img id="lobbyFlag'+o+'" class="lobbyFlags block center no-select" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=">\t\t\t\t\t</div>\t\t\t\t\t<div class="lobby-row-col-2 lobbyDetails">\t\t\t\t\t\t<div class="lobbyAccounts">',ue.teamMode){n+='<span><div id="lobbyTeam'+o+'" data-placement="right" class="lobbyTeams dropdown-toggle pointer2" data-toggle="dropdown">',n+='<i class="fa fa-flag pointer2 lobbyTeamFlag"></i> <span id="lobbyTeamNumber'+o+'" class="lobbyTeamNumbers">'+o+"</span></div>",n+='<ul id="teamDropdown" class="dropdown-menu">\t\t\t\t\t\t\t\t\t<li class="header text-center selectTeamHeader">'+ie[ce.lang].team+"</li>";for(r=1;r<=8;r++)n+='<li class="teamChoice" data-player="'+o+'">'+ie[ce.lang].team+" "+r+"</li>";n+="</ul></span>"}if(n+='<span><i id="lobbyPlayerColor'+o+'" class="fa fa-square player'+o+" lobbyPlayer dropdown-toggle",o===ce.player&&(n+=" pointer2"),n+='" data-placement="right" data-toggle="dropdown"></i>',o===ce.player){n+='<ul id="teamColorDropdown" class="dropdown-menu">\t\t\t\t\t\t\t\t\t<li class="header text-center selectTeamHeader">'+ie[ce.lang].playerColor+'</li><li id="team-color-flex">';for(var r=1;r<=20;r++)n+='<div class="pbar'+r+' playerColorChoice" data-playercolor="'+r+'"></div>';n+="</li></ul></span>"}if(n+='<span id="lobbyAccountName'+o+'" class="lobbyAccountName chat-warning"></span>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div id="lobbyName'+o+'" class="lobbyNames nowrap"></div>\t\t\t\t\t</div>\t\t\t\t\t<div class="lobby-row-col-3">',o===e.player){n+='<div id="gov-dropdown-player'+o+'" class="dropdown govDropdown">\t\t\t\t\t\t\t<button class="btn btn-primary btn-responsive dropdown-toggle shadow4 fwDropdownButton" type="button" data-toggle="dropdown">\t\t\t\t\t\t\t\t<span id="lobbyGovernment'+o+'">'+ie[ce.lang].governments.Despotism+'</span>\t\t\t\t\t\t\t\t<i id="lobbyCaret'+o+'" class="fa fa-caret-down text-warning lobbyCaret"></i>\t\t\t\t\t\t\t</button>\t\t\t\t\t\t\t<ul class="governmentDropdown dropdown-menu no-select">';for(var i in ie[ce.lang].governments)n+='<li class="governmentChoice" data-government="'+i+'"><a>'+ie[ce.lang].governments[i]+"</a></li>";n+="</ul>\t\t\t\t\t\t</div>"+be.getCpuDropdown(o)}else n+='<div id="gov-dropdown-player'+o+'" class="dropdown govDropdown">\t\t\t\t\t\t\t<button style="cursor: default" class="btn btn-primary btn-responsive dropdown-toggle shadow4 fwDropdownButton fwDropdownButtonEnemy" type="button">\t\t\t\t\t\t\t\t<span id="lobbyGovernment'+o+'" class="pull-left">'+ie[ce.lang].governments.Despotism+'</span>\t\t\t\t\t\t\t\t<i id="lobbyCaret'+o+'" class="fa fa-caret-down text-disabled lobbyCaret"></i>\t\t\t\t\t\t\t</button>\t\t\t\t\t\t</div>'+be.getCpuDropdown(o);n+="</div>\t\t\t\t\t</div>"}n+="</div>",1!==ce.player||ue.rankedMode||(n+='<div id="lobby-cpu-row" class="row buffer2">\t\t\t\t\t<div class="col-xs-12">\t\t\t\t\t\t<button id="cpu-remove-player" type="button" class="btn fwBlue btn-responsive shadow4 pull-right cpu-button">\t\t\t\t\t\t\t<img src="images/icons/computer.png" class="fw-icon-sm">'+ie[ce.lang].removeCPU+'\t\t\t\t\t\t</button>\t\t\t\t\t\t<button id="cpu-add-player" type="button" class="btn fwBlue btn-responsive shadow4 pull-right cpu-button">\t\t\t\t\t\t\t<img src="images/icons/computer.png" class="fw-icon-sm">'+ie[ce.lang].addCPU+"\t\t\t\t\t\t</button>\t\t\t\t\t</div>\t\t\t\t</div>"),a.getElementById("lobbyPlayers").innerHTML=n,be.updateGovernmentWindow(ce.government)}}},initialized:0,getCpuDropdown:function(e){var t='<div id="gov-dropdown-cpu'+e+'" class="dropdown govDropdown none">\t\t\t<button class="btn btn-primary btn-responsive dropdown-toggle shadow4 fwDropdownButton" type="button" data-toggle="dropdown">\t\t\t\t<img src="images/icons/computer.png" class="fw-icon-sm">\t\t\t\t<span id="lobby-difficulty-cpu'+e+'">'+ie[ce.lang].difficulties["Very Easy"]+'</span>\t\t\t\t<i id="lobby-caret-cpu'+e+'" class="fa fa-caret-down text-warning lobbyCaret"></i>\t\t\t</button>\t\t\t<ul class="governmentDropdown dropdown-menu no-select">';for(var a in ie[ce.lang].difficulties)t+='<li class="cpu-choice" data-player="'+e+'" data-difficulty="'+a+'"><a>'+ie[ce.lang].difficulties[a]+"</a></li>";return t+="</ul>\t\t</div>"},join:function(t){t===L&&(t=.5),ue.lock(1),ue.view="lobby",ye.closeModal(),o.to("header",t,{y:"-200%",ease:Quad.easeIn}),o.to("#titleChat",t,{x:"100%",ease:Quad.easeIn}),a.getElementById("lobbyFirmamentWarsLogo").src="images/title/firmament-wars-logo-1280.png",a.getElementById("worldTitle").src="images/FlatWorld90.jpg",o.to("#titleMenu",t,{x:"-100%",ease:Quad.easeIn,onComplete:function(){o.to(["#titleMain","#logoWrap","#firmamentWarsLogoWrap"],.5,{alpha:0,onComplete:function(){e("#titleMain, #title-bg-wrap").remove(),ue.unlock(1),o.fromTo("#joinGameLobby",t,{autoAlpha:0},{autoAlpha:1}),ye.addCpu&&be.addCpuPlayer(),ye.addCpu=0}})}}),t?function t(){if("lobby"===ue.view){var a=0;1===ce.player&&be.data.forEach(function(e){e.cpu&&(a=1)}),e.ajax({url:app.url+"php/updateLobby.php",data:{pingCpu:a}}).done(function(e){if("lobby"===ue.view){localStorage.setItem("reload",!0);for(var a=!1,n=1;n<=8;n++){var o=e.playerData[n];if(o!==L)o.account!==be.data[n].account&&be.updatePlayer(o),1===o.gameHost&&(a=!0);else if(be.data[n].account){r={message:be.data[n].account+" has disconnected",type:"chat-warning"};be.chat(r);var r={player:n};be.updatePlayer(r)}}a||be.hostLeft(),b(t,5e3)}}).fail(function(e){O()})}}():!1!==localStorage.getItem("reload")&&X()},hostLeft:function(){b(function(){ue.msg(ie[ce.lang].hostLeft),b(function(){W(!0)},1e3)},500)},updatePlayer:function(t){var n=t.player;if(t.account!==L){a.getElementById("lobbyRow"+n).style.display="flex",a.getElementById("lobbyAccountName"+n).innerHTML=t.cpu?"Computer":t.account,a.getElementById("lobbyName"+n).innerHTML=t.nation;var o=t.flag;a.getElementById("lobbyFlag"+n).src="images/flags/"+o,ce.player===n&&isLoggedIn&&(e("#lobbyPlayerColor"+n).attr("title",ie[ce.lang].selectPlayerColor).tooltip({container:"body",animation:!1}),e("#lobbyTeam"+n).attr("title",ie[ce.lang].selectTeam).tooltip({container:"body",animation:!1})),be.updateGovernment(t),be.data[n]=t,be.updatePlayerColor(t),a.getElementById("lobbyGovernment"+n).innerHTML=t.cpu?'<img src="images/icons/computer.png" class="fw-icon-sm">'+t.difficulty:'<img src="images/icons/Despotism.png" class="fw-icon-sm">'+ie[ce.lang].governments.Despotism,e("#lobbyCaret"+n).removeClass("text-warning text-disabled").addClass(ce.player===n||t.cpu&&1===ce.player?"text-warning":"text-disabled"),a.getElementById("gov-dropdown-player"+t.player).style.display=t.cpu?"none":"block",a.getElementById("gov-dropdown-cpu"+t.player).style.display=t.cpu?"block":"none"}else a.getElementById("lobbyRow"+n).style.display="none",a.getElementById("lobby-difficulty-cpu"+n).innerHTML=ie[ce.lang].difficulties["Very Easy"],be.data[n]={account:"",cpu:0};be.styleStartGame()},updateTeamNumber:function(e){var t=e.player,n=a.getElementById("lobbyTeamNumber"+t);null!==n&&(n.textContent=e.team)},updatePlayerColor:function(t){var a=t.player,n=ce.player===a?"fa fa-square lobbyPlayer dropdown-toggle pointer2 player"+t.playerColor:"fa fa-square lobbyPlayer dropdown-toggle player"+t.playerColor;e("#lobbyPlayerColor"+a).removeClass().addClass(n).data("playerColor",t.playerColor),be.data[a].playerColor=t.playerColor},updateGovernment:function(e){var t=e.player;a.getElementById("lobbyGovernment"+t).innerHTML="Random"===e.government?ie[ce.lang].governments[e.government]:'<img src="images/icons/'+e.government+'.png" class="fw-icon-sm">'+ie[ce.lang].governments[e.government],be.data[t].government=ie[ce.lang].governments[e.government]},updateDifficulty:function(t){var a=t.player;e("#lobby-difficulty-cpu"+a).html(ie[ce.lang].difficulties[t.difficulty]),be.data[a].difficulty=t.difficulty},styleStartGame:function(){1===ce.player&&(1===be.totalPlayers()?startGame.className=be.startClassOff:startGame.className=be.startClassOn)},countdown:function(t){ve.unsubscribe("title:refreshGames"),be.gameStarted||(e("#lobby-cpu-row").remove(),be.gameStarted=!0,new Audio("sound/beepHi.mp3"),countdown.style.display="block",function e(t){countdown.textContent=ie[ce.lang].startingGame+t--,t>=0?(we.play("beep"),b(e,1e3,t)):(we.play("beepHi"),we.load.game(),he.load.game()),1===t&&(o.to("#mainWrap",1.5,{delay:1,alpha:0,ease:Linear.easeNone,onComplete:function(){var e=1===ce.player?0:750;b(function(){X()},e),sessionStorage.setItem("gameDuration",E.now())}}),we.fade())}(5),cancelGame.style.display="none",e("#teamDropdown").css("display","none"))},governmentIcon:function(e){var t="";return e.cpu?t+='<img src="images/icons/computer.png" class="fw-icon-sm">':t+='<img src="images/icons/'+e.government+'.png" class="fw-icon-sm">',t},startGame:function(){1===ce.player&&(be.totalPlayers()>=2?(startGame.style.display="none",cancelGame.style.display="none",ue.lock(),we.play("click"),e.ajax({type:"GET",url:app.url+"php/startGame.php"}).fail(function(e){ue.msg(e.statusText),startGame.style.display="block",cancelGame.style.display="block"}).always(function(){ue.unlock()})):ue.msg(ie[ce.lang].needTwoPlayers))}},ve={initialConnection:!0,removePlayer:function(e){var t={type:"remove",account:ce.account};ve.zmq.publish("title:"+ce.channel,t),delete ye.players[e]},addPlayer:function(e,t){e&&(ve.zmq.publish("title:"+ce.channel,{type:"add",account:ce.account,flag:ce.flag,rating:ce.rating}),ye.players[e]={flag:t})},unsubscribe:function(e){try{ve.zmq.unsubscribe(e)}catch(e){}},firstInit:0,setChannel:function(t){"title"===ue.view&&((t=t.trim())?ve.firstInit&&t===ce.channel||(ve.firstInit=1,e.ajax({type:"POST",url:app.url+"php/titleChangeChannel.php",data:{channel:t}}).done(function(e){ve.removePlayer(ce.account),ve.unsubscribe("title:"+ce.channel),ce.channel=e.channel;for(var t in ye.players)delete ye.players[t];e.skip=!0,e.message=ie[ce.lang].joinedChannel+e.channel,e.type="chat-warning",ye.chat(e),ve.zmq.subscribe("title:"+ce.channel,function(e,t){-1===ue.ignore.indexOf(t.account)&&ye.chatReceive(t)}),ve.addPlayer(ce.account,ce.flag),"title"===ue.view&&(a.getElementById("titleChatHeaderChannel").textContent=e.channel,a.getElementById("titleChatBody").innerHTML=""),ye.updatePlayers(0),n.hash=ce.channel}).fail(function(){ue.chat("That channel name is not valid.")})):ue.chat("That channel name is not valid. Channel names may only contain alphanumeric values."))},enableWhisper:function(){var t="account:"+ce.account;ve.zmq.subscribe(t,function(t,a){if(a.message)if("send"===a.action){var n=ce.flag.split(".");n=n[0].replace(/ /g,"-"),ce.lastReceivedWhisper=a.account,e.ajax({url:app.url+"php/insertWhisper.php",data:{action:"receive",flag:a.flag,playerColor:a.playerColor,account:a.account,message:a.message}}),a.type="chat-whisper",a.msg=a.message,a.message=a.chatFlag+a.account+ie[ce.lang].whispers+a.message,ye.receiveWhisper(a)}else a.timestamp-ye.lastWhisper.timestamp<500&&a.account===ye.lastWhisper.account&&a.message===ye.lastWhisper.message||(ye.lastWhisper.account=a.account,ye.lastWhisper.timestamp=a.timestamp,ye.lastWhisper.message=a.message,a.msg=a.message,a.message=a.chatFlag+ie[ce.lang].to+a.account+": "+a.message,a.type="chat-whisper",ye.receiveWhisper(a))}),"localhost"!==n.host&&v(console.clear,6e5),function e(){ve.zmq.publish("fw:hb",{}),b(e,2e4)}()},joinGame:function(){!function e(){ve.enabled?(ve.unsubscribe("title:"+ce.channel),ve.unsubscribe("game:"+pe.id),ve.zmq.subscribe("game:"+pe.id,function(e,t){-1===ue.ignore.indexOf(t.account)&&ye.chatReceive(t)})):b(e,100)}()},enabled:!1,init:function(){ve.zmq=new ab.Session("wss://"+app.socketUrl+"/wss2/",function(){ve.connectionSuccess()},function(){ve.reconnect()},{skipSubprotocolCheck:!0})},connectionSuccess:function(){ve.enabled=!0,"title"===ue.view&&(ve.initialConnection&&(ue.unlock(),ve.zmq.subscribe("title:refreshGames",function(e,t){ye.updateGame(t)}),ve.zmq.subscribe("admin:broadcast",function(e,t){t.msg?ue.chat(t.msg,t.type):"close-app"===t.category&&ye.exitGame()}),ve.zmq.subscribe("fw:hb",function(e,t){t.msg&&ue.chat(t.msg,t.type)}),function e(){ce.account?ve.enableWhisper():b(e,200)}()),ve.initialConnection=!1,a.getElementById("titleChatHeaderChannel").innerHTML=ce.channel,ve.setChannel(ce.channel)),"game"===ue.view&&pe.getGameState()},connectionTries:0,connectionRetryDuration:100,reconnect:function(){ve.enabled=!1,b(ve.init,ve.connectionRetryDuration)}},we={ext:function(e){return e.canPlayType&&e.canPlayType("audio/mpeg;").replace(/no/,"")?"mp3":"ogg"}(a.createElement("audio")),on:!!a.createElement("audio").canPlayType,play:function(e,t,a){if(e)if(t)de.bgmusic.pause(),de.bgmusic.src="music/"+e+".mp3",de.bgmusic.volume=ue.config.audio.musicVolume/100;else{var n=new Audio("sound/"+e+".mp3"),o=a||1;n.volume=o*(ue.config.audio.soundVolume/100),n.play()}},save:function(){var e=G.stringify(ue.config);localStorage.setItem("config",e)},setMusicVolume:function(e){ue.config.audio.musicVolume?e||we.pause():we.musicStart(),de.bgmusic.volume=e/100,ue.config.audio.musicVolume=e,we.save()},setSoundVolume:function(e){ue.config.audio.soundVolume=e,we.save()},pause:function(){de.bgmusic.pause()},gameMusicInit:function(){ue.config.audio.musicVolume&&(we.pause(),de.bgmusic.loop=!1,we.gameMusicPlayNext())},trackIndex:~~(8*t.random()),tracks:["BehindTheShield","DeceptionPoint","HeroicReturn","HeartOfChampions","LeadingTheCharge","RiseAgainstTheMachine","TheAssault","WithGreatPower"],gameMusicPlayNext:function(){we.totalTracks=we.tracks.length;var e=we.tracks[++we.trackIndex%we.totalTracks];de.bgmusic.pause(),de.bgmusic.src="music/"+e+".mp3",de.bgmusic.volume=ue.config.audio.musicVolume/100,de.bgmusic.onended=function(){we.gameMusicPlayNext()}},fade:function(){var e={vol:ue.config.audio.musicVolume/100};o.to(e,2.5,{vol:0,ease:Linear.easeNone,onUpdate:function(){de.bgmusic.volume=e.vol}})},move:function(){we.play("march"+~~(3*t.random()))},deploy:function(){we.play("deploy"+~~(3*t.random()))},cache:{},load:{title:function(){for(var e=["click","beep"],t=0,a=e.length;t<a;t++){var n=e[t];we.cache[n]=new Audio("sound/"+n+".mp3")}},game:function(){for(var e=["machine0","machine1","machine2","machine3","machine4","machine5","machine6","machine7","machine8","machine9","march0","march1","march2","deploy0","deploy1","deploy2","chat","hup2","cheer3","culture","error","build","grenade5","grenade6","grenade8","missile7","bomb9","warning","research"],t=0,a=e.length;t<a;t++){var n=e[t];we.cache[n]=new Audio("sound/"+n+".mp3")}}},musicStart:function(){"game"!==ue.view?we.play("ReturnOfTheFallen",1):we.gameMusicPlayNext()}};we.init=function(){var t=localStorage.getItem("config");if(null===t)we.save();else{var a=G.parse(t);ue.config.audio.musicOn===L&&(ue.config.audio=a.audio)}we.load.title(),ue.config.audio.musicVolume?we.musicStart():we.pause();var n=!1,o=e("#musicSlider");o.length&&o.slider({min:0,max:100,formatter:function(e){return n?(we.setMusicVolume(e),e):ue.config.audio.musicVolume}}).slider("setValue",ue.config.audio.musicVolume),e("#soundSlider").slider({min:0,max:100,value:ue.config.audio.soundVolume,tooltip_position:"bottom",formatter:function(e){return n?(we.setSoundVolume(e),e):ue.config.audio.soundVolume}}).on("slideStop",function(e){we.play("machine0",null,.7)}).slider("setValue",ue.config.audio.soundVolume),n=!0}();var ke={error:function(e){e===L&&(e=ie[ce.lang].notScience),ue.msg(e,1.5),ce.clearHud(),ae.showTarget(de["land"+ce.tgt])},target:function(t){return ce.targetData=t,ce.checkSelectLastTarget(),ce.attackOn&&t.attackName===ce.attackName?(ce.attackOn=!1,ce.attackName="",ce.clearHud(),void ae.showTarget(de["land"+ce.tgt])):pe.tiles[ce.tgt].units<t.minimum?(ue.msg(ie[ce.lang].needTwoUnits,1.5),void ce.clearHud()):void(ce.player===pe.tiles[ce.tgt].player&&(ce.attackOn=!0,ce.attackName=t.attackName,ce.splitAttack=t.splitAttack,ce.hud(t.hudMsg),e("#style-land-crosshair").remove(),ge.head.append('<style id="style-land-crosshair">.land{ cursor: crosshair; }</style>'),ce.targetLine[0]=1*de["unit"+ce.tgt].getAttribute("x")-10,ce.targetLine[1]=1*de["unit"+ce.tgt].getAttribute("y")-10,ae.showTarget(ce.lastTarget,!0)))},attack:function(t){var a=ce.tgt,n=1*t.id.slice(4);if(ce.tgt!==n)if(-1!==pe.tiles[a].adj.indexOf(n)){if(pe.tiles[n].player===ce.player&&pe.tiles[n].units>=65535)return ue.msg(ie[ce.lang].maxUnits,1.5),void ce.clearHud();if(ce.attackOn=!1,ce.attackName="",1===pe.tiles[ce.tgt].units)return ue.msg(ie[ce.lang].needTwoUnits,1.5),void ce.clearHud();if(ce.government===ie[ce.lang].governments.Despotism&&pe.tiles[n].player===ce.player);else if(ce.moves<2&&!ce.splitAttack||ce.moves<1&&ce.splitAttack)return void ke.error(ie[ce.lang].notEnoughEnergy);ae.showTarget(t),ce.clearHud(),ue.teamMode&&pe.tiles[n].player&&ce.account!==pe.tiles[n].account&&ce.team===pe.player[pe.tiles[n].player].team&&ue.msg(ie[ce.lang].friendlyFire);var r={brightness:200},i=ce.splitAttack?"#splitAttack":"#attack";o.to(r,.5,{brightness:100,onUpdate:function(){le.brightness(i,r.brightness)}}),e.ajax({url:app.url+"php/attackTile.php",data:{attacker:a,defender:n,split:ce.splitAttack?1:0,randomTile:ke.getRandomDemocracyTile(n,pe.tiles[n].player),defGovernment:pe.player[pe.tiles[n].player].government}}).done(function(e){pe.tiles[n].player!==ce.player?pe.tiles[n].units||we.move():we.move(),e.rewardMsg&&(pe.chat({message:'<span class="chat-news">'+e.rewardMsg+"</span>"}),K(e),e.foodReward&&e.productionReward&&e.cultureReward?(le.upgrade(n,"food",e.foodReward+"%"),b(function(){le.upgrade(n,"production",e.productionReward+"%")},500),b(function(){le.upgrade(n,"culture",e.cultureReward+"%")},1e3)):e.sumFood?le.upgrade(n,"food",e.sumFood):e.sumProduction?le.upgrade(n,"production",e.sumProduction):e.sumCulture?le.upgrade(n,"culture",e.sumCulture):e.sumMoves?le.upgrade(n,"energy",e.sumMoves):e.foodReward?le.upgrade(n,"food",e.foodReward+"%"):e.productionReward?le.upgrade(n,"production",e.productionReward+"%"):e.cultureReward&&le.upgrade(n,"culture",e.cultureReward+"%")),H(e),e.victory||ae.showTarget(de["land"+a]),pe.reportMilestones(e)}).fail(function(e){ke.targetNotAdjacent(e.statusText,a)})}else ke.targetNotAdjacent("You can only attack adjacent territories.",a)},getRandomDemocracyTile:function(e,a){var n=[],o=0;pe.tiles.forEach(function(t,r){t.player===a&&r!==e&&(n[o++]=r)});var r=n.length;return n[~~(t.random()*r)]},targetNotAdjacent:function(e,t){we.play("error"),ue.msg(e,1.5),ae.showTarget(de["land"+t])},deploy:function(){"Communism"===ce.government&&!pe.tiles[ce.tgt].player&&pe.tiles[ce.tgt].units;var t=pe.tiles[ce.tgt];if(ce.player===t.player)if(ce.moves<ce.deployCost)ke.error(ie[ce.lang].notEnoughEnergy);else if(ce.manpower){if(t.units<65535){var a=ce.tgt,n={brightness:200};o.to(n,.5,{brightness:100,onUpdate:function(){le.brightness("#deploy",n.brightness)}}),e.ajax({url:app.url+"php/deploy.php",data:{target:a}}).done(function(e){we.deploy(),pe.tiles[a].units=e.units,ce.manpower=e.manpower,K(e)}).fail(function(e){we.play("error")}).always(function(){ae.setTileUnits(a)}),o.set("#manpower",{color:"#fff"})}}else ke.error(ie[ce.lang].noTroopsAvailable);else ke.error(ie[ce.lang].notYourTile)},rush:function(){var t=pe.tiles[ce.tgt],a=ce.tgt;if(ce.player===t.player){if(ce.moves<ce.rushCost)ke.error(ie[ce.lang].notEnoughEnergy);else if(t.units<65535){var n={brightness:200};o.to(n,.5,{brightness:100,onUpdate:function(){le.brightness("#rush",n.brightness)}}),e.ajax({url:app.url+"php/rush.php",data:{target:a}}).done(function(e){we.deploy(),H(e),pe.tiles[a].units=e.units,ae.setTileUnits(a)}).fail(function(e){we.play("error")}).always(function(e){K(e)})}}else ke.error(ie[ce.lang].notYourTile)},democracyUnits:function(){e.ajax({url:app.url+"php/democracy-units.php"}).done(function(e){}).always(function(e){q(e)})},upgradeTileDefense:function(){var t=pe.tiles[ce.tgt],a=t.defense-t.capital?1:0;if(ce.player===t.player){if(!(a>2))if(ce.production<ue.upgradeCost[a])ke.error();else{var n={brightness:200};o.to(n,.5,{brightness:100,onUpdate:function(){le.brightness("#upgradeTileDefense",n.brightness)}}),e.ajax({url:app.url+"php/upgradeTileDefense.php",data:{target:ce.tgt}}).done(function(e){U(e)}).fail(function(e){ue.msg(e.statusText),we.play("error")})}}else ke.error(ie[ce.lang].notYourTile)},timeoutWeaponButton:function(e,t){var n=a.getElementById(e+"Overlay"),r=a.getElementById(e+"Reload");o.set(n,{opacity:1}),o.to(r,t/1e3,{startAt:{opacity:1,width:"0%"},width:"100%",ease:Linear.easeIn,onComplete:function(){o.set(r,{opacity:0})}}),b(function(){o.set(n,{opacity:0})},t)},fireCannons:function(t){var a=E.now();if(!(a-ue.cannonTimer<2e3)){var n=ce.tgt,o=1*t.id.slice(4);ce.tgt!==o&&0!==pe.tiles[ce.tgt].units&&(ce.attackOn=!1,ce.attackName="",ce.production<24?ke.error():(ce.clearHud(),ae.showTarget(de["land"+n]),e.ajax({url:app.url+"php/fireCannons.php",data:{attacker:n,defender:o}}).done(function(e){ke.timeoutWeaponButton("fireCannons",2e3),ue.cannonTimer=a,U(e)}).fail(function(e){we.play("error"),e.statusText&&ue.msg(e.statusText,1.5)})))}},launchMissile:function(t){var a=E.now();if(!(a-ue.missileTimer<5e3)){var n=ce.tgt,o=1*t.id.slice(4);ce.tgt!==o&&0!==pe.tiles[ce.tgt].units&&(ce.attackOn=!1,ce.attackName="",ce.production<50?ke.error():(ce.clearHud(),ae.showTarget(de["land"+n]),e.ajax({url:app.url+"php/launchMissile.php",data:{attacker:n,defender:o}}).done(function(t){ke.timeoutWeaponButton("launchMissile",5e3),ue.missileTimer=a,t.production!==L&&U(t),b(function(){e.ajax({url:app.url+"php/launchMissileHit.php",data:{attacker:n,defender:o}}).fail(function(e){e.statusText&&ue.msg(e.statusText,1.5)})},1e3)}).fail(function(e){we.play("error"),e.statusText&&ue.msg(e.statusText,1.5)})))}},launchNuke:function(t){var a=E.now();if(!(a-ue.nukeTimer<3e4)){var n=ce.tgt,o=1*t.id.slice(4);ce.tgt!==o&&0!==pe.tiles[ce.tgt].units&&(ce.attackOn=!1,ce.attackName="",ce.production<150?ke.error():(ce.clearHud(),ae.showTarget(de["land"+n]),e.ajax({url:app.url+"php/launchNuke.php",data:{attacker:n,defender:o}}).done(function(t){ke.timeoutWeaponButton("launchNuke",3e4),ue.nukeTimer=a,b(function(){e.ajax({url:app.url+"php/launchNukeHit.php",data:{defender:o}})},6e3),U(t)}).fail(function(e){we.play("error"),e.statusText&&ue.msg(e.statusText,1.5)})))}},setMenu:function(){de.researchMasonry.style.display=ce.tech.masonry?"none":"flex",de.researchConstruction.style.display=ce.tech.masonry&&!ce.tech.construction?"flex":"none",de.researchEngineering.style.display=ce.tech.construction&&!ce.tech.engineering?"flex":"none",de.researchGunpowder.style.display=ce.tech.gunpowder?"none":"flex",de.researchRocketry.style.display=ce.tech.gunpowder&&!ce.tech.rocketry?"flex":"none",de.researchAtomicTheory.style.display=ce.tech.rocketry&&ce.tech.engineering&&!ce.tech.atomicTheory?"flex":"none",de.researchFutureTech.style.display=ce.tech.atomicTheory?"flex":"none",ke.setBuildButton(),de.fireCannons.style.display=ce.tech.gunpowder?"flex":"none",de.launchMissile.style.display=ce.tech.rocketry?"flex":"none",de.launchNuke.style.display=ce.tech.atomicTheory?"flex":"none"},setBuildButton:function(){var e=pe.tiles[ce.tgt],t=e.defense-(e.capital?1:0),a="none";ce.tech.masonry&&e.player===ce.player&&(0===t||1===t&&ce.tech.construction||2===t&&ce.tech.engineering)&&(a="flex"),de.upgradeTileDefense.style.display=a}};e("#gameWrap").on(ae.click,"#attack",function(){var e=new ee({});ke.target(e)}).on(ae.click,"#deploy",function(){ke.deploy()}).on(ae.click,"#splitAttack",function(){var e=new ee({cost:1,attackName:"splitAttack",hudMsg:ie[ce.lang].hudSplitAttack,splitAttack:!0});ke.target(e)}).on(ae.click,"#rush",function(){ke.rush()}).on(ae.click,"#upgradeTileDefense",function(){ke.upgradeTileDefense()}).on(ae.click,"#researchMasonry",function(){Te.masonry()}).on(ae.click,"#researchConstruction",function(){Te.construction()}).on(ae.click,"#researchGunpowder",function(){Te.gunpowder()}).on(ae.click,"#researchEngineering",function(){Te.engineering()}).on(ae.click,"#researchRocketry",function(){Te.rocketry()}).on(ae.click,"#researchAtomicTheory",function(){Te.atomicTheory()}).on(ae.click,"#researchFutureTech",function(){Te.futureTech()}).on(ae.click,"#fireCannons",function(){var e=new ee({cost:0,minimum:0,attackName:"cannons",hudMsg:ie[ce.lang].hudFireCannons});ke.target(e)}).on(ae.click,"#launchMissile",function(){var e=new ee({cost:0,minimum:0,attackName:"missile",hudMsg:ie[ce.lang].hudLaunchMissile});ke.target(e)}).on(ae.click,"#launchNuke",function(){var e=new ee({cost:0,minimum:0,attackName:"nuke",hudMsg:ie[ce.lang].hudLaunchNuke});ke.target(e)});var Te={masonry:function(){ce.production<40||e.ajax({type:"GET",url:app.url+"php/researchMasonry.php"}).done(function(e){U(e),le.research({element:"researchMasonry",duration:20,tech:ie[ce.lang].abMasonry,method:"masonryDone"})})},masonryDone:function(){e.ajax({type:"GET",url:app.url+"php/researchMasonryDone.php"}).done(function(e){ce.tech.masonry=1,Te.report(e,"Masonry")})},construction:function(){ce.production<60||e.ajax({type:"GET",url:app.url+"php/researchConstruction.php"}).done(function(e){U(e),le.research({element:"researchConstruction",duration:30,tech:ie[ce.lang].abConstruction,method:"constructionDone"})})},constructionDone:function(){e.ajax({type:"GET",url:app.url+"php/researchConstructionDone.php"}).done(function(e){ce.tech.construction=1,Te.report(e,"Construction")})},gunpowder:function(){ce.production<60||e.ajax({type:"GET",url:app.url+"php/researchGunpowder.php"}).done(function(e){U(e),le.research({element:"researchGunpowder",duration:25,tech:ie[ce.lang].abGunpowder,method:"gunpowderDone"})})},gunpowderDone:function(){e.ajax({type:"GET",url:app.url+"php/researchGunpowderDone.php"}).done(function(e){ce.tech.gunpowder=1,Te.report(e,"Gunpowder")})},engineering:function(){ce.production<80||e.ajax({type:"GET",url:app.url+"php/researchEngineering.php"}).done(function(e){U(e),le.research({element:"researchEngineering",duration:45,tech:ie[ce.lang].abEngineering,method:"engineeringDone"})})},engineeringDone:function(){e.ajax({type:"GET",url:app.url+"php/researchEngineeringDone.php"}).done(function(e){ce.tech.engineering=1,Te.report(e,"Engineering")})},rocketry:function(){ce.production<200||e.ajax({type:"GET",url:app.url+"php/researchRocketry.php"}).done(function(e){U(e),le.research({element:"researchRocketry",duration:40,tech:ie[ce.lang].abRocketry,method:"rocketryDone"})})},rocketryDone:function(){e.ajax({type:"GET",url:app.url+"php/researchRocketryDone.php"}).done(function(e){ce.tech.rocketry=1,Te.report(e,"Rocketry")})},atomicTheory:function(){ce.production<500||e.ajax({type:"GET",url:app.url+"php/researchAtomicTheory.php"}).done(function(e){U(e),le.research({element:"researchAtomicTheory",duration:60,tech:ie[ce.lang].abAtomic,method:"atomicTheoryDone"})})},atomicTheoryDone:function(){e.ajax({type:"GET",url:app.url+"php/researchAtomicTheoryDone.php"}).done(function(e){ce.tech.atomicTheory=1,Te.report(e,"Atomic Theory")})},futureTech:function(){ce.production<800||e.ajax({type:"GET",url:app.url+"php/researchFutureTech.php"}).done(function(e){U(e),le.research({element:"researchFutureTech",duration:90,tech:ie[ce.lang].abFuture,method:"futureTechDone"})})},futureTechDone:function(){e.ajax({type:"GET",url:app.url+"php/researchFutureTechDone.php"}).done(function(e){Te.report(e,"Future Tech")})},report:function(e,t){a={message:"You have finished researching "+t+"."};if(pe.chat(a),e.cultureMsg){var a={message:e.cultureMsg};pe.chat(a)}we.play("research"),ke.setMenu()}};e(A).focus(function(){a.title=ue.defaultTitle,ue.titleFlashing=!1,ue.notification.close!==L&&ue.notification.close()}),e(A).on("load",function(){b(function(){o.to("body",.3,{startAt:{display:"flex",opacity:0},opacity:1})},100),o.to("#worldTitle",600,{startAt:{xPercent:-50,yPercent:-50,rotation:-360},rotation:0,repeat:-1,ease:Linear.easeNone})}).on("resize",function(){ae.resizeWindow()}),function(){function r(t){var n=a.getElementById("createGameHead"),r=a.getElementById("createRankedGameHead"),i=e("#gameName"),s=a.getElementById("createGameNameWrap"),l=a.getElementById("createGamePasswordWrap"),c=a.getElementById("createGameMaxPlayerWrap");ue.rankedMode=0,ue.teamMode=0,"ranked"===t?(ue.rankedMode=1,n.style.display="none",r.style.display="block",s.style.display="none",l.style.display="none",c.style.display="none"):(n.style.display="block",r.style.display="none",s.style.display="block",l.style.display="block",c.style.display="block"),"team"===t&&(ue.teamMode=1,n.textContent=ie[ce.lang].createTeamGameHeadLabel),i.val("").select(),e("#gamePassword").val(""),o.to("#createGameWrap",ue.modalSpeed,{startAt:{visibility:"visible",y:0,alpha:0},y:30,alpha:1}),ye.showBackdrop(i)}e("#mainWrap").on(ae.click,".titlePlayerAccount, .lobbyAccountName",function(){ye.who("/who "+e(this).text())}),e("#gameView").on("dragstart","img",function(e){e.preventDefault()}),e("img").on("dragstart",function(e){e.preventDefault()}),e("#logout").on(ae.click,function(){return function(){ue.lock(),ve.removePlayer(ce.account),e.ajax({type:"GET",url:app.url+"php/deleteFromFwtitle.php"});try{FB.getLoginStatus(function(e){e.authResponse&&FB.logout(function(e){})})}catch(e){}try{gapi.auth2.getAuthInstance().signOut().then(function(){})}catch(e){}localStorage.removeItem("email"),localStorage.removeItem("token"),b(function(){e.ajax({type:"GET",url:app.url+"php/logout.php"}).done(function(e){localStorage.removeItem("token"),n.reload(),ue.msg(ie[ce.lang].logoutSuccess)}).fail(function(){ue.msg(ie[ce.lang].logoutFailed)})},1e3)}(),!1}),e("#login").on(ae.click,function(){ve.removePlayer(ce.account),e.ajax({type:"GET",url:app.url+"php/deleteFromFwtitle.php"})}),e("#titleMenu").on(ae.click,".wars",function(){var t=e(this).data("name");e("#joinGame").val(t),e("#joinGamePassword").val(""),ye.joinGame()}),e("#mainWrap").on(ae.click,".chat-join",function(){ve.setChannel(e(this).text())}),e("#create").on(ae.click,function(){r("ffa")}),e("#createRankedBtn").on(ae.click,function(){r("ranked")}),e("#createTeamBtn").on(ae.click,function(){r("team")}),e("#createGame").on(ae.click,function(){ye.createGame()}),e("#play-now-btn").on(ae.click,function(){ye.addCpu=1,ye.createGameService(ce.account+"_"+~~(999999*t.random()),"","Earth Omega",8,0,0,20)}),app.isLocal||e(a).on("contextmenu",function(){return!1}),e("body").on(ae.click,"#options, #gameOptions",function(){ye.showModal()}).on(ae.click,"#hotkeys",function(){o.to("#hotkeysModal",ue.modalSpeed,{startAt:{visibility:"visible",y:0,alpha:0},y:30,alpha:1}),ye.showBackdrop()}).on(ae.click,"#hide-ui",function(){pe.toggleGameWindows(1)}).on(ae.click,"#toggle-flags",function(){pe.toggleFlags()}).on(ae.click,"#surrender",function(e){a.getElementById("surrenderScreen").style.display="block",we.play("click")}),e("#hotkeysDone, #optionsDone, #cancelCreateGame").on(ae.click,function(){ye.closeModal()}),e("#joinPrivateGameModal").on(ae.click,"#joinPrivateGameBtnConfirm",function(){ye.joinGame()}),e("#refresh-game-button").on(ae.click,function(){ye.refreshGames()}),e("#titleChat").on(ae.click,".nw-link",function(){ye.openWindow(e(this).attr("href"))}),e("#titleChatPlayers").on(ae.click,"#friend-status",function(){ye.listFriends()}).on(ae.click,"#ignore-status",function(){ye.listIgnore()}),e("#get-help").on(ae.click,function(){ye.help(),e("#title-chat-input").focus()}),e("#ignore-user").on(ae.click,function(){e("#title-chat-input").val("/ignore ").focus()}),e("#share-url").on(ae.click,function(){e("#title-chat-input").val("/url ").focus()}),e("#share-image").on(ae.click,function(){e("#title-chat-input").val("/img ").focus()}),e("#share-video").on(ae.click,function(){e("#title-chat-input").val("/video ").focus()}),e("#who-account").on(ae.click,function(){e("#title-chat-input").val("/who ").focus()}),e("#add-friend").on(ae.click,function(){e("#title-chat-input").val("/friend ").focus()}),e("#whisper-account").on(ae.click,function(){e("#title-chat-input").val("@").focus()}),e("#change-channel").on(ae.click,function(){e("#title-chat-input").val("#").focus()}),e("#body").on(ae.click,"#cancelGame",function(){W()}).on(ae.click,"#startGame",function(){be.startGame()}).on(ae.click,".addFriend",function(){ye.toggleFriend(e(this).data("account"))}).on(ae.click,".ribbon",function(){var t=1*e(this).data("ribbon");ue.chat(ie[ce.lang].ribbonTitle[t]+": "+ie[ce.lang].ribbonDescription[t],"chat-warning")}),e("#toggleNation").on(ae.click,function(){ye.configureNation()}),e("#joinPrivateGameBtn").on(ae.click,function(){var t=e("#joinGame");t.val(""),o.to("#joinPrivateGameModal",ue.modalSpeed,{startAt:{visibility:"visible",y:0,alpha:0},y:30,alpha:1,onComplete:function(){t.focus()}}),ye.showBackdrop()}),e("#mainWrap").on(ae.click,".unlockGameBtn",function(){ye.closeModal(),o.to("#unlockGame",ue.modalSpeed,{startAt:{visibility:"visible",y:0,alpha:0},y:30,alpha:1}),b(function(){e("#card-number").focus()},100),ye.showBackdrop()}),e("#leaderboardBtn").on(ae.click,function(){o.to("#leaderboard",ue.modalSpeed,{startAt:{visibility:"visible",top:0,alpha:0},top:30,alpha:1}),ye.showBackdrop(),ye.getLeaderboard("Ranked")}),e("#leaderboardFfaBtn").on(ae.click,function(){ye.getLeaderboard("FFA")}),e("#leaderboardRankedBtn").on(ae.click,function(){ye.getLeaderboard("Ranked")}),e("#leaderboard-trips-btn").on(ae.click,function(){ye.getLeaderboard("Trips")}),e("#leaderboard-quads-btn").on(ae.click,function(){ye.getLeaderboard("Quads")}),e("#leaderboard-pents-btn").on(ae.click,function(){ye.getLeaderboard("Pents")}),e("#leaderboardTeamBtn").on(ae.click,function(){ye.getLeaderboard("Team")}),e("#window-select-wrap").on(ae.click,".window-select",function(){ae.setWindow(this.id)}),e("#bible-status").on(ae.click,function(){se.setBibleMode(e(this).prop("checked"))}),e("#flagDropdown").on(ae.click,".flagSelect",function(t){ce.selectedFlag=e(this).text().trim(),ce.selectedFlagFull="Nepal"===ce.selectedFlag?ce.selectedFlag+".png":ce.selectedFlag+".jpg",e(".flagPurchaseStatus").css("display","none"),e("#updateNationFlag").attr("src","images/flags/"+ce.selectedFlagFull).css("display","block"),ue.lock(1),e.ajax({url:app.url+"php/updateFlag.php",data:{flag:ce.selectedFlagFull}}).done(function(t){ce.flag=ce.selectedFlagFull,e(".nationFlag").attr({src:"images/flags/"+ce.selectedFlagFull,title:ce.selectedFlag}),ue.msg(ie[ce.lang].flagChanged+ce.selectedFlag),a.getElementById("selectedFlag").textContent=ce.selectedFlag,e("[title]").tooltip("fixTitle").tooltip({animation:!1})}).always(function(){ue.unlock(1),o.to("#updateNationFlag",1,{startAt:{alpha:0},alpha:1})}),t.preventDefault()}),e("#submitNationName").on("mousedown",function(){ye.submitNationName()}),e("#updateNationName").on("focus",function(){ue.focusUpdateNationName=!0}).on("blur",function(){ue.focusUpdateNationName=!1}),e("#refreshGameWrap").on("focus","#gameName",function(){ue.focusGameName=!0}),e("#refreshGameWrap").on("blur","#gameName",function(){ue.focusGameName=!1}),e("#titleViewBackdrop, .close-btn").on(ae.click,function(){ye.closeModal()}),e("#mainWrap").on(ae.click,"#unlockGameDone, #configureNationDone, #leaderboardDone",function(){we.play("click"),ye.closeModal()}),e("#joinRankedGame").on(ae.click,function(){we.play("click"),ue.lock(1),ue.searchingGame=!0,ue.msg(ie[ce.lang].rankedSearch,0),function t(a){a<1&&!ue.joinedGame?(b(function(){ue.searchingGame&&t(++a)},1e3),e.ajax({url:app.url+"php/joinRankedGame.php"}).done(function(e){ue.searchingGame&&(o.set(de.Msg,{opacity:0}),ue.joinedGame=1,ue.unlock(),ue.searchingGame=!1,ye.joinGameCallback(e))})):!ue.joinedGame&&ue.searchingGame&&(ue.msg(ie[ce.lang].noRankedFound,5),ue.unlock(),ue.searchingGame=!1)}(0)})}(),e("#chat-input-open").on(ae.click,function(){te()}),e("#chat-input-send").on(ae.click,function(){te(!0)}),e("#lobby-chat-input").on("focus",function(){be.chatOn=!0}).on("blur",function(){be.chatOn=!1}),e("#lobbyChatSend").on(ae.click,function(){be.sendMsg(!0)}),e("#lobbyChatLog").on("mousedown",function(){be.chatDrag=!0}).on("mouseup",function(){be.chatDrag=!1}),e("#joinGameLobby").on(ae.click,".governmentChoice",function(t){var a=e(this).data("government");be.updateGovernmentWindow(a),e.ajax({url:app.url+"php/changeGovernment.php",data:{government:a}})}).on(ae.click,".cpu-choice",function(t){var a=e(this).data("difficulty");e.ajax({url:app.url+"php/change-cpu-difficulty.php",data:{difficulty:a,player:e(this).data("player")}})}).on(ae.click,".playerColorChoice",function(t){var a=e(this).data("playercolor");e.ajax({url:app.url+"php/changePlayerColor.php",data:{playerColor:1*a}}).done(function(e){ce.playerColor=e.playerColor}).fail(function(e){ue.msg(e.statusText,1.5)})}).on(ae.click,".teamChoice",function(){var t=e(this).text().slice(5),a=e(this).data("player");e.ajax({url:app.url+"php/changeTeam.php",data:{team:t,player:a}}).done(function(e){ce.player===1*e.player&&(ce.team=e.team)})}).on(ae.click,"#cpu-add-player",function(e){we.play("click"),be.addCpuPlayer()}).on(ae.click,"#cpu-remove-player",function(t){we.play("click"),e.ajax({url:app.url+"php/cpu-remove-player.php"})}),oe?(e("body").on("DOMMouseScroll",function(e){"game"===ue.view&&($(e.originalEvent.layerX,e.originalEvent.layerY),fe[0].applyBounds())}),e("#worldWrap").on("DOMMouseScroll",function(e){e.originalEvent.detail>0?Z():Q(),fe[0].applyBounds()})):(e("body").on("mousewheel",function(e){"game"===ue.view&&($(e.offsetX,e.offsetY),fe[0].applyBounds())}),e("#worldWrap").on("mousewheel",function(e){e.originalEvent.wheelDelta>0?Q():Z(),fe[0].applyBounds()})),e("#worldWrap").on("mousemove",function(e){oe?$(e.originalEvent.layerX,e.originalEvent.layerY):$(e.offsetX,e.offsetY)}),e("#createGameWrap").on(ae.click,".mapSelect",function(t){var n=e(this).text(),o=n.replace(/ /g,"");ue.map.name=n,ue.map.key=o,a.getElementById("createGameMap").innerHTML=n,a.getElementById("createGamePlayers").innerHTML=ye.mapData[o].players;var r=e("#gamePlayers");r.attr("max",ye.mapData[o].players),1*r.val()>ye.mapData[o].players&&r.val(ye.mapData[o].players),t.preventDefault()}),e("#mainWrap").on(ae.click,".gameSelect",function(e){e.preventDefault()}),e("#bgmusic").on("ended",function(){var e=a.getElementById("bgmusic");e.currentTime=0,e.play()}),e("#bgamb1").on("ended",function(){var e=a.getElementById("bgamb1");e.currentTime=0,e.play()}),e("#bgamb2").on("ended",function(){var e=a.getElementById("bgamb2");e.currentTime=0,e.play()}),e("#cancelSurrenderButton").on(ae.click,function(){we.play("click"),a.getElementById("surrenderScreen").style.display="none"}),e("#surrenderButton").on(ae.click,function(){j()});if(e(a).on("keydown",function(t){var a=t.keyCode;if(t.ctrlKey){if(82===a)return!1}else"title"===ue.view?(!ue.isModalOpen&&isLoggedIn&&e("#title-chat-input").focus(),27===a&&ye.toggleModal()):"lobby"===ue.view?(e("#lobby-chat-input").focus(),27===a&&ye.toggleModal()):9===a?(t.shiftKey?ce.nextTarget(!0):ce.nextTarget(!1),t.preventDefault()):86===a?"game"!==ue.view||ue.chatOn||pe.toggleGameWindows(1):27===a&&!ce.attackOn&&!ue.chatOn&&ye.toggleModal()}).on("keyup",function(t){a=t.keyCode;if("title"===ue.view)13===a&&(ue.focusUpdateNationName?ye.submitNationName():ue.focusGameName?ye.createGame():ye.chatOn?13===a&&ye.sendMsg():ye.createGameFocus&&ye.createGame());else if("lobby"===ue.view)be.chatOn&&13===a&&be.sendMsg();else if("game"===ue.view)if(ue.chatOn)13!==a&&27!==a||te(!0);else if(13===a)te();else if(27===a)ce.attackOn&&(ce.attackOn=!1,ce.attackName="",ce.clearHud(),ae.showTarget(de["land"+ce.tgt]));else if(65===a){n=new ee;ke.target(n)}else if(83===a){n=new ee({cost:1,attackName:"splitAttack",hudMsg:ie[ce.lang].hudSplitAttack,splitAttack:!0});ke.target(n)}else if(68===a)ue.keyLock||ke.deploy();else if(82===a){if(!ue.keyLock){if(t.ctrlKey){var a;return(a=ce.lastReceivedWhisper)&&("title"===ue.view?e("#title-chat-input").val("/w "+a+" ").focus():"lobby"===ue.view?e("#lobby-chat-input").val("/w "+a+" ").focus():(ue.chatOn||te(),e("#chat-input").val("/w "+a+" ").focus())),!1}ke.rush()}}else if(89===a)Te.masonry();else if(79===a)Te.construction();else if(69===a)Te.engineering();else if(71===a)Te.gunpowder();else if(75===a)Te.rocketry();else if(84===a)Te.atomicTheory();else if(70===a)Te.futureTech();else if(66===a)ke.upgradeTileDefense();else if(67===a&&ce.tech.gunpowder){n=new ee({cost:0,minimum:0,attackName:"cannons",hudMsg:ie[ce.lang].hudFireCannons});ke.target(n)}else if(77===a&&ce.tech.rocketry){n=new ee({cost:0,minimum:0,attackName:"missile",hudMsg:ie[ce.lang].hudLaunchMissile});ke.target(n)}else if(78===a&&ce.tech.atomicTheory){var n=new ee({cost:0,minimum:0,attackName:"nuke",hudMsg:ie[ce.lang].hudLaunchNuke});ke.target(n)}}),e("#dictatorAvatar").on("change",function(t){function n(e){o.html(e),we.play("error")}var o=e("#uploadErr"),r=t.target.files[0],i=new FileReader;i.readAsDataURL(r),"image/jpeg"!==r.type?n("Wrong file type! Image must be in jpg format."):i.addEventListener("load",function(){i.result.length<7e4?e.ajax({url:app.url+"php/uploadDictator.php",type:"POST",data:{uri:i.result},beforeSend:function(){o.text("")}}).done(function(e){o.text("Avatar updated successfully!"),a.getElementById("configureAvatarImage").src=i.result}).fail(function(e){n(e.statusText)}):(n("File size too large! Image must be less than 40 kb."),o.html())},!1)}),app.isApp){var Ce=require("nw.gui");win=Ce.Window.get(),win.on("close",function(){this.hide(),ye.closeGame(),this.close(!0)})}var Se={structureDefense:[1,1.5,2,2.5,3],scoreTargetAttack:function(e){var a=50;return ue.teamMode?pe.player[e.attacker].team===pe.player[e.defender].team?a-=25:e.defenderUnits?0===e.defender?a+=10:pe.player[e.attacker].team!==pe.player[e.defender].team?a+=25:e.attacker===e.defender&&(a-=5):a+=50:0===e.defender?a+=50:e.attacker!==e.defender?a+=25:a-=10,e.attacker!==e.defender&&(a-=e.defenderUnits*Se.structureDefense[e.defense+e.capital],a+=~~(e.food+10*t.random()-5)),a},getAttackTarget:function(e){var t=-1,a=-1,n=0;return pe.tiles.forEach(function(o,r){if(o.player===e&&o.units>=5){var i=0;o.capital&&(i-=20),o.adj.forEach(function(s){var l=pe.tiles[s],c=Se.scoreTargetAttack({attacker:e,defender:l.player,attackerUnits:o.units,defenderUnits:l.units,unitDiff:o.units-l.units,defense:l.defense,food:l.food,production:l.production,culture:l.culture,capital:l.capital});i+c>n&&(n=c,t=r,a=s)})}}),[t,a,n]},scoreTargetWeapon:function(e){var a=50;return ue.teamMode?pe.player[e.attacker].team===pe.player[e.defender].team?a-=25:0===e.defender?a-=10:pe.player[e.attacker].team!==pe.player[e.defender].team?a+=30:e.attacker===e.defender&&(a-=5):0===e.defender?a+=10:e.attacker!==e.defender?a+=25:a-=10,e.attacker!==e.defender&&(a-=e.unitDiff,a+=~~(e.food+10*t.random()-5)),a},getWeaponTarget:function(e){var t=-1,a=-1,n=0;return pe.tiles.forEach(function(o,r){o.player===e&&o.adj.forEach(function(i){var s=pe.tiles[i],l=Se.scoreTargetWeapon({attacker:e,defender:s.player,attackerUnits:o.units,unitDiff:o.units-s.units,defense:s.defense,food:s.food,production:s.production,culture:s.culture,capital:s.capital});l>n&&(n=l,t=r,a=i)})}),[t,a,n]},getRangedWeaponTarget:function(e){var t=-1,a=-1,n=0;return pe.tiles.forEach(function(o,r){if(o.player!==e){var i=50;ue.teamMode&&pe.player[o.player].team===pe.player[e].team?i-=25:(i+=o.units,i+=20*o.defense,o.capital&&(i+=5),o.player||(i=0)),i>n&&(n=i,a=r)}else t=r}),[t,a,n]},attack:function(t){var a=Se.getAttackTarget(t.player);a[0]>-1&&e.ajax({url:app.url+"php/attack-ai.php",data:{attacker:a[0],defender:a[1],player:t.player,randomTile:ke.getRandomDemocracyTile(a[1],pe.tiles[a[1]].player),defGovernment:pe.player[pe.tiles[a[1]].player].government}})},scoreTargetDeploy:function(e){var a=50;return e.player?e.sameTeam?e.sameTeam&&(a-=10):(a+=10,e.player&&!e.unitDiff&&(a+=-1*e.unitDiff)):a+=20,a+=~~(6*t.random()-3)},getDeployTarget:function(e){var t=-1,a=ue.team?pe.player[e].team:0,n=0;return pe.tiles.forEach(function(o,r){var i=pe.tiles[r].units,s=0,l=0,c=0,u=o.defense+(o.capital?1:0);if(o.player===e&&o.units<65535&&o.flag){o.capital&&i<24&&(l+=20),o.adj.forEach(function(t){c++;var n=pe.tiles[t];n.sameTeam=ue.teamMode?a===pe.player[n.player].team:e===n.player,n.unitDiff=i-n.units,n.cpuUnits=i,n.tileDefense=u,s+=Se.scoreTargetDeploy(n)});var d=l+~~(s/c);d>n&&(n=d,t=r)}}),t},getDefenseTarget:function(e){var t=-1,a=0;return pe.tiles.forEach(function(n,o){var r=0;n.player===e&&n.units<65535&&n.flag&&(r+=n.units,(r+=10*(3-n.defense))>a&&(a=r,t=o))}),t},deploy:function(t,a){var n=Se.getDeployTarget(t.player);n!==L&&e.ajax({url:app.url+"php/deploy-ai.php",data:{tile:n,food:a.food}})},getResourceTotal:function(e){var t={food:0,production:0,culture:0};return pe.tiles.forEach(function(a){e===a.player&&(t.food+=a.food,t.production+=a.production,t.culture+=a.culture)}),t},weaponDelay:function(){return 11e3*t.random()+1e3},fireCannons:function(t){var a=Se.getWeaponTarget(t.player);a[0]>-1&&e.ajax({url:app.url+"php/ai-fireCannons.php",data:{attacker:a[0],defender:a[1]}})},launchMissile:function(t){var a=Se.getRangedWeaponTarget(t.player);a[0]>-1&&e.ajax({url:app.url+"php/ai-launchMissile.php",data:{attacker:a[0],defender:a[1]}}).done(function(){b(function(){e.ajax({url:app.url+"php/ai-launchMissileHit.php",data:{account:t.account,attacker:a[0],defender:a[1]}})},1e3)})},launchNuke:function(t){var a=Se.getRangedWeaponTarget(t.player);a[0]>-1&&e.ajax({url:app.url+"php/ai-launchNuke.php",data:{attacker:a[0],defender:a[1]}}).done(function(){b(function(){e.ajax({url:app.url+"php/ai-launchNukeHit.php",data:{account:t.account,defender:a[1]}})},6e3)})},upgradeTileDefense:function(t){var a=Se.getDefenseTarget(t.player);a>-1&&e.ajax({url:app.url+"php/ai-upgradeTileDefense.php",data:{target:a,account:t.account}})},deployRate:{VeryEasy:6,Easy:5,Normal:4,Hard:4,VeryHard:3,Mania:2,Juggernaut:1},deployFood:{VeryEasy:50,Easy:40,Normal:30,Hard:22,VeryHard:15,Mania:10,Juggernaut:5},attackFood:{VeryEasy:40,Easy:30,Normal:50,Hard:40,VeryHard:30,Mania:20,Juggernaut:10},attackMax:{VeryEasy:2,Easy:3,Normal:3,Hard:4,VeryHard:5,Mania:6,Juggernaut:8},attackBaseTurns:{VeryEasy:0,Easy:0,Normal:1,Hard:1,VeryHard:1,Mania:2,Juggernaut:3},unlockNuke:{VeryEasy:250,Easy:150,Normal:100,Hard:90,VeryHard:80,Mania:60,Juggernaut:20},unlockMissile:{VeryEasy:100,Easy:65,Normal:50,Hard:40,VeryHard:30,Mania:20,Juggernaut:10},unlockCannons:{VeryEasy:50,Easy:30,Normal:20,Hard:15,VeryHard:10,Mania:5,Juggernaut:0},missileRate:{VeryEasy:.875,Easy:.75,Normal:.66,Hard:.6,VeryHard:.5,Mania:.33,Juggernaut:0},cannonRate:{VeryEasy:.75,Easy:.66,Normal:.5,Hard:.35,VeryHard:.2,Mania:.1,Juggernaut:0},unlockStructures:{VeryEasy:30,Easy:20,Normal:10,Hard:8,VeryHard:5,Mania:2,Juggernaut:0},updateResources:function(t,a){e.ajax({url:app.url+"php/ai-updateResources.php",data:{player:a,moves:4+~~(t.food/50),food:t.food,production:t.production,culture:t.culture}})},randomTime:function(){return t.random()*(1e3*ue.speed)},takeTurn:function(e){var a=Se.getResourceTotal(e.player);if(Se.updateResources(a,e.player),ue.resourceTick%Se.deployRate[e.difficultyShort]==0){Se.deploy(e,a);(r=~~(a.food/Se.deployFood[e.difficultyShort]))>3&&(r=3);for(i=0;i<r;i++)Se.deploy(e,a)}var n=t.ceil(a.food/Se.attackFood[e.difficultyShort])+Se.attackBaseTurns[e.difficultyShort];n>Se.attackMax[e.difficultyShort]&&(n=Se.attackMax[e.difficultyShort]);for(i=0;i<n;i++)!function(e,a){b(function(){Se.attack(a)},i*(100*ue.speed)+1e3*t.random()-500)}(0,e);var o=0;if(ue.resourceTick>Se.unlockNuke[e.difficultyShort]&&t.random()>.95&&(o=1,b(function(){Se.launchNuke(e)},Se.weaponDelay())),!o)if(ue.resourceTick>Se.unlockMissile[e.difficultyShort]){if(t.random()>Se.missileRate[e.difficultyShort])for(var r=t.ceil(a.food/60),i=0;i<r;i++)b(function(){Se.launchMissile(e)},Se.weaponDelay())}else if(ue.resourceTick>Se.unlockCannons[e.difficultyShort]&&t.random()>Se.cannonRate[e.difficultyShort])for(var r=t.ceil(a.food/30),i=0;i<r;i++)b(function(){Se.fireCannons(e)},Se.weaponDelay());ue.resourceTick>Se.unlockStructures[e.difficultyShort]&&t.random()>.875&&b(function(){Se.upgradeTileDefense(e)},Se.weaponDelay())}}}($,Math,document,location,TweenMax,TimelineMax,Power0,Power1,Power2,Power3,Power4,Back,Elastic,Bounce,SteppedEase,Circ,Expo,Sine,setTimeout,setInterval,clearTimeout,clearInterval,void 0===window.webkitRequestAnimationFrame||webkitRequestAnimationFrame,void 0===window.webkitCancelAnimationFrame||webkitCancelAnimationFrame,getComputedStyle,requestAnimationFrame,cancelAnimationFrame,window,Array,JSON,Date,Object);